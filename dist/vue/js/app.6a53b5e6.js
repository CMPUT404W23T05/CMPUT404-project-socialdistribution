(function(){var e={6700:function(e,t,s){var o={"./af":3906,"./af.js":3906,"./ar":902,"./ar-dz":3853,"./ar-dz.js":3853,"./ar-kw":299,"./ar-kw.js":299,"./ar-ly":6825,"./ar-ly.js":6825,"./ar-ma":6379,"./ar-ma.js":6379,"./ar-sa":7700,"./ar-sa.js":7700,"./ar-tn":2059,"./ar-tn.js":2059,"./ar.js":902,"./az":6043,"./az.js":6043,"./be":7936,"./be.js":7936,"./bg":4078,"./bg.js":4078,"./bm":4014,"./bm.js":4014,"./bn":9554,"./bn-bd":7114,"./bn-bd.js":7114,"./bn.js":9554,"./bo":6529,"./bo.js":6529,"./br":5437,"./br.js":5437,"./bs":9647,"./bs.js":9647,"./ca":9951,"./ca.js":9951,"./cs":6113,"./cs.js":6113,"./cv":7965,"./cv.js":7965,"./cy":5858,"./cy.js":5858,"./da":3515,"./da.js":3515,"./de":2831,"./de-at":6263,"./de-at.js":6263,"./de-ch":1127,"./de-ch.js":1127,"./de.js":2831,"./dv":4510,"./dv.js":4510,"./el":8616,"./el.js":8616,"./en-au":4595,"./en-au.js":4595,"./en-ca":3545,"./en-ca.js":3545,"./en-gb":9609,"./en-gb.js":9609,"./en-ie":3727,"./en-ie.js":3727,"./en-il":3302,"./en-il.js":3302,"./en-in":6305,"./en-in.js":6305,"./en-nz":9128,"./en-nz.js":9128,"./en-sg":4569,"./en-sg.js":4569,"./eo":650,"./eo.js":650,"./es":6358,"./es-do":4214,"./es-do.js":4214,"./es-mx":8639,"./es-mx.js":8639,"./es-us":232,"./es-us.js":232,"./es.js":6358,"./et":7279,"./et.js":7279,"./eu":5515,"./eu.js":5515,"./fa":7981,"./fa.js":7981,"./fi":7090,"./fi.js":7090,"./fil":9208,"./fil.js":9208,"./fo":2799,"./fo.js":2799,"./fr":3463,"./fr-ca":2213,"./fr-ca.js":2213,"./fr-ch":2848,"./fr-ch.js":2848,"./fr.js":3463,"./fy":1468,"./fy.js":1468,"./ga":8163,"./ga.js":8163,"./gd":2898,"./gd.js":2898,"./gl":6312,"./gl.js":6312,"./gom-deva":682,"./gom-deva.js":682,"./gom-latn":9178,"./gom-latn.js":9178,"./gu":5009,"./gu.js":5009,"./he":2795,"./he.js":2795,"./hi":7009,"./hi.js":7009,"./hr":6506,"./hr.js":6506,"./hu":9565,"./hu.js":9565,"./hy-am":3864,"./hy-am.js":3864,"./id":5626,"./id.js":5626,"./is":6649,"./is.js":6649,"./it":151,"./it-ch":5348,"./it-ch.js":5348,"./it.js":151,"./ja":9830,"./ja.js":9830,"./jv":3751,"./jv.js":3751,"./ka":3365,"./ka.js":3365,"./kk":5980,"./kk.js":5980,"./km":9571,"./km.js":9571,"./kn":5880,"./kn.js":5880,"./ko":6809,"./ko.js":6809,"./ku":6773,"./ku.js":6773,"./ky":5505,"./ky.js":5505,"./lb":553,"./lb.js":553,"./lo":1237,"./lo.js":1237,"./lt":1563,"./lt.js":1563,"./lv":1057,"./lv.js":1057,"./me":6495,"./me.js":6495,"./mi":3096,"./mi.js":3096,"./mk":3874,"./mk.js":3874,"./ml":6055,"./ml.js":6055,"./mn":7747,"./mn.js":7747,"./mr":7113,"./mr.js":7113,"./ms":8687,"./ms-my":7948,"./ms-my.js":7948,"./ms.js":8687,"./mt":4532,"./mt.js":4532,"./my":4655,"./my.js":4655,"./nb":6961,"./nb.js":6961,"./ne":2512,"./ne.js":2512,"./nl":8448,"./nl-be":2936,"./nl-be.js":2936,"./nl.js":8448,"./nn":9031,"./nn.js":9031,"./oc-lnc":5174,"./oc-lnc.js":5174,"./pa-in":118,"./pa-in.js":118,"./pl":3448,"./pl.js":3448,"./pt":3518,"./pt-br":2447,"./pt-br.js":2447,"./pt.js":3518,"./ro":817,"./ro.js":817,"./ru":262,"./ru.js":262,"./sd":8990,"./sd.js":8990,"./se":3842,"./se.js":3842,"./si":7711,"./si.js":7711,"./sk":756,"./sk.js":756,"./sl":3772,"./sl.js":3772,"./sq":6187,"./sq.js":6187,"./sr":732,"./sr-cyrl":5713,"./sr-cyrl.js":5713,"./sr.js":732,"./ss":9455,"./ss.js":9455,"./sv":9770,"./sv.js":9770,"./sw":959,"./sw.js":959,"./ta":6459,"./ta.js":6459,"./te":5302,"./te.js":5302,"./tet":7975,"./tet.js":7975,"./tg":1294,"./tg.js":1294,"./th":2385,"./th.js":2385,"./tk":4613,"./tk.js":4613,"./tl-ph":8668,"./tl-ph.js":8668,"./tlh":8190,"./tlh.js":8190,"./tr":4506,"./tr.js":4506,"./tzl":3440,"./tzl.js":3440,"./tzm":9852,"./tzm-latn":2350,"./tzm-latn.js":2350,"./tzm.js":9852,"./ug-cn":730,"./ug-cn.js":730,"./uk":99,"./uk.js":99,"./ur":2100,"./ur.js":2100,"./uz":6002,"./uz-latn":6322,"./uz-latn.js":6322,"./uz.js":6002,"./vi":4207,"./vi.js":4207,"./x-pseudo":4674,"./x-pseudo.js":4674,"./yo":570,"./yo.js":570,"./zh-cn":3644,"./zh-cn.js":3644,"./zh-hk":2591,"./zh-hk.js":2591,"./zh-mo":9503,"./zh-mo.js":9503,"./zh-tw":8080,"./zh-tw.js":8080};function a(e){var t=n(e);return s(t)}function n(e){if(!s.o(o,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return o[e]}a.keys=function(){return Object.keys(o)},a.resolve=n,e.exports=a,a.id=6700},2344:function(e,t,s){"use strict";var o=s(9242),a=s(3396);function n(e,t,s,o,n,l){const i=(0,a.up)("NavBar"),r=(0,a.up)("router-view");return(0,a.wg)(),(0,a.iD)(a.HY,null,[l.loggedIn?((0,a.wg)(),(0,a.j4)(i,{key:0})):(0,a.kq)("",!0),(0,a.Wm)(r)],64)}var l=s(7139);const i=e=>((0,a.dD)("data-v-3240a51c"),e=e(),(0,a.Cn)(),e),r={class:"navbar navbar-expand-md navbar-dark bg-dark sticky_navbar"},d=["src"],c={key:1,id:"display-name"},u={class:"navbar-nav"},m={class:"nav-item dropdown"},p={class:"dropdown-menu"},h={class:"nav-item"},g={class:"nav-item dropdown"},f={class:"dropdown-menu"},b={class:"nav-item dropdown"},w={class:"dropdown-menu"},_={id:"logout"},y={key:0,class:"justify-content-center d-flex"},k={class:"alert alert-primary fade show w-50 p-2 m-3 d-flex justify-content-center login-alert position-absolute",role:"alert"},v={class:"flex-grow-1"},j=i((()=>(0,a._)("button",{type:"button",class:"btn-close py-1","data-bs-dismiss":"alert","aria-label":"Close"},null,-1)));function P(e,t,s,o,n,i){const P=(0,a.up)("router-link");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("nav",r,[(0,a.Wm)(P,{to:"/settings#profile",class:"user-info"},{default:(0,a.w5)((()=>[(0,a._)("div",null,[e.user?((0,a.wg)(),(0,a.iD)("img",{key:0,id:"profile-picture",class:"circle",src:i.getAuthorPropertyIfDefined("profileImage"),alt:"User profile picture"},null,8,d)):(0,a.kq)("",!0),e.user?((0,a.wg)(),(0,a.iD)("span",c,"@"+(0,l.zw)(i.getAuthorPropertyIfDefined("displayName")),1)):(0,a.kq)("",!0)])])),_:1}),(0,a._)("ul",u,[(0,a._)("li",m,[(0,a.Wm)(P,{to:{name:"homepage"},class:"nav-link"},{default:(0,a.w5)((()=>[(0,a.Uk)("Home")])),_:1}),(0,a._)("ul",p,[(0,a.Wm)(P,{to:"/home/inbox",class:"dropdown-item"},{default:(0,a.w5)((()=>[(0,a.Uk)(" Inbox ")])),_:1}),(0,a.Wm)(P,{to:{name:"manageposts"},class:"dropdown-item"},{default:(0,a.w5)((()=>[(0,a.Uk)(" Manage Posts ")])),_:1})])]),(0,a._)("li",h,[(0,a.Wm)(P,{to:{name:"browsepage"},class:"nav-link"},{default:(0,a.w5)((()=>[(0,a.Uk)(" Browse ")])),_:1})]),(0,a._)("li",g,[(0,a.Wm)(P,{to:"/social",class:"nav-link"},{default:(0,a.w5)((()=>[(0,a.Uk)(" Social ")])),_:1}),(0,a._)("ul",f,[(0,a.Wm)(P,{to:{name:"SocialPage",hash:"#requests"},class:"dropdown-item"},{default:(0,a.w5)((()=>[(0,a.Uk)("Requests")])),_:1}),(0,a.Wm)(P,{to:{name:"SocialPage",hash:"#friends"},class:"dropdown-item"},{default:(0,a.w5)((()=>[(0,a.Uk)("Friends")])),_:1}),(0,a.Wm)(P,{to:{name:"SocialPage",hash:"#followers"},class:"dropdown-item"},{default:(0,a.w5)((()=>[(0,a.Uk)("Followers")])),_:1}),(0,a.Wm)(P,{to:{name:"SocialPage",hash:"#followees"},class:"dropdown-item"},{default:(0,a.w5)((()=>[(0,a.Uk)("Followees")])),_:1})])]),(0,a._)("li",b,[(0,a.Wm)(P,{to:"/Settings",class:"nav-link"},{default:(0,a.w5)((()=>[(0,a.Uk)(" Settings ")])),_:1}),(0,a._)("ul",w,[(0,a.Wm)(P,{to:"/settings#profile",class:"dropdown-item"},{default:(0,a.w5)((()=>[(0,a.Uk)("Profile")])),_:1}),(0,a.Wm)(P,{to:"/settings#preferences",class:"dropdown-item"},{default:(0,a.w5)((()=>[(0,a.Uk)("Preferences")])),_:1})])])]),(0,a._)("span",_,[(0,a._)("button",{class:"btn btn-primary",onClick:t[0]||(t[0]=(...e)=>i.logout&&i.logout(...e))},"Log out")])]),i.alreadyLoggedIn?((0,a.wg)(),(0,a.iD)("div",y,[(0,a._)("div",k,[(0,a._)("div",v,[(0,a.Uk)("You are already logged in. To switch accounts, please "),(0,a._)("a",{onClick:t[1]||(t[1]=(...e)=>i.logout&&i.logout(...e)),href:"#",class:"alert-link"},"logÂ out"),(0,a.Uk)(".")]),j])])):(0,a.kq)("",!0)],64)}s(7658);var C=s(2578);const U=(0,C.Q_)("token",{state:()=>({token:"",isAuthenticated:!1}),actions:{initializeStore(){localStorage.getItem("token")?(this.token=localStorage.getItem("token"),this.isAuthenticated=!0):(this.token="",this.isAuthenticated=!1)},setToken(e){this.token=e,this.isAuthenticated=!0},removeToken(){this.token="",this.isAuthenticated=!1}}}),D=(0,C.Q_)("user",{state:()=>({user:{}}),actions:{initializeStore(){localStorage.getItem("user")?this.user=JSON.parse(localStorage.getItem("user")):this.user={}},setUser(e){console.assert("object"===typeof e,"user must be an object"),this.user=e,localStorage.setItem("user",JSON.stringify(e))},removeUser(){this.user={},localStorage.removeItem("user")},getUser(){return this.initializeStore(),this.user}}});var S=s(4161),x={name:"NavBar",beforeMount(){this.userStore.initializeStore()},methods:{logout(){S.Z.post("token/logout").then((e=>{console.log(e);const t=this.tokenStore;t.removeToken(),localStorage.removeItem("token"),localStorage.removeItem("user"),D().removeUser(),this.$router.push("/login"),S.Z.defaults.headers.common.Authorization=""})).catch((e=>{console.log(e)}))},getAuthorPropertyIfDefined(e){return this.userStore.user.author?this.userStore.user.author[e]:""}},computed:{...(0,C.Kc)(U,D),...(0,C.rn)(D,["user"]),alreadyLoggedIn(){const e="undefined"!==typeof this.$route&&null!==this.$route;return!(!e||!("hash"in this.$route))&&"#loggedin"===this.$route.hash}}},F=s(89);const M=(0,F.Z)(x,[["render",P],["__scopeId","data-v-3240a51c"]]);var I=M,T={name:"App",beforeCreate(){const e=U();e.initializeStore();const t=e.token;S.Z.defaults.headers.common.Authorization=t?`Token ${t}`:"null"},components:{NavBar:I},computed:{loggedIn(){return"login"!==this.$route.name&&"signup"!==this.$route.name}}};const z=(0,F.Z)(T,[["render",n]]);var q=z,N=s(2483);const $=e=>((0,a.dD)("data-v-78c784e4"),e=e(),(0,a.Cn)(),e),Z={class:"manage-posts"},A=$((()=>(0,a._)("h1",null,[(0,a.Uk)("Manage "),(0,a._)("strong",null,"Posts")],-1))),L={class:"list-wrapper"},E={class:"card-list"},R=$((()=>(0,a._)("span",{class:"footer-totality"},[(0,a._)("button",{type:"button",class:"edit-button btn","data-bs-toggle":"modal","data-bs-target":"#managePost"},[(0,a._)("i",{class:"bi bi-pencil-square"})]),(0,a._)("span",{class:"divider"}),(0,a._)("button",{type:"button",class:"delete-button btn","data-bs-toggle":"modal","data-bs-target":"#deletePrompt"},[(0,a._)("i",{class:"bi bi-trash3-fill"})])],-1))),Y={key:0},B=$((()=>(0,a._)("br",{class:"d-none"},null,-1)));function W(e,t,s,o,n,i){const r=(0,a.up)("Card"),d=(0,a.up)("ManagePostModal"),c=(0,a.up)("SlotModal");return(0,a.wg)(),(0,a.iD)("div",Z,[A,(0,a._)("button",{type:"button",class:"add-button btn btn-primary float-start","data-bs-toggle":"modal","data-bs-target":"#managePost",onMouseenter:t[0]||(t[0]=e=>n.selected={post:null,index:-1})}," Make A New Post ",32),(0,a._)("div",L,[(0,a._)("div",E,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.posts,((e,t)=>((0,a.wg)(),(0,a.j4)(r,{key:e.id,post:e,author:n.author,onMousedown:s=>n.selected={post:e,index:t}},{footer:(0,a.w5)((()=>[R])),_:2},1032,["post","author","onMousedown"])))),128)),0===n.posts.length?((0,a.wg)(),(0,a.iD)("div",Y,"You haven't made any posts yet!")):(0,a.kq)("",!0)])]),(0,a.Wm)(d,{existingPost:n.selected.post,onEditPost:t[1]||(t[1]=e=>i.editPost(e)),onCreatePost:t[2]||(t[2]=e=>i.createPost(e))},null,8,["existingPost"]),n.selected.post?((0,a.wg)(),(0,a.j4)(c,{key:0,"modal-name":"deletePrompt"},{titleText:(0,a.w5)((()=>[(0,a.Uk)("Delete "),(0,a._)("strong",null,(0,l.zw)(n.selected.post.title),1)])),body:(0,a.w5)((()=>[(0,a.Uk)("Are you sure you want to delete this post?")])),closeButtonText:(0,a.w5)((()=>[(0,a.Uk)(" No! Take me back! ")])),submitButton:(0,a.w5)((()=>[(0,a._)("button",{type:"submit",class:"btn btn-danger","data-bs-dismiss":"modal",onClick:t[3]||(t[3]=e=>i.delPost())},"Yes, I'm sure")])),openModalButton:(0,a.w5)((()=>[B])),_:1})):(0,a.kq)("",!0)])}s(541);const O=e=>((0,a.dD)("data-v-06b5b456"),e=e(),(0,a.Cn)(),e),V={id:"card-totality"},H={class:"post-title"},K={class:"title-text"},G=O((()=>(0,a._)("div",{class:"decoration-accent"},null,-1))),J=["src","alt"],Q=["src","alt"],X={key:0,id:"username"};function ee(e,t,s,o,n,i){const r=(0,a.up)("vue-markdown");return(0,a.wg)(),(0,a.iD)("div",V,[(0,a._)("div",H,[(0,a._)("h3",K,(0,l.zw)(s.post.title),1)]),(0,a._)("div",{class:"card-body card",onMouseover:t[1]||(t[1]=e=>n.hovered=!0),onMouseleave:t[2]||(t[2]=e=>n.hovered=!1)},[(0,a._)("div",{class:"content-container",onClick:t[0]||(t[0]=(...e)=>i.goTo&&i.goTo(...e))},[G,(0,a._)("div",{class:(0,l.C_)(["scrim",{open:n.hovered}])},null,2),i.markdownEnabled?((0,a.wg)(),(0,a.j4)(r,{key:0,class:(0,l.C_)(["text-content",{singleton:i.isSingleton}]),source:s.post.content},null,8,["class","source"])):s.post.content?((0,a.wg)(),(0,a.iD)("p",{key:1,class:(0,l.C_)(["text-content",{singleton:i.isSingleton}])},(0,l.zw)(s.post.content),3)):(0,a.kq)("",!0),s.post.image?((0,a.wg)(),(0,a.iD)("img",{key:2,class:(0,l.C_)(["image-content",{singleton:i.isSingleton}]),src:i.imageURL,alt:s.post.description},null,10,J)):(0,a.kq)("",!0)]),(0,a._)("div",{class:(0,l.C_)([{open:n.hovered},"footer card-footer text-muted"])},[(0,a.WI)(e.$slots,"footer",{class:(0,l.C_)({open:n.hovered})},(()=>[(0,a._)("img",{class:(0,l.C_)(["profile-image",{open:n.hovered}]),src:s.author.profileImage,alt:s.author.profileName},null,10,Q),n.hovered?((0,a.wg)(),(0,a.iD)("h6",X," @"+(0,l.zw)(s.author.displayName),1)):(0,a.kq)("",!0)]),!0)],2)],32)])}var te=s(4893),se={components:{VueMarkdown:te.Z},props:["author","post"],data(){return{hovered:!1}},computed:{markdownEnabled(){return this.post.contentType.includes("text/markdown")},imageURL(){return`https://social-t30.herokuapp.com/api/authors/${this.author._id}/posts/${this.post._id}/image`},isSingleton(){return!!this.post.image&&!this.post.content||!this.post.image&&!!this.post.content}},methods:{goTo(){this.$router.push({name:"postpage",params:{aid:this.author._id,pid:this.post._id}})}}};const oe=(0,F.Z)(se,[["render",ee],["__scopeId","data-v-06b5b456"]]);var ae=oe;const ne=["id","aria-labelledby"],le={class:"modal-content"},ie={class:"modal-header"},re=["id"],de={class:"modal-body text-start"},ce={class:"modal-footer"},ue=["data-bs-target"];function me(e,t,s,n,i,r){return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("div",{class:(0,l.C_)(["modal fade",s.sizing]),tabindex:"-1",id:this.modalName,ref:this.modalName,"aria-labelledby":this.modalName+"Label","aria-hidden":"true"},[(0,a._)("div",{class:(0,l.C_)(["modal-dialog",s.justification])},[(0,a._)("div",le,[(0,a._)("div",ie,[(0,a._)("h5",{class:"modal-title",id:this.modalName+"Label"},[(0,a.WI)(e.$slots,"titleText",{},(()=>[(0,a.Uk)("Modal title")]))],8,re),(0,a._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:t[0]||(t[0]=(...e)=>r.clearFields&&r.clearFields(...e)),ref:"closeModalButton"},null,512)]),(0,a._)("div",de,[(0,a.wy)((0,a._)("div",{class:"alert alert-danger"},(0,l.zw)(i.errorMsg),513),[[o.F8,i.errorMsg]]),(0,a.WI)(e.$slots,"body",{submitMethod:r.submitForm})]),(0,a._)("div",ce,[(0,a._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal",onClick:t[1]||(t[1]=(...e)=>r.clearFields&&r.clearFields(...e))},[(0,a.WI)(e.$slots,"closeButtonText",{},(()=>[(0,a.Uk)("Close")]))]),(0,a.WI)(e.$slots,"submitButton")])])],2)],10,ne),(0,a.WI)(e.$slots,"openModalButton",{},(()=>[(0,a._)("button",{type:"button",class:"btn btn-primary","data-bs-toggle":"modal","data-bs-target":"#"+this.modalName}," Open modal ",8,ue)]))],64)}var pe={name:"SlotModal",emits:["alert","submitMyForm","clearFields"],props:{modalName:String,sizing:{default:null,type:String},justification:{default:null,type:String}},data(){return{errorMsg:""}},methods:{submitForm(e){console.log("submitting form"),this.$emit("submitMyForm",{done:()=>{this.clearFields(),this.errorMsg="",this.closeModal()},e:e=>{this.errorMsg=e}})},clearFields(){this.$emit("clearFields")},closeModal(){this.$refs.closeModalButton.click()}}};const he=(0,F.Z)(pe,[["render",me]]);var ge=he;const fe={class:"modal fade bd-example-modal-lg",ref:"managePost",id:"managePost",tabindex:"-1",role:"dialog","aria-labelledby":":3","aria-hidden":"true"},be={class:"modal-dialog modal-xl modal-dialog-centered"},we={class:"modal-content"},_e={class:"modal-header"},ye={class:"modal-title"},ke=(0,a._)("span",{"aria-hidden":"true"},null,-1),ve=[ke],je={class:"modal-body"},Pe={class:"form-group"},Ce=(0,a._)("label",{for:"post-title",class:"d-flex justify-content-left","aria-autocomplete":"off"},"Post Title",-1),Ue={class:"d-flex justify-content-center form-text text-muted"},De={class:"row"},Se={class:"col"},xe={class:"form-check form-check-inline"},Fe=(0,a._)("label",{for:"privacy-private",class:"form-check-label"},"Private",-1),Me={class:"form-check form-check-inline"},Ie=(0,a._)("label",{for:"privacy-friends",class:"form-check-label"},"Friends",-1),Te={class:"form-check form-check-inline"},ze=(0,a._)("label",{for:"privacy-public",class:"form-check-label"},"Public",-1),qe={class:"col"},Ne={class:"form-check form-switch d-flex justify-content-center gap-3 mb-2"},$e=(0,a._)("label",{class:"form-check-label",for:"markdown-toggle"},[(0,a._)("i",{class:"bi-markdown-fill"}),(0,a.Uk)(" Use Markdown ")],-1),Ze={class:"modal-footer"},Ae={key:0,class:"error-container"},Le=(0,a._)("i",{class:"bi bi-send-fill"},null,-1);function Ee(e,t,s,n,i,r){const d=(0,a.up)("ImagePostBody");return(0,a.wg)(),(0,a.iD)("div",fe,[(0,a._)("div",be,[(0,a._)("div",we,[(0,a._)("div",_e,[(0,a._)("h5",ye,[(0,a.Uk)((0,l.zw)(r.modalTitleMode)+" ",1),(0,a._)("strong",null,(0,l.zw)(r.modalTitlePostName),1)]),(0,a._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal",ref:"Close","aria-label":"Close",onMousedown:t[0]||(t[0]=t=>e.$emit("dismiss"))},ve,544)]),(0,a._)("div",je,[(0,a._)("form",null,[(0,a._)("div",Pe,[Ce,(0,a.wy)((0,a._)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>i.post.title=e),type:"text",class:"form-control",id:"post-title","aria-describedby":"postTitle",placeholder:"Write a title for your post"},null,512),[[o.nr,i.post.title]]),(0,a._)("small",Ue,(0,l.zw)(i.post.title.length)+"/"+(0,l.zw)(r.titleMaxLength),1)]),(0,a._)("div",De,[(0,a._)("div",Se,[(0,a._)("div",xe,[(0,a.wy)((0,a._)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>i.post.visibility=e),id:"privacy-private",class:"form-check-input",type:"radio",value:"PRIVATE"},null,512),[[o.G2,i.post.visibility]]),Fe]),(0,a._)("div",Me,[(0,a.wy)((0,a._)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>i.post.visibility=e),id:"privacy-friends",class:"form-check-input",type:"radio",value:"FRIENDS"},null,512),[[o.G2,i.post.visibility]]),Ie]),(0,a._)("div",Te,[(0,a.wy)((0,a._)("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>i.post.visibility=e),id:"privacy-public",class:"form-check-input",type:"radio",value:"PUBLIC"},null,512),[[o.G2,i.post.visibility]]),ze])]),(0,a._)("div",qe,[(0,a._)("div",Ne,[(0,a.wy)((0,a._)("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>i.markDownEnabled=e),onChange:t[6]||(t[6]=(...e)=>r.setText&&r.setText(...e)),id:"markdown-toggle",class:"form-check-input pr-2",type:"checkbox"},null,544),[[o.e8,i.markDownEnabled]]),$e])])]),(0,a.wy)((0,a._)("textarea",{"onUpdate:modelValue":t[7]||(t[7]=e=>i.post.content=e),onInput:t[8]||(t[8]=(...e)=>r.setText&&r.setText(...e)),class:"text-input form-control",placeholder:"Give your post some body text"},null,544),[[o.nr,i.post.content]]),(0,a.Wm)(d,{class:"image-upload",image:r.imageDataURL,onImageUploaded:t[9]||(t[9]=e=>r.setImage(e)),onImageClear:t[10]||(t[10]=e=>r.setImage(null))},null,8,["image"]),(0,a.wy)((0,a._)("input",{"onUpdate:modelValue":t[11]||(t[11]=e=>i.post.description=e),class:"text-input form-control mb-3",placeholder:"Write an (optional) description here"},null,512),[[o.nr,i.post.description]]),(0,a._)("div",Ze,[i.invalidSubmit?((0,a.wg)(),(0,a.iD)("div",Ae,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(r.errors,(e=>((0,a.wg)(),(0,a.iD)("small",{key:e,class:(0,l.C_)(["error-message text-danger",{visible:i.invalidSubmit}])},(0,l.zw)(e+" "),3)))),128))])):(0,a.kq)("",!0),(0,a._)("button",{type:"button",class:"btn btn-outline-primary",onMousedown:t[12]||(t[12]=(...e)=>r.submitPost&&r.submitPost(...e))},[(0,a.Uk)("Post "),Le],32)])])])])])],512)}s(2801),s(1295);const Re=e=>((0,a.dD)("data-v-348076fb"),e=e(),(0,a.Cn)(),e),Ye={id:"makeImagePostBody"},Be={key:0,class:"image-upload-wrapper image-container"},We=Re((()=>(0,a._)("i",{class:"bi bi-upload"},null,-1))),Oe=Re((()=>(0,a._)("small",null,"Upload an image",-1))),Ve=[We,Oe],He={key:1,class:"image-container"},Ke=["src"],Ge=Re((()=>(0,a._)("i",{class:"bi bi-x"},null,-1))),Je=[Ge];function Qe(e,t,s,o,n,i){return(0,a.wg)(),(0,a.iD)("div",Ye,[i.imageUploaded?((0,a.wg)(),(0,a.iD)("div",He,[(0,a._)("img",{class:"image-upload img-fluid",src:n.imageSrc},null,8,Ke),(0,a._)("button",{type:"button",class:"btn image-cancel",onClick:t[3]||(t[3]=(...e)=>i.clearImage&&i.clearImage(...e))},Je)])):((0,a.wg)(),(0,a.iD)("div",Be,[(0,a._)("div",{class:(0,l.C_)(["wrapper-text",{hovered:n.hovered}])},Ve,2),(0,a._)("input",{type:"file",accept:"image/jpeg,image/png",class:"image-container form-control",onMouseenter:t[0]||(t[0]=e=>n.hovered=!0),onMouseleave:t[1]||(t[1]=e=>n.hovered=!1),onChange:t[2]||(t[2]=e=>i.encodeFileBase64(e.target.files[0]))},null,32)]))])}var Xe={props:["image"],emits:["image-uploaded","image-clear"],data(){return{imageSrc:null,hovered:!1}},computed:{imageUploaded(){return null!==this.imageSrc},imageEncoded(){return this.imageUploaded?this.imageSrc.replace("data:","").replace(/^.+,/,""):null},imageMime(){return this.imageUploaded?this.imageSrc.replace("data:","").match(/^.+,/)[0].replace(",",""):null}},watch:{image:{immediate:!0,handler(e){this.imageSrc=e}}},methods:{encodeFileBase64(e){console.log(e),this.blobToBase64(e)},encodeURLBase64(e){S.Z.get(e,{responseType:"blob"}).then((e=>{console.log("Got blob!"),this.blobToBase64(e.data)})).catch((e=>{this.imageSrc=null,console.log("The image provided from server couldn't be loaded"),console.log(e)}))},blobToBase64(e){const t=new FileReader;t.onloadend=()=>{this.imageSrc=t.result,this.emitImageStatus()},t.readAsDataURL(e)},clearImage(){this.$emit("imageClear"),this.imageSrc=null},emitImageStatus(){this.$emit("imageUploaded",{source:this.imageSrc,mime:this.imageMime,raw64:this.imageEncoded})}}};const et=(0,F.Z)(Xe,[["render",Qe],["__scopeId","data-v-348076fb"]]);var tt=et,st={components:{ImagePostBody:tt},props:["existingPost"],emits:["createPost","editPost","dismiss"],data(){return{post:null,markDownEnabled:!1,invalidSubmit:!1}},computed:{modalTitleMode(){return this.existingPost?"Edit":"Make a"},modalTitlePostName(){return this.existingPost?this.existingPost.title:"New Post"},titleMaxLength(){return 30},errors(){const e=[];return(this.post.title.length>this.titleMaxLength||0===this.post.title.length)&&e.push("Your post needs a title between 1 and 30 characters!"),this.post.image||this.post.content||e.push("You need text and/or image content!"),e},imageDataURL(){if(this.existingPost&&this.post.image){const e=this.post.contentType.find((e=>e.includes("image")));return String.raw`data:${e},${this.post.image}`}return null}},created(){this.post=this.getTemplate()},mounted(){const e=this.$refs.managePost;e.addEventListener("show.bs.modal",(()=>{this.existingPost?(this.post=structuredClone(this.existingPost),this.post.contentType=this.post.contentType.split(","),this.post.contentType.includes("text/markdown")&&(this.markDownEnabled=!0)):this.post=this.getTemplate()})),e.addEventListener("hidden.bs.modal",(()=>{this.post=this.getTemplate()}))},methods:{setText(){this.sanitizeContentTypes("text"),this.appendMime(this.markDownEnabled?"text/markdown":"text/plain")},setImage(e){this.sanitizeContentTypes("image"),e?(this.post.image=e.raw64,this.appendMime(e.mime)):this.post.image=null},getTemplate(){return{type:"post",title:"",source:"http://placeholderurlfornow.yummy/",origin:"http://anotherplaceholderurlfornow.yucky/",description:"",contentType:[],content:"",image:null,count:0,unlisted:!1,visibility:"PUBLIC",author:this.author,comments:null,id:null,_id:null,published:"2023-03-01T21:18:38.908794Z"}},appendMime(e){this.sanitizeContentTypes(e),e&&this.post.contentType.push(e)},sanitizeContentTypes(e){this.post.contentType=this.post.contentType.filter((t=>!t.includes(e)))},submitPost(){console.log("emittting!"),0===this.errors.length?(this.post.contentType=this.post.contentType.toString(),console.table(this.post),this.$refs.Close.click(),this.existingPost?(this.$emit("editPost",this.post),this.$emit("dismiss")):(this.$emit("createPost",this.post),this.$emit("dismiss"))):this.invalidSubmit=!0}}};const ot=(0,F.Z)(st,[["render",Ee]]);var at=ot,nt=s(536),lt={components:{ManagePostModal:at,Card:ae,SlotModal:ge},data(){return{posts:[],selected:{post:null,index:-1},showPrompt:!1,author:null}},computed:{...(0,C.Kc)(D),udEndPoint(){if(this.selected.post){const e="/authors/"+this.author._id+"/posts/"+this.selected.post._id+"/";return e}return null},crEndPoint(){const e="/authors/"+this.author._id+"/posts/";return e}},methods:{getAuthorFromStore(){const e=this.userStore;e.initializeStore(),this.author=e.user.author},createPost(e){e.author=this.author,e._id=(0,nt.Z)(),e.id=this.author.id+"/posts/"+e._id,e.comments=e.id+"/comments",console.log(e),S.Z.post(this.crEndPoint,e).then((()=>{this.posts.unshift(e)})).catch((()=>{alert("Couldn't add the post!")})),this.showManage=!1},getPosts(){S.Z.get(this.crEndPoint).then((e=>{this.posts=e.data})).catch((()=>{alert("Couldn't get any posts!")}))},editPost(e){S.Z.post(this.udEndPoint,e).then((()=>{this.posts[this.selected.index]=e})).catch((()=>{alert("Couldn't edit the post!")})),this.showManage=!1},delPost(){S.Z["delete"](this.udEndPoint).then((()=>{this.posts.splice(this.selected.index,1)})).catch((()=>{alert("Couldn't delete the post!")}))}},mounted(){this.getAuthorFromStore(),this.getPosts()}};const it=(0,F.Z)(lt,[["render",W],["__scopeId","data-v-78c784e4"]]);var rt=it;const dt={class:"home"},ct=(0,a._)("p",null,"This is the homepage",-1),ut=[ct];function mt(e,t,s,o,n,l){return(0,a.wg)(),(0,a.iD)("div",dt,ut)}var pt={name:"HomePage"};const ht=(0,F.Z)(pt,[["render",mt]]);var gt=ht;const ft=e=>((0,a.dD)("data-v-18b7191a"),e=e(),(0,a.Cn)(),e),bt={class:"browse-posts"},wt=ft((()=>(0,a._)("h1",{class:"text-left"},[(0,a.Uk)("Browse "),(0,a._)("strong",null,"Posts")],-1))),_t={class:"filetypes d-flex justify-content-center"},yt=ft((()=>(0,a._)("i",{class:"bi bi-blockquote-left d-block"},null,-1))),kt=ft((()=>(0,a._)("i",{class:"bi bi-markdown-fill d-block"},null,-1))),vt=ft((()=>(0,a._)("i",{class:"bi bi-image-fill d-block"},null,-1))),jt={class:"reverse d-flex justify-content-center mt-3"},Pt=ft((()=>(0,a._)("i",{class:"bi bi-calendar"},null,-1))),Ct=ft((()=>(0,a._)("button",{type:"button",class:"btn btn-outline-primary open-filter-modal d-flex justify-self-start","data-bs-toggle":"modal","data-bs-target":"#filterModal"},[(0,a._)("i",{class:"bi bi-funnel-fill"}),(0,a.Uk)(" Filter Posts")],-1))),Ut={key:1,class:"all-posts"},Dt={class:"text-primary mx-5 px-2"},St=ft((()=>(0,a._)("hr",{class:"date-header bg-secondary"},null,-1))),xt={class:"card-list pb-5"};function Ft(e,t,s,o,n,i){const r=(0,a.up)("SlotModal"),d=(0,a.up)("Card");return(0,a.wg)(),(0,a.iD)("div",bt,[wt,n.loading?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(r,{key:0,"modal-name":"filterModal"},{titleText:(0,a.w5)((()=>[(0,a.Uk)("Filter Posts")])),body:(0,a.w5)((()=>[(0,a._)("div",_t,[(0,a._)("button",{onClick:t[0]||(t[0]=e=>i.toggle("plain")),class:(0,l.C_)(["btn mx-2 filter-button",n.active.plain?"btn-primary":"btn-outline-secondary"])},[yt,(0,a.Uk)(" Plaintext ")],2),(0,a._)("button",{onClick:t[1]||(t[1]=e=>i.toggle("markdown")),class:(0,l.C_)(["btn mx-2 filter-button",n.active.markdown?"btn-primary":"btn-outline-secondary"])},[kt,(0,a.Uk)(" Markdown ")],2),(0,a._)("button",{onClick:t[2]||(t[2]=e=>i.toggle("image")),class:(0,l.C_)(["btn mx-2 filter-button",n.active.image?"btn-primary":"btn-outline-secondary"])},[vt,(0,a.Uk)(" Image ")],2)]),(0,a._)("div",jt,[(0,a._)("button",{onClick:t[3]||(t[3]=(...e)=>i.reversePosts&&i.reversePosts(...e)),class:"btn btrn primary"},[Pt,(0,a._)("i",{class:(0,l.C_)(["bi",n.reverse?"bi-arrow-up":"bi-arrow-down"])},null,2)])])])),closeButtonText:(0,a.w5)((()=>[(0,a.Uk)("Done")])),openModalButton:(0,a.w5)((()=>[Ct])),_:1})),n.loading?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",Ut,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(Object.entries(i.postSections),(([e,t])=>((0,a.wg)(),(0,a.iD)("div",{key:e},[(0,a._)("h3",Dt,(0,l.zw)(e===i.today?"Today":e),1),St,(0,a._)("div",xt,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(t,(e=>((0,a.wg)(),(0,a.j4)(d,{key:e.id,author:e.author,post:e},null,8,["author","post"])))),128))])])))),128))]))])}var Mt=s(6797),It=s.n(Mt);const Tt="YYYY-MM-DD";var zt={name:"BrowsePage",components:{Card:ae,SlotModal:ge},data(){return{allPosts:[],author:null,loading:!0,active:{plain:!0,markdown:!0,image:!0},reverse:!1}},computed:{...(0,C.Kc)(D),postSections(){const e=this.groupPostsByDate(this.filteredPosts);return e},today(){return It()().format(Tt)},filteredPosts(){return this.allPosts.filter((e=>this.matchesActive(e)))}},methods:{toggle(e){this.active[e]=!this.active[e]},reversePosts(){this.reverse=!this.reverse,this.allPosts=this.allPosts.reverse()},matchesActive(e){for(const[t,s]of Object.entries(this.active))if(!s&&e.contentType.includes(t))return!1;return!0},getPosts(){S.Z.request({baseURL:"https://socialdistcmput404.herokuapp.com/api",url:"posts",headers:{Authorization:"Token d960c3dee9855f5f5df8207ce1cba7fc1876fedf"}}).then((e=>{this.allPosts=e.data,this.loading=!1})).catch((e=>{console.log(e)}))},getAuthorFromStore(){const e=this.userStore;e.initializeStore(),this.author=e.user.author},groupPostsByDate(e){return e.reduce(((e,t)=>{const s=It()(t.published).format(Tt),o=e[s]??[];return{...e,[s]:[...o,t]}}),{})}},mounted(){this.getAuthorFromStore(),this.getPosts()}};const qt=(0,F.Z)(zt,[["render",Ft],["__scopeId","data-v-18b7191a"]]);var Nt=qt;const $t={class:"d-flex min-vh-100"},Zt={class:"form-group authForm"},At=(0,a._)("h1",null,"Login",-1),Lt={key:0,class:"alert alert-danger",role:"alert"},Et={class:"input-group mb-3"},Rt=(0,a._)("div",{class:"input-group-prepend"},[(0,a._)("span",{class:"input-group-text",id:"username-icon"},"ð¤")],-1),Yt={class:"input-group mb-3"},Bt=(0,a._)("div",{class:"input-group-prepend"},[(0,a._)("span",{class:"input-group-text",id:"password-icon"},"ð")],-1),Wt=(0,a._)("button",{class:"btn btn-primary",type:"submit"},"Login",-1),Ot=(0,a._)("br",null,null,-1);function Vt(e,t,s,n,i,r){const d=(0,a.up)("router-link");return(0,a.wg)(),(0,a.iD)("div",$t,[(0,a._)("div",Zt,[At,(0,a._)("form",{onSubmit:t[2]||(t[2]=(0,o.iM)(((...e)=>r.submitForm&&r.submitForm(...e)),["prevent"]))},[i.authError?((0,a.wg)(),(0,a.iD)("div",Lt,(0,l.zw)(i.authError),1)):(0,a.kq)("",!0),(0,a._)("div",Et,[Rt,(0,a.wy)((0,a._)("input",{class:"form-control",type:"text",name:"username","onUpdate:modelValue":t[0]||(t[0]=e=>i.username=e),placeholder:"Username"},null,512),[[o.nr,i.username]])]),(0,a._)("div",Yt,[Bt,(0,a.wy)((0,a._)("input",{class:"form-control",type:"password",name:"password","onUpdate:modelValue":t[1]||(t[1]=e=>i.password=e),placeholder:"Password"},null,512),[[o.nr,i.password]])]),Wt],32),Ot,(0,a.Uk)("Don't have an account? "),(0,a.Wm)(d,{to:"/signup"},{default:(0,a.w5)((()=>[(0,a.Uk)("Sign up")])),_:1})])])}function Ht(e,t){if("response"in e){const s=e.response;if(400===s.status){const e=s.data,o=Object.keys(e).reduce(((s,o)=>s.concat(t[o]+": "+e[o].join("\n"))),[]);return o.join("\n\n")}return s.statusText}return e.message}var Kt={name:"LogIn",data(){return{username:"",password:"",authError:""}},methods:{submitForm(e){const t={username:this.username,password:this.password};null!==localStorage.getItem("token")&&(localStorage.removeItem("token"),console.log("Removed existing token")),S.Z.post("token/login",t).then((e=>{console.log(e);const t=e.data.auth_token,s=U();s.setToken(t),S.Z.defaults.headers.common.Authorization=`Token ${t}`,localStorage.setItem("token",t),S.Z.get("users/me").then((e=>{this.authError="";const t=e.data,s=this.userStore;s.setUser(t)})).catch((e=>{console.log(e)})),this.$router.push("/home")})).catch((e=>{console.log(e);const t={username:"Username",password:"Password",non_field_errors:"Error"},s=Ht(e,t);this.authError=s}))}},computed:{...(0,C.Kc)(U,D)}};const Gt=(0,F.Z)(Kt,[["render",Vt]]);var Jt=Gt;const Qt={class:"d-flex min-vh-100"},Xt={class:"form-group authForm"},es=(0,a._)("h1",null,"Sign Up",-1),ts={key:0,class:"alert alert-danger",role:"alert"},ss={class:"input-group mb-3"},os=(0,a._)("div",{class:"input-group-prepend"},[(0,a._)("span",{class:"input-group-text",id:"username-icon"},"ð¤")],-1),as={class:"input-group mb-3"},ns=(0,a._)("div",{class:"input-group-prepend"},[(0,a._)("span",{class:"input-group-text",id:"password-icon"},"ð")],-1),ls={class:"input-group mb-3"},is=(0,a._)("div",{class:"input-group-prepend"},[(0,a._)("span",{class:"input-group-text",id:"password-icon"},"ð")],-1),rs=(0,a._)("button",{class:"btn btn-primary",type:"submit"},"Sign Up",-1),ds=(0,a._)("br",null,null,-1);function cs(e,t,s,n,i,r){const d=(0,a.up)("router-link");return(0,a.wg)(),(0,a.iD)("div",Qt,[(0,a._)("div",Xt,[es,(0,a._)("form",{onSubmit:t[3]||(t[3]=(0,o.iM)(((...e)=>r.submitForm&&r.submitForm(...e)),["prevent"]))},[i.authError?((0,a.wg)(),(0,a.iD)("div",ts,(0,l.zw)(i.authError),1)):(0,a.kq)("",!0),(0,a._)("div",ss,[os,(0,a.wy)((0,a._)("input",{class:"form-control",type:"text",name:"username","onUpdate:modelValue":t[0]||(t[0]=e=>i.username=e),placeholder:"Username"},null,512),[[o.nr,i.username]])]),(0,a._)("div",as,[ns,(0,a.wy)((0,a._)("input",{class:"form-control",type:"password",name:"password","onUpdate:modelValue":t[1]||(t[1]=e=>i.password=e),placeholder:"Password"},null,512),[[o.nr,i.password]])]),(0,a._)("div",ls,[is,(0,a.wy)((0,a._)("input",{class:"form-control",type:"password",name:"password","onUpdate:modelValue":t[2]||(t[2]=e=>i.confirmPassword=e),placeholder:"Confirm password"},null,512),[[o.nr,i.confirmPassword]])]),rs],32),ds,(0,a.Uk)("Already have an account? "),(0,a.Wm)(d,{to:"/login"},{default:(0,a.w5)((()=>[(0,a.Uk)("Log in")])),_:1})])])}var us={name:"sign-up",data(){return{username:"",password:"",confirmPassword:"",authError:""}},methods:{submitForm(e){const t={username:this.username,password:this.password};this.password!==this.confirmPassword?(this.authError="Passwords do not match.",this.password="",this.confirmPassword=""):(null!==localStorage.getItem("token")&&(localStorage.removeItem("token"),console.log("Removed existing token")),S.Z.post("/users/",t).then((e=>{this.$router.push("/login"),console.log(e)})).catch((e=>{console.log(e);const t={username:"Username",password:"Password",non_field_errors:"Error"},s=Ht(e,t);this.authError=s})))}}};const ms=(0,F.Z)(us,[["render",cs]]);var ps=ms;const hs={class:"social"};function gs(e,t,s,o,n,l){const i=(0,a.up)("MyRequests"),r=(0,a.up)("MyFriends"),d=(0,a.up)("MyFollowers"),c=(0,a.up)("MyFollowees");return(0,a.wg)(),(0,a.iD)("div",hs,[(0,a.Wm)(i,{onUpdateFollowers:l.updateFollowers},{default:(0,a.w5)((()=>[(0,a.Uk)("Test Requests")])),_:1},8,["onUpdateFollowers"]),(0,a.Wm)(r,{ref:"friends"},{default:(0,a.w5)((()=>[(0,a.Uk)("Test Friends")])),_:1},512),(0,a.Wm)(d,{ref:"followers"},{default:(0,a.w5)((()=>[(0,a.Uk)("Test Followers")])),_:1},512),(0,a.Wm)(c,null,{default:(0,a.w5)((()=>[(0,a.Uk)("Test Followees")])),_:1})])}const fs={class:"list-of-profiles",id:"friends"},bs=(0,a._)("h1",null,[(0,a.Uk)(" Your "),(0,a._)("br"),(0,a.Uk)(" Friends")],-1),ws=["src"];function _s(e,t,s,o,n,i){return(0,a.wg)(),(0,a.iD)("div",fs,[bs,(0,a._)("ul",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.friends.items,(e=>((0,a.wg)(),(0,a.iD)("li",{key:e.url},[e?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[(0,a._)("img",{src:e.profileImage},null,8,ws),(0,a._)("p",null,(0,l.zw)(i.displayUsername(e.displayName)),1)],64)):(0,a.kq)("",!0)])))),128))])])}var ys={data(){return{friends:[""],author:null}},computed:{...(0,C.Kc)(D)},methods:{displayUsername(e){return"@"+e},getAuthorFromStore(){const e=this.userStore;e.initializeStore(),this.author=e.user.author},getFriends(){S.Z.get(`/authors/${this.author._id}/friends/`).then((e=>{this.friends=e.data,console.log(this.friends)})).catch((e=>{console.log("Couldn't get friends!"),console.log(e)}))}},mounted(){this.getAuthorFromStore(),this.getFriends()}};const ks=(0,F.Z)(ys,[["render",_s]]);var vs=ks;const js={class:"list-of-profiles",id:"requests"},Ps=(0,a._)("h1",null,[(0,a.Uk)(" Your "),(0,a._)("br"),(0,a.Uk)(" Requests")],-1),Cs=["src"],Us=["onClick"],Ds=["onClick"];function Ss(e,t,s,o,n,i){return(0,a.wg)(),(0,a.iD)("div",js,[Ps,(0,a._)("ul",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.requests,(e=>((0,a.wg)(),(0,a.iD)("li",{key:e.url},[e?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[(0,a._)("img",{src:e.actor.profileImage},null,8,Cs),(0,a._)("p",null,(0,l.zw)(i.displayUsername(e.actor.displayName)),1),(0,a._)("span",null,[(0,a._)("button",{onClick:t=>i.handleRequest("Accepted",i.getIdFromUrl(e.actor.url)),id:"accept-button",class:"btn btn-success"},"Accept",8,Us),(0,a._)("button",{onClick:t=>i.handleRequest("Declined",i.getIdFromUrl(e.actor.url)),id:"decline-button",class:"btn btn-danger"},"Decline",8,Ds)])],64)):(0,a.kq)("",!0)])))),128))])])}var xs={emits:["updateFollowers"],data(){return{inbox:[""],requests:[""],actor:null,object:null,pendingRequests:[""],updatedRequests:[""],followFormat:{type:"Follow",actor:this.actor,object:this.object}}},computed:{...(0,C.Kc)(D)},methods:{getTestFollowerAuthor(){S.Z.get("/authors/38f57b34-f1ff-4f3b-9e81-2be731a14a0e/").then((e=>{this.actor=e.data,this.testSendingRequest()})).catch((e=>{console.log(e)}))},testSendingRequest(){this.followFormat.actor=this.actor,this.followFormat.object=this.object,S.Z.post("/authors/07e7050f-4bf6-4249-8cde-6d254bddce9e/inbox/",this.followFormat).catch((e=>{console.log("Couldn't send test request"),console.log(e)}))},testExampleRequest(){S.Z.get("/authors/07e7050f-4bf6-4249-8cde-6d254bddce9e/").then((e=>{this.object=e.data,this.getTestFollowerAuthor()})).then(console.log(this.actor)).catch((e=>{console.log(e)}))},displayUsername(e){return"@"+e},getIdFromUrl(e){return e.split("/")[5]},handleRequest(e,t){S.Z.get(`/authors/${t}/`).then((t=>{this.actor=t.data,this.updateRequestInformation(e)})).catch((e=>{console.log("Couldn't get author actor!"),console.log(e)}))},updateRequestInformation(e){this.followFormat.state=e,this.followFormat.actor=this.actor,this.followFormat.object=this.object,S.Z.post(`/authors/${this.object._id}/inbox/`,this.followFormat).then((()=>{this.requests=this.requests.filter((e=>e.actor.url!==this.actor.url)),console.table(this.requests),this.$emit("updateFollowers")})).catch((e=>{console.log("Couldn't update your request!"),console.log(e)}))},getAuthorFromStore(){const e=this.userStore;e.initializeStore(),this.object=e.user.author},getRequests(){S.Z.get(`/authors/${this.object._id}/inbox/`).then((e=>{this.inbox=e.data,this.pendingRequests=this.inbox.items.filter((e=>"Follow"===e.type)).filter((e=>void 0===e.state)),this.updatedRequests=this.inbox.items.filter((e=>"Follow"===e.type)).filter((e=>void 0!==e.state)),this.requests=this.pendingRequests.filter((e=>!this.updatedRequests.some((t=>e.actor.url===t.actor.url))))})).catch((e=>{console.log("Couldn't get inbox or requests!"),console.log(e)}))}},mounted(){this.getAuthorFromStore(),this.getRequests()}};const Fs=(0,F.Z)(xs,[["render",Ss]]);var Ms=Fs;const Is={class:"list-of-profiles",id:"followers"},Ts=(0,a._)("h1",{id:"followers"},[(0,a.Uk)(" Your "),(0,a._)("br"),(0,a.Uk)(" Followers")],-1),zs=["src"];function qs(e,t,s,o,n,i){return(0,a.wg)(),(0,a.iD)("div",Is,[Ts,(0,a._)("ul",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.followers.items,(e=>((0,a.wg)(),(0,a.iD)("li",{key:e.url},[e?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[(0,a._)("img",{src:e.profileImage},null,8,zs),(0,a._)("p",null,(0,l.zw)(i.displayUsername(e.displayName)),1)],64)):(0,a.kq)("",!0)])))),128))])])}var Ns={data(){return{followers:[""],author:null}},computed:{...(0,C.Kc)(D)},methods:{displayUsername(e){return"@"+e},getAuthorFromStore(){const e=this.userStore;e.initializeStore(),this.author=e.user.author},getFollowers(){S.Z.get(`/authors/${this.author._id}/followers/`).then((e=>{this.followers=e.data,console.log(this.followers)})).catch((e=>{console.log("Couldn't get followers!"),console.log(e)}))}},mounted(){this.getAuthorFromStore(),this.getFollowers()}};const $s=(0,F.Z)(Ns,[["render",qs]]);var Zs=$s;const As={class:"list-of-profiles",id:"followees"},Ls=(0,a._)("h1",null,[(0,a.Uk)(" Your "),(0,a._)("br"),(0,a.Uk)(" Followees")],-1),Es=["src"];function Rs(e,t,s,o,n,i){return(0,a.wg)(),(0,a.iD)("div",As,[Ls,(0,a._)("ul",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.followees.items,(e=>((0,a.wg)(),(0,a.iD)("li",{key:e.url},[e?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[(0,a._)("img",{src:e.profileImage},null,8,Es),(0,a._)("p",null,(0,l.zw)(i.displayUsername(e.displayName)),1)],64)):(0,a.kq)("",!0)])))),128))])])}var Ys={data(){return{followees:[""],author:null}},computed:{...(0,C.Kc)(D)},methods:{displayUsername(e){return"@"+e},getAuthorFromStore(){const e=this.userStore;e.initializeStore(),this.author=e.user.author},getFollowees(){S.Z.get(`/authors/${this.author._id}/following/`).then((e=>{this.followees=e.data,console.log(this.followees)})).catch((e=>{console.log("Couldn't get followees!"),console.log(e)}))}},mounted(){this.getAuthorFromStore(),this.getFollowees()}};const Bs=(0,F.Z)(Ys,[["render",Rs]]);var Ws=Bs,Os={name:"SocialPage",components:{MyRequests:Ms,MyFriends:vs,MyFollowers:Zs,MyFollowees:Ws},methods:{updateFollowers(){this.$refs.followers.getFollowers(),this.$refs.friends.getFriends()}}};const Vs=(0,F.Z)(Os,[["render",gs]]);var Hs=Vs;const Ks={class:"d-flex flex-column align-items-center my-root"};function Gs(e,t,s,o,n,l){const i=(0,a.up)("SettingsProfile");return(0,a.wg)(),(0,a.iD)("div",Ks,[(0,a.Wm)(i)])}const Js=e=>((0,a.dD)("data-v-652b08a4"),e=e(),(0,a.Cn)(),e),Qs={class:"child-root"},Xs=Js((()=>(0,a._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"alert","aria-label":"Close"},null,-1))),eo=Js((()=>(0,a._)("h1",null,"Profile",-1))),to=Js((()=>(0,a._)("h2",null,"Settings",-1))),so={class:"d-flex mt-4",id:"profile-container"},oo={class:"d-flex"},ao={class:"image-container me-4"},no=["src"],lo=["onSubmit"],io={class:"mb-3"},ro=Js((()=>(0,a._)("label",{for:"newProfileImage",class:"form-label"},"New profile image URL",-1))),co=Js((()=>(0,a._)("button",{type:"submit",class:"btn btn-primary",form:"profileImageForm"},"Change profile picture",-1))),uo=Js((()=>(0,a._)("i",{class:"bi bi-pencil-fill overlay-icon",id:"edit-image-icon"},null,-1))),mo=[uo],po={class:"d-flex flex-column gap-3 text-start"},ho={class:"display-name"},go=Js((()=>(0,a._)("span",{class:"field-name"},"Display Name:",-1))),fo=["onSubmit"],bo=Js((()=>(0,a._)("label",{for:"newDisplayName",class:"form-label"},"New display name",-1))),wo={class:"input-group mb-3"},_o=Js((()=>(0,a._)("span",{class:"input-group-text",id:"basic-addon1"},"@",-1))),yo=Js((()=>(0,a._)("button",{type:"submit",class:"btn btn-primary",form:"displaynameForm"},"Change display name",-1))),ko={class:"username"},vo=Js((()=>(0,a._)("span",{class:"field-name"},"Username:",-1))),jo=["onSubmit"],Po={class:"mb-3"},Co=Js((()=>(0,a._)("label",{for:"currentPassword",class:"form-label"},"Password",-1))),Uo={class:"mb-3"},Do=Js((()=>(0,a._)("label",{for:"newUsername",class:"form-label"},"New username",-1))),So=Js((()=>(0,a._)("button",{type:"submit",class:"btn btn-primary",form:"usernameForm"},"Change username",-1))),xo=Js((()=>(0,a._)("i",{class:"bi bi-pencil-fill",role:"button","data-bs-toggle":"modal","data-bs-target":"#usernameModal"},null,-1))),Fo=["onSubmit"],Mo={class:"mb-3"},Io=Js((()=>(0,a._)("label",{for:"currentPassword",class:"form-label"},"Current password",-1))),To={class:"mb-3"},zo=Js((()=>(0,a._)("label",{for:"newPassword",class:"form-label"},"New password",-1))),qo={class:"mb-3"},No=Js((()=>(0,a._)("label",{for:"confirmNewPassword",class:"form-label"},"Confirm new password",-1))),$o=Js((()=>(0,a._)("button",{type:"submit",class:"btn btn-primary",form:"passwordForm"},"Change password",-1))),Zo=Js((()=>(0,a._)("button",{type:"button",class:"btn btn-primary","data-bs-toggle":"modal","data-bs-target":"#passwordModal"},[(0,a._)("i",{class:"bi bi-lock-fill"}),(0,a.Uk)(" Change password ")],-1)));function Ao(e,t,s,n,i,r){const d=(0,a.up)("SlotModal");return(0,a.wg)(),(0,a.iD)("div",Qs,[i.alert.msg?((0,a.wg)(),(0,a.iD)("div",{key:0,class:(0,l.C_)(["alert fade show alert-dismissible",[i.alert.type]]),role:"alert"},[(0,a.Uk)((0,l.zw)(i.alert.msg)+" ",1),Xs],2)):(0,a.kq)("",!0),eo,to,(0,a._)("div",so,[(0,a._)("div",oo,[(0,a._)("div",ao,[(0,a._)("img",{class:"settings-profile-image rounded-circle",src:r.getAuthorPropertyIfDefined("profileImage"),alt:"User profile picture"},null,8,no),(0,a.Wm)(d,{"modal-name":"profileImageModal",onSubmitMyForm:r.submitProfileImageForm,onClearFields:r.prefillProfileImageURL},{titleText:(0,a.w5)((()=>[(0,a.Uk)("Edit profile picture")])),body:(0,a.w5)((e=>[(0,a._)("form",{onSubmit:(0,o.iM)(e.submitMethod,["prevent"]),id:"profileImageForm"},[(0,a._)("div",io,[ro,(0,a.wy)((0,a._)("input",{class:"form-control",id:"newProfileImage","onUpdate:modelValue":t[0]||(t[0]=e=>i.fields.newProfileImageURL=e),type:"url",required:""},null,512),[[o.nr,i.fields.newProfileImageURL]])])],40,lo)])),submitButton:(0,a.w5)((()=>[co])),openModalButton:(0,a.w5)((()=>[(0,a._)("div",{class:"edit-overlay rounded-circle",role:"button","data-bs-toggle":"modal","data-bs-target":"#profileImageModal",onClick:t[1]||(t[1]=(...e)=>r.prefillProfileImageURL&&r.prefillProfileImageURL(...e))},mo)])),_:1},8,["onSubmitMyForm","onClearFields"])]),(0,a._)("div",po,[(0,a._)("div",null,[(0,a._)("span",ho,[go,(0,a.Uk)(" @"+(0,l.zw)(r.getAuthorPropertyIfDefined("displayName")),1)]),(0,a.Uk)("Â  "),(0,a.Wm)(d,{"modal-name":"displaynameModal",onSubmitMyForm:r.submitDisplaynameForm,onClearFields:r.prefillDisplayName},{openModalButton:(0,a.w5)((()=>[(0,a._)("i",{class:"bi bi-pencil-fill",role:"button","data-bs-toggle":"modal","data-bs-target":"#displaynameModal",onClick:t[2]||(t[2]=(...e)=>r.prefillDisplayName&&r.prefillDisplayName(...e))})])),titleText:(0,a.w5)((()=>[(0,a.Uk)("Edit display name")])),body:(0,a.w5)((e=>[(0,a._)("form",{onSubmit:(0,o.iM)(e.submitMethod,["prevent"]),id:"displaynameForm"},[bo,(0,a._)("div",wo,[_o,(0,a.wy)((0,a._)("input",{class:"form-control",type:"text",id:"newDisplayName","onUpdate:modelValue":t[3]||(t[3]=e=>i.fields.newDisplayName=e),"aria-label":"Display name","aria-describedby":"basic-addon1",required:""},null,512),[[o.nr,i.fields.newDisplayName]])])],40,fo)])),submitButton:(0,a.w5)((()=>[yo])),default:(0,a.w5)((()=>[(0,a.Uk)(" >")])),_:1},8,["onSubmitMyForm","onClearFields"])]),(0,a._)("div",null,[(0,a._)("span",ko,[vo,(0,a.Uk)(" "+(0,l.zw)(this.userStore.user.username),1)]),(0,a.Uk)("Â  "),(0,a.Wm)(d,{"modal-name":"usernameModal",onSubmitMyForm:r.submitUsernameForm,onClearFields:r.clearFields},{titleText:(0,a.w5)((()=>[(0,a.Uk)("Edit username")])),body:(0,a.w5)((e=>[(0,a._)("form",{onSubmit:(0,o.iM)(e.submitMethod,["prevent"]),id:"usernameForm"},[(0,a._)("div",Po,[Co,(0,a.wy)((0,a._)("input",{class:"form-control",type:"password",id:"currentPassword","onUpdate:modelValue":t[4]||(t[4]=e=>i.fields.currentPassword=e),required:""},null,512),[[o.nr,i.fields.currentPassword]])]),(0,a._)("div",Uo,[Do,(0,a.wy)((0,a._)("input",{class:"form-control",type:"text",id:"newUsername","onUpdate:modelValue":t[5]||(t[5]=e=>i.fields.newUsername=e),required:""},null,512),[[o.nr,i.fields.newUsername]])])],40,jo)])),submitButton:(0,a.w5)((()=>[So])),openModalButton:(0,a.w5)((()=>[xo])),_:1},8,["onSubmitMyForm","onClearFields"])]),(0,a.Wm)(d,{"modal-name":"passwordModal",onSubmitMyForm:r.submitPasswordForm,onClearFields:r.clearFields},{titleText:(0,a.w5)((()=>[(0,a.Uk)("Change password")])),body:(0,a.w5)((e=>[(0,a._)("form",{onSubmit:(0,o.iM)(e.submitMethod,["prevent"]),id:"passwordForm"},[(0,a._)("div",Mo,[Io,(0,a.wy)((0,a._)("input",{class:"form-control",type:"password",id:"currentPassword","onUpdate:modelValue":t[6]||(t[6]=e=>i.fields.currentPassword=e),required:""},null,512),[[o.nr,i.fields.currentPassword]])]),(0,a._)("div",To,[zo,(0,a.wy)((0,a._)("input",{class:"form-control",type:"password",id:"newPassword","onUpdate:modelValue":t[7]||(t[7]=e=>i.fields.newPassword=e),required:""},null,512),[[o.nr,i.fields.newPassword]])]),(0,a._)("div",qo,[No,(0,a.wy)((0,a._)("input",{class:"form-control",type:"password",id:"confirmNewPassword","onUpdate:modelValue":t[8]||(t[8]=e=>i.fields.confirmNewPassword=e),required:""},null,512),[[o.nr,i.fields.confirmNewPassword]])])],40,Fo)])),submitButton:(0,a.w5)((()=>[$o])),openModalButton:(0,a.w5)((()=>[Zo])),_:1},8,["onSubmitMyForm","onClearFields"])])])])])}var Lo={name:"SettingsProfile",components:{SlotModal:ge},data(){return{alert:{msg:"",type:""},errorMsg:"",fields:{currentPassword:"",newUsername:"",newPassword:"",confirmNewPassword:"",newDisplayName:"",newProfileImageURL:""}}},methods:{showAlert(e,t){this.alert.msg=e,this.alert.type="alert-"+t,console.log(this.alert)},promptImageURL(){const e=prompt("Enter a new image URL");e&&this.updateAuthorField("profileImage",e)},updateAuthorField(e,t,{done:s,e:o}){const a={displayName:"Display name",profileImage:"Profile image"};this.userStore.initializeStore();const n=this.userStore.user,l=n.author;l[e]=t,S.Z.post("/authors/"+l._id+"/",l).then((t=>{console.log(t),this.showAlert(a[e]+" sucessfully updated!","success"),this.userStore.setUser(n),s()})).catch((t=>{console.log(t),this.showAlert(a[e]+" update failed!","danger"),o(Ht(t))}))},getAuthorPropertyIfDefined(e){return this.userStore.user.author?this.userStore.user.author[e]:""},clearFields(){for(const e in this.fields)this.fields[e]=""},submitUsernameForm({done:e,e:t}){const s={current_password:this.fields.currentPassword,new_username:this.fields.newUsername};S.Z.post("/users/set_username/",s).then((t=>{console.log(t);const s=this.fields.newUsername;this.showAlert('Username changed successfully. Your username is now "'+s+'".',"success"),this.updateLocalUsername(s),e()})).catch((e=>{console.log(e);const s={current_password:"Password",new_username:"New username"},o=Ht(e,s);t(o)}))},updateLocalUsername(e){const t=this.userStore;t.initializeStore();const s=t.user;s.username=e,localStorage.setItem("user",JSON.stringify(t.user))},submitPasswordForm({done:e,e:t}){const s={current_password:this.fields.currentPassword,new_password:this.fields.newPassword,re_new_password:this.fields.confirmNewPassword};this.fields.newPassword!==this.fields.confirmNewPassword?t("New passwords do not match."):S.Z.post("/users/set_password/",s).then((t=>{console.log(t),this.showAlert("Password changed successfully.","success"),e()})).catch((e=>{console.log(e);const s={current_password:"Current password",new_password:"New password",re_new_password:"Confirm new password",non_field_errors:"Error"},o=Ht(e,s);t(o)}))},submitDisplaynameForm({done:e,e:t}){this.updateAuthorField("displayName",this.fields.newDisplayName,{done:e,e:t})},prefillDisplayName(){this.fields.newDisplayName=this.getAuthorPropertyIfDefined("displayName")},submitProfileImageForm({done:e,e:t}){this.updateAuthorField("profileImage",this.fields.newProfileImageURL,{done:e,e:t})},prefillProfileImageURL(){this.fields.newProfileImageURL=this.getAuthorPropertyIfDefined("profileImage"),console.log(this.fields.newProfileImageURL)}},computed:{...(0,C.Kc)(D)}};const Eo=(0,F.Z)(Lo,[["render",Ao],["__scopeId","data-v-652b08a4"]]);var Ro=Eo,Yo={name:"SettingsPage",components:{SettingsProfile:Ro}};const Bo=(0,F.Z)(Yo,[["render",Gs],["__scopeId","data-v-01097e81"]]);var Wo=Bo;const Oo=e=>((0,a.dD)("data-v-749471b2"),e=e(),(0,a.Cn)(),e),Vo={class:"d-flex flex-column flex-shrink-0",id:"single-post-container"},Ho={key:1,class:"post-left-bar"},Ko={class:"author-info"},Go=["src"],Jo={class:"name"},Qo={class:"follow-status"},Xo={class:"btn-list"},ea={class:"btn-with-label"},ta={class:"btn-with-label"},sa={id:"comment-button",type:"button",ref:"commentButton","data-bs-toggle":"modal","data-bs-target":"#makeCommentModal",class:"btn btn-light action-button"},oa=Oo((()=>(0,a._)("i",{class:"bi bi-chat-left-text-fill"},null,-1))),aa=[oa],na={for:"comment-button"},la=Oo((()=>(0,a._)("li",null,[(0,a._)("button",{type:"button",class:"btn btn-light action-button","data-bs-toggle":"modal","data-bs-target":"#sharePostModal"},[(0,a._)("i",{class:"bi bi-share-fill"})])],-1))),ia={key:0,class:"right-aside-tab-icon bi bi-caret-left-fill"},ra={key:1,class:"right-aside-tab-icon bi bi-caret-right-fill"},da={class:"scrollable"},ca={class:"move-page-wrapper"},ua={key:0,class:"move-page"},ma={class:"pages-count"},pa=Oo((()=>(0,a._)("strong",null,"Comment",-1))),ha={class:"form-check form-switch d-flex justify-content-center gap-3 mb-2"},ga=Oo((()=>(0,a._)("label",{class:"form-check-label",for:"markdown-toggle"},[(0,a._)("i",{class:"bi-markdown-fill"}),(0,a.Uk)(" Use Markdown ")],-1))),fa=Oo((()=>(0,a._)("br",null,null,-1))),ba=Oo((()=>(0,a._)("strong",null,"Post",-1))),wa=Oo((()=>(0,a._)("h4",null,[(0,a.Uk)("Your "),(0,a._)("strong",null,"Friends")],-1))),_a=Oo((()=>(0,a._)("hr",null,null,-1))),ya=["onClick"],ka={key:0},va=Oo((()=>(0,a._)("br",null,null,-1)));function ja(e,t,s,n,i,r){const d=(0,a.up)("PostProper"),c=(0,a.up)("CommentList"),u=(0,a.up)("SlotModal");return(0,a.wg)(),(0,a.iD)("div",Vo,[r.loading?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(d,{key:0,post:i.postData,author:i.authorData,class:"col-9"},null,8,["post","author"])),r.loading?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("aside",Ho,[(0,a._)("section",Ko,[(0,a._)("img",{src:i.authorData.profileImage,class:"author-picture"},null,8,Go),(0,a._)("div",Jo,"@"+(0,l.zw)(i.authorData.displayName),1),(0,a._)("span",Qo,[(0,a._)("small",{class:(0,l.C_)({activated:i.isFollowing})},(0,l.zw)(i.isFollowing?"Following":"Not Following"),3),(0,a._)("small",{class:(0,l.C_)({activated:!i.isFollowing}),onClick:t[0]||(t[0]=(...e)=>r.toggleFollow&&r.toggleFollow(...e))},(0,l.zw)(i.isFollowing?"Unfollow":"Follow"),3)])]),(0,a._)("ul",Xo,[(0,a._)("li",ea,[(0,a._)("button",{id:"like-post-button",type:"button",class:"btn btn-light action-button",onClick:t[1]||(t[1]=(...e)=>r.toggleLike&&r.toggleLike(...e))},[(0,a._)("i",{class:(0,l.C_)(["bi bi-heart-fill",{liked:i.isLiked}])},null,2)])]),(0,a._)("li",ta,[(0,a._)("button",sa,aa,512),(0,a._)("label",na,(0,l.zw)(i.postData.count),1)]),la])])),r.loading?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("aside",{key:2,class:(0,l.C_)(["post-right-bar",{expanded:i.expandComments}])},[(0,a._)("div",{class:"right-aside-tab",onClick:t[2]||(t[2]=(...e)=>r.toggleComments&&r.toggleComments(...e))},[i.expandComments?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("i",ia)),i.expandComments?((0,a.wg)(),(0,a.iD)("i",ra)):(0,a.kq)("",!0)]),(0,a._)("div",da,[(0,a.Wm)(c,{post:i.postData,page:i.currentCommentPage,pageTotal:r.pageTotal,pagination:i.paginationSetting,onAddComment:t[3]||(t[3]=t=>e.$refs.commentButton.click())},null,8,["post","page","pageTotal","pagination"]),(0,a._)("div",ca,[r.pageTotal>1?((0,a.wg)(),(0,a.iD)("div",ua,[(0,a._)("i",{class:(0,l.C_)(["bi bi-caret-left-fill",{activated:i.currentCommentPage>1}]),onClick:t[4]||(t[4]=e=>r.changeCommentPage(-1))},null,2),(0,a._)("span",ma,(0,l.zw)(i.currentCommentPage)+"/"+(0,l.zw)(r.pageTotal),1),(0,a._)("i",{class:(0,l.C_)(["bi bi-caret-right-fill",{activated:i.currentCommentPage!==r.pageTotal}]),onClick:t[5]||(t[5]=e=>r.changeCommentPage(1))},null,2)])):(0,a.kq)("",!0)])])],2)),(0,a.Wm)(u,{modalName:"makeCommentModal",sizing:"modal-lg",justification:"modal-dialog-centered"},{titleText:(0,a.w5)((()=>[(0,a.Uk)("Add a "),pa])),body:(0,a.w5)((()=>[(0,a._)("div",ha,[(0,a.wy)((0,a._)("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>i.markDownEnabled=e),onChange:t[7]||(t[7]=(...t)=>e.setText&&e.setText(...t)),id:"markdown-toggle",class:"form-check-input pr-2",type:"checkbox"},null,544),[[o.e8,i.markDownEnabled]]),ga]),(0,a.wy)((0,a._)("textarea",{class:"form-control","onUpdate:modelValue":t[8]||(t[8]=e=>i.newComment=e),placeholder:"Write a comment"},null,512),[[o.nr,i.newComment]])])),submitButton:(0,a.w5)((()=>[(0,a._)("button",{type:"submit",class:"btn btn-primary","data-bs-dismiss":"modal",onClick:t[9]||(t[9]=(...e)=>r.submitComment&&r.submitComment(...e))},"Submit")])),openModalButton:(0,a.w5)((()=>[fa])),_:1}),(0,a.Wm)(u,{modalName:"sharePostModal",sizing:"modal-lg",justification:"modal-dialog-centered"},{titleText:(0,a.w5)((()=>[(0,a.Uk)("Share the "),ba])),body:(0,a.w5)((()=>[wa,_a,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(i.friends,(e=>((0,a.wg)(),(0,a.iD)("p",{key:e.id,onClick:t=>r.sharePost(e)},(0,l.zw)(e.displayName),9,ya)))),128)),0===i.friends.length?((0,a.wg)(),(0,a.iD)("p",ka,"You have no friends :C")):(0,a.kq)("",!0)])),openModalButton:(0,a.w5)((()=>[va])),_:1})])}const Pa=e=>((0,a.dD)("data-v-319ecdb4"),e=e(),(0,a.Cn)(),e),Ca={class:"post-template container"},Ua={class:"post-title"},Da={class:"post-title"},Sa={class:"supplementary-info"},xa=["open"],Fa=["title"],Ma=Pa((()=>(0,a._)("i",{class:"bi bi-info-circle"},null,-1))),Ia=[Ma],Ta={class:"post-icons"},za={key:0,class:"image-content"},qa=["src"],Na={key:1,class:"text-content"},$a={key:0,id:"post-content-plain",class:"text"};function Za(e,t,s,n,i,r){const d=(0,a.up)("VueMarkdown");return(0,a.wg)(),(0,a.iD)("div",Ca,[(0,a._)("section",Ua,[(0,a._)("h1",Da,(0,l.zw)(s.post.title),1)]),(0,a._)("div",Sa,[s.post.description?((0,a.wg)(),(0,a.iD)("details",{key:0,class:"post-description",open:i.descIsHovered},[(0,a._)("summary",{"data-toggle":"tooltip","data-placement":"left",title:s.post.description,onClick:t[0]||(t[0]=(0,o.iM)((()=>{}),["prevent"]))},Ia,8,Fa),(0,a._)("small",null,(0,l.zw)(s.post.description),1)],8,xa)):(0,a.kq)("",!0),(0,a._)("span",Ta,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s.post.contentType.split(","),(e=>((0,a.wg)(),(0,a.iD)("i",{key:e,class:(0,l.C_)(["bi",r.getIcon(e)])},null,2)))),128))])]),s.post.image?((0,a.wg)(),(0,a.iD)("section",za,[(0,a._)("img",{class:"img-fluid",src:r.imageSrc},null,8,qa)])):(0,a.kq)("",!0),s.post.content?((0,a.wg)(),(0,a.iD)("section",Na,[s.post.content&&!r.markdown?((0,a.wg)(),(0,a.iD)("p",$a,(0,l.zw)(s.post.content),1)):s.post.content&&r.markdown?((0,a.wg)(),(0,a.j4)(d,{key:1,id:"post-content-markdown",source:s.post.content,class:"text"},null,8,["source"])):(0,a.kq)("",!0)])):(0,a.kq)("",!0)])}var Aa={components:{VueMarkdown:te.Z},props:{post:Object,author:Object},computed:{markdown(){return this.post.contentType.split(",").includes("text/markdown")},imageSrc(){return`http://localhost:8000/api/authors/${this.author._id}/posts/${this.post._id}/image`}},data(){return{descIsHovered:!1}},methods:{getIcon(e){switch(!0){case/^text\/markdown$/.test(e):return"bi-markdown-fill";case/^text\/plain$/.test(e):return"bi-blockquote-left";case/^image/.test(e):return"bi-image-fill"}}}};const La=(0,F.Z)(Aa,[["render",Za],["__scopeId","data-v-319ecdb4"]]);var Ea=La;const Ra=e=>((0,a.dD)("data-v-39bbc80c"),e=e(),(0,a.Cn)(),e),Ya={key:0},Ba=Ra((()=>(0,a._)("i",{class:"bi bi-person-check-fill"},null,-1))),Wa={key:1},Oa=Ra((()=>(0,a._)("i",{class:"bi bi-rocket-takeoff-fill"},null,-1))),Va={key:0,class:"spinner-grow text-light",role:"status"},Ha={key:1,id:"end-of-comments",class:"text-primary"},Ka={key:2,class:"text-light mt-3"};function Ga(e,t,s,o,n,l){const i=(0,a.up)("UserComment");return(0,a.wg)(),(0,a.iD)(a.HY,null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.comments,(e=>((0,a.wg)(),(0,a.j4)(i,{ref_for:!0,ref:"infScrollCommentList",key:e.id,comment:e},{flair:(0,a.w5)((()=>[l.matchPost(e)?((0,a.wg)(),(0,a.iD)("span",Ya,[(0,a.Uk)("OP"),Ba])):l.matchSession(e)?((0,a.wg)(),(0,a.iD)("span",Wa,[(0,a.Uk)("Me"),Oa])):(0,a.kq)("",!0)])),_:2},1032,["comment"])))),128)),n.loading?((0,a.wg)(),(0,a.iD)("div",Va)):(0,a.kq)("",!0),l.exhausted&&n.comments.length>0?((0,a.wg)(),(0,a.iD)("hr",Ha)):(0,a.kq)("",!0),l.exhausted?((0,a.wg)(),(0,a.iD)("small",Ka,[(0,a.Uk)("There are no more comments. "),(0,a._)("a",{class:"text-primary",onClick:t[0]||(t[0]=t=>e.$emit("addComment"))},"But you can add one")])):(0,a.kq)("",!0)],64)}const Ja={class:"comment-body"},Qa={class:"commenter"},Xa={class:"display-name"},en={class:"date"};function tn(e,t,s,o,n,i){const r=(0,a.up)("VueMarkdown");return(0,a.wg)(),(0,a.iD)("div",Ja,[i.markdown?((0,a.wg)(),(0,a.j4)(r,{key:1,source:s.comment.comment,class:(0,l.C_)({decoration:i.flairDecorate})},null,8,["source","class"])):((0,a.wg)(),(0,a.iD)("p",{key:0,class:(0,l.C_)({decoration:i.flairDecorate})},(0,l.zw)(s.comment.comment),3)),(0,a._)("div",Qa,[(0,a._)("span",Xa,(0,l.zw)(i.displayName),1),(0,a.WI)(e.$slots,"flair")]),(0,a._)("div",en,(0,l.zw)(i.dateFormatted),1)])}var sn={props:{comment:Object},components:{VueMarkdown:te.Z},computed:{dateFormatted(){const e=It()(this.comment.published).format("YYYY/MM/DD"),t=It()().format("YYYY/MM/DD");return e===t?"Today":e},displayName(){return`@${this.comment.author.displayName}`},flairDecorate(){return!!this.$slots.flair},markdown(){return/markdown$/.test(this.comment.contentType)}}};const on=(0,F.Z)(sn,[["render",tn]]);var an=on,nn={emits:["addComment"],props:{post:Object,page:Number,pageTotal:Number,pagination:Number},components:{UserComment:an},mounted(){const e=D();e.initializeStore(),this.currentUser=e.user.author,this.getComments()},watch:{page(e){this.getComments()}},computed:{exhausted(){return this.comments.length<this.pagination&&this.page===this.pageTotal}},data(){return{comments:[],loading:!0,currentUser:null}},methods:{matchPost(e){return this.post.author.id===e.author.id||!1},matchSession(e){return this.currentUser.id===e.author.id||!1},getComments(){S.Z.get(this.post.comments,{params:{page:this.page,size:this.pagination}}).then((e=>{0===e.data.length&&(this.exhausted=!0),this.comments=e.data.comments,this.loading=!1})).catch((e=>{console.log(e)})),this.loading=!0}}};const ln=(0,F.Z)(nn,[["render",Ga],["__scopeId","data-v-39bbc80c"]]);var rn=ln;const dn={type:"comment",id:null,author:null,comment:"",contentType:"text/plain",published:"2023-03-01T21:18:38.908794Z"};var cn={components:{PostProper:Ea,CommentList:rn,SlotModal:ge},mounted(){const e=this.$route.params.pid,t=this.$route.params.aid;this.getAuthorFromStore(),this.getData(e,t)},computed:{...(0,C.Kc)(D),loading(){return!this.authorData||!this.postData},pageTotal(){return Math.ceil(this.postData.count/this.paginationSetting)||1}},data(){return{postData:null,authorData:null,currentAuthor:null,isLiked:!1,isFollowing:!1,friends:[],friendsLoading:!0,expandComments:!1,currentCommentPage:1,paginationSetting:5,newComment:"",markDownEnabled:!1}},methods:{async getData(e,t){S.Z.get(`/authors/${t}/posts/${e}`).then((e=>{this.postData=e.data})).catch((e=>{console.log(e)})),S.Z.get(`/authors/${t}`).then((e=>{this.authorData=e.data})).catch((e=>{console.log(e)})),S.Z.get(`/authors/${t}/friends`).then((e=>{this.friends=e.data.items,this.friendsLoading=!1})).catch((e=>{this.friends=[],alert("Couldn't get friends list"),console.log(e)}))},toggleFollow(){this.isFollowing=!this.isFollowing,alert("Sorry! You can't follow people yet")},toggleLike(){this.isLiked=!this.isLiked,alert("Sorry! You can't like posts yet")},toggleComments(){this.expandComments=!this.expandComments},changeCommentPage(e){(e<0&&this.currentCommentPage+e>0||e>0&&this.currentCommentPage+e<=this.pageTotal)&&(this.currentCommentPage+=e)},submitComment(){const e=dn,t=(0,nt.Z)();e.author=this.currentAuthor,e.id=`${this.postData.id}/comments/${t}`,e.comment=this.newComment,e.contentType=this.markDownEnabled?"text-markdown":"text-plain",console.table(e),S.Z.post(`${this.postData.id}/comments`,e).then((()=>{this.postData.count++,this.currentCommentPage=this.pageTotal,this.expandComments=!0,this.newComment=""})).catch((e=>{console.log(e),alert("Couldn't make comment!")}))},sharePost(e){S.Z.post(`${e.id}/inbox/`,this.postData).then((()=>{alert(`You shared the post with ${e.displayName}`)})).catch((()=>{alert(`Couldn't share the post with ${e.displayName}`)}))},getAuthorFromStore(){const e=this.userStore;e.initializeStore(),this.currentAuthor=e.user.author}}};const un=(0,F.Z)(cn,[["render",ja],["__scopeId","data-v-749471b2"]]);var mn=un,pn=[{path:"/",redirect:"/home"},{path:"/home",name:"homepage",component:gt},{path:"/browse",name:"browsepage",component:Nt},{path:"/login",name:"login",component:Jt},{path:"/signup",name:"signup",component:ps},{path:"/home/manage-posts",name:"manageposts",component:rt},{path:"/social",name:"SocialPage",component:Hs},{path:"/settings",name:"SettingsPage",component:Wo},{path:"/authors/:aid/posts/:pid",name:"postpage",component:mn}];const hn=(0,N.p7)({history:(0,N.PO)("/"),linkActiveClass:"active",routes:pn,scrollBehavior(e,t,s){if(e.hash)return{el:e.hash,behavior:"smooth"}}});hn.beforeEach(((e,t)=>{const s=U();s.initializeStore();const o=["login","signup"];return s.isAuthenticated||o.includes(e.name)?s.isAuthenticated&&o.includes(e.name)?"/home#loggedin":void 0:"/login"}));var gn=hn;s(2166);S.Z.defaults.baseURL="https://social-t30.herokuapp.com/api";const fn=(0,o.ri)(q);fn.use(gn,S.Z).use((0,C.WB)()).mount("#app"),fn.config.globalProperties.$http=S.Z}},t={};function s(o){var a=t[o];if(void 0!==a)return a.exports;var n=t[o]={id:o,loaded:!1,exports:{}};return e[o].call(n.exports,n,n.exports,s),n.loaded=!0,n.exports}s.m=e,function(){var e=[];s.O=function(t,o,a,n){if(!o){var l=1/0;for(c=0;c<e.length;c++){o=e[c][0],a=e[c][1],n=e[c][2];for(var i=!0,r=0;r<o.length;r++)(!1&n||l>=n)&&Object.keys(s.O).every((function(e){return s.O[e](o[r])}))?o.splice(r--,1):(i=!1,n<l&&(l=n));if(i){e.splice(c--,1);var d=a();void 0!==d&&(t=d)}}return t}n=n||0;for(var c=e.length;c>0&&e[c-1][2]>n;c--)e[c]=e[c-1];e[c]=[o,a,n]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var o in t)s.o(t,o)&&!s.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){s.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){var e={143:0};s.O.j=function(t){return 0===e[t]};var t=function(t,o){var a,n,l=o[0],i=o[1],r=o[2],d=0;if(l.some((function(t){return 0!==e[t]}))){for(a in i)s.o(i,a)&&(s.m[a]=i[a]);if(r)var c=r(s)}for(t&&t(o);d<l.length;d++)n=l[d],s.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return s.O(c)},o=self["webpackChunksocial_distribution_front_end"]=self["webpackChunksocial_distribution_front_end"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=s.O(void 0,[998],(function(){return s(2344)}));o=s.O(o)})();
//# sourceMappingURL=app.6a53b5e6.js.map