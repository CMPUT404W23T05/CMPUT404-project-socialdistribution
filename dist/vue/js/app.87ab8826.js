(function(){var t={6700:function(t,e,o){var s={"./af":3906,"./af.js":3906,"./ar":902,"./ar-dz":3853,"./ar-dz.js":3853,"./ar-kw":299,"./ar-kw.js":299,"./ar-ly":6825,"./ar-ly.js":6825,"./ar-ma":6379,"./ar-ma.js":6379,"./ar-sa":7700,"./ar-sa.js":7700,"./ar-tn":2059,"./ar-tn.js":2059,"./ar.js":902,"./az":6043,"./az.js":6043,"./be":7936,"./be.js":7936,"./bg":4078,"./bg.js":4078,"./bm":4014,"./bm.js":4014,"./bn":9554,"./bn-bd":7114,"./bn-bd.js":7114,"./bn.js":9554,"./bo":6529,"./bo.js":6529,"./br":5437,"./br.js":5437,"./bs":9647,"./bs.js":9647,"./ca":9951,"./ca.js":9951,"./cs":6113,"./cs.js":6113,"./cv":7965,"./cv.js":7965,"./cy":5858,"./cy.js":5858,"./da":3515,"./da.js":3515,"./de":2831,"./de-at":6263,"./de-at.js":6263,"./de-ch":1127,"./de-ch.js":1127,"./de.js":2831,"./dv":4510,"./dv.js":4510,"./el":8616,"./el.js":8616,"./en-au":4595,"./en-au.js":4595,"./en-ca":3545,"./en-ca.js":3545,"./en-gb":9609,"./en-gb.js":9609,"./en-ie":3727,"./en-ie.js":3727,"./en-il":3302,"./en-il.js":3302,"./en-in":6305,"./en-in.js":6305,"./en-nz":9128,"./en-nz.js":9128,"./en-sg":4569,"./en-sg.js":4569,"./eo":650,"./eo.js":650,"./es":6358,"./es-do":4214,"./es-do.js":4214,"./es-mx":8639,"./es-mx.js":8639,"./es-us":232,"./es-us.js":232,"./es.js":6358,"./et":7279,"./et.js":7279,"./eu":5515,"./eu.js":5515,"./fa":7981,"./fa.js":7981,"./fi":7090,"./fi.js":7090,"./fil":9208,"./fil.js":9208,"./fo":2799,"./fo.js":2799,"./fr":3463,"./fr-ca":2213,"./fr-ca.js":2213,"./fr-ch":2848,"./fr-ch.js":2848,"./fr.js":3463,"./fy":1468,"./fy.js":1468,"./ga":8163,"./ga.js":8163,"./gd":2898,"./gd.js":2898,"./gl":6312,"./gl.js":6312,"./gom-deva":682,"./gom-deva.js":682,"./gom-latn":9178,"./gom-latn.js":9178,"./gu":5009,"./gu.js":5009,"./he":2795,"./he.js":2795,"./hi":7009,"./hi.js":7009,"./hr":6506,"./hr.js":6506,"./hu":9565,"./hu.js":9565,"./hy-am":3864,"./hy-am.js":3864,"./id":5626,"./id.js":5626,"./is":6649,"./is.js":6649,"./it":151,"./it-ch":5348,"./it-ch.js":5348,"./it.js":151,"./ja":9830,"./ja.js":9830,"./jv":3751,"./jv.js":3751,"./ka":3365,"./ka.js":3365,"./kk":5980,"./kk.js":5980,"./km":9571,"./km.js":9571,"./kn":5880,"./kn.js":5880,"./ko":6809,"./ko.js":6809,"./ku":6773,"./ku.js":6773,"./ky":5505,"./ky.js":5505,"./lb":553,"./lb.js":553,"./lo":1237,"./lo.js":1237,"./lt":1563,"./lt.js":1563,"./lv":1057,"./lv.js":1057,"./me":6495,"./me.js":6495,"./mi":3096,"./mi.js":3096,"./mk":3874,"./mk.js":3874,"./ml":6055,"./ml.js":6055,"./mn":7747,"./mn.js":7747,"./mr":7113,"./mr.js":7113,"./ms":8687,"./ms-my":7948,"./ms-my.js":7948,"./ms.js":8687,"./mt":4532,"./mt.js":4532,"./my":4655,"./my.js":4655,"./nb":6961,"./nb.js":6961,"./ne":2512,"./ne.js":2512,"./nl":8448,"./nl-be":2936,"./nl-be.js":2936,"./nl.js":8448,"./nn":9031,"./nn.js":9031,"./oc-lnc":5174,"./oc-lnc.js":5174,"./pa-in":118,"./pa-in.js":118,"./pl":3448,"./pl.js":3448,"./pt":3518,"./pt-br":2447,"./pt-br.js":2447,"./pt.js":3518,"./ro":817,"./ro.js":817,"./ru":262,"./ru.js":262,"./sd":8990,"./sd.js":8990,"./se":3842,"./se.js":3842,"./si":7711,"./si.js":7711,"./sk":756,"./sk.js":756,"./sl":3772,"./sl.js":3772,"./sq":6187,"./sq.js":6187,"./sr":732,"./sr-cyrl":5713,"./sr-cyrl.js":5713,"./sr.js":732,"./ss":9455,"./ss.js":9455,"./sv":9770,"./sv.js":9770,"./sw":959,"./sw.js":959,"./ta":6459,"./ta.js":6459,"./te":5302,"./te.js":5302,"./tet":7975,"./tet.js":7975,"./tg":1294,"./tg.js":1294,"./th":2385,"./th.js":2385,"./tk":4613,"./tk.js":4613,"./tl-ph":8668,"./tl-ph.js":8668,"./tlh":8190,"./tlh.js":8190,"./tr":4506,"./tr.js":4506,"./tzl":3440,"./tzl.js":3440,"./tzm":9852,"./tzm-latn":2350,"./tzm-latn.js":2350,"./tzm.js":9852,"./ug-cn":730,"./ug-cn.js":730,"./uk":99,"./uk.js":99,"./ur":2100,"./ur.js":2100,"./uz":6002,"./uz-latn":6322,"./uz-latn.js":6322,"./uz.js":6002,"./vi":4207,"./vi.js":4207,"./x-pseudo":4674,"./x-pseudo.js":4674,"./yo":570,"./yo.js":570,"./zh-cn":3644,"./zh-cn.js":3644,"./zh-hk":2591,"./zh-hk.js":2591,"./zh-mo":9503,"./zh-mo.js":9503,"./zh-tw":8080,"./zh-tw.js":8080};function a(t){var e=n(t);return o(e)}function n(t){if(!o.o(s,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return s[t]}a.keys=function(){return Object.keys(s)},a.resolve=n,t.exports=a,a.id=6700},4626:function(t,e,o){"use strict";var s=o(9242),a=o(3396);function n(t,e,o,s,n,i){const l=(0,a.up)("NavBar"),r=(0,a.up)("router-view");return(0,a.wg)(),(0,a.iD)(a.HY,null,[i.loggedIn?((0,a.wg)(),(0,a.j4)(l,{key:0})):(0,a.kq)("",!0),(0,a.Wm)(r)],64)}var i=o(7139);const l=t=>((0,a.dD)("data-v-42fe91d2"),t=t(),(0,a.Cn)(),t),r={class:"navbar navbar-expand-md navbar-dark bg-dark sticky_navbar"},c=["src"],d={key:1,id:"display-name"},u={class:"navbar-nav"},m={class:"nav-item dropdown"},p={class:"dropdown-menu"},h={class:"nav-item"},g={class:"nav-item dropdown"},f={class:"dropdown-menu"},b={class:"nav-item dropdown"},w={class:"dropdown-menu"},_={id:"logout"},y={key:0,class:"justify-content-center d-flex"},v={class:"alert alert-primary fade show w-50 p-2 m-3 d-flex justify-content-center login-alert position-absolute",role:"alert"},k={class:"flex-grow-1"},j=l((()=>(0,a._)("button",{type:"button",class:"btn-close py-1","data-bs-dismiss":"alert","aria-label":"Close"},null,-1)));function C(t,e,o,s,n,l){const C=(0,a.up)("router-link");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("nav",r,[(0,a.Wm)(C,{to:"/settings#profile",class:"user-info"},{default:(0,a.w5)((()=>[(0,a._)("div",null,[t.user?((0,a.wg)(),(0,a.iD)("img",{key:0,id:"profile-picture",class:"circle",src:l.getAuthorPropertyIfDefined("profileImage"),alt:"User profile picture"},null,8,c)):(0,a.kq)("",!0),t.user?((0,a.wg)(),(0,a.iD)("span",d,"@"+(0,i.zw)(l.getAuthorPropertyIfDefined("displayName")),1)):(0,a.kq)("",!0)])])),_:1}),(0,a._)("ul",u,[(0,a._)("li",m,[(0,a.Wm)(C,{to:{name:"homepage"},class:"nav-link"},{default:(0,a.w5)((()=>[(0,a.Uk)("Home")])),_:1}),(0,a._)("ul",p,[(0,a.Wm)(C,{to:"/home/inbox",class:"dropdown-item"},{default:(0,a.w5)((()=>[(0,a.Uk)(" Inbox ")])),_:1}),(0,a.Wm)(C,{to:{name:"manageposts"},class:"dropdown-item"},{default:(0,a.w5)((()=>[(0,a.Uk)(" Manage Posts ")])),_:1})])]),(0,a._)("li",h,[(0,a.Wm)(C,{to:{name:"browsepage"},class:"nav-link"},{default:(0,a.w5)((()=>[(0,a.Uk)(" Browse ")])),_:1})]),(0,a._)("li",g,[(0,a.Wm)(C,{to:"/social",class:"nav-link"},{default:(0,a.w5)((()=>[(0,a.Uk)(" Social ")])),_:1}),(0,a._)("ul",f,[(0,a.Wm)(C,{to:{name:"SocialPage",hash:"#requests"},class:"dropdown-item"},{default:(0,a.w5)((()=>[(0,a.Uk)("Requests")])),_:1}),(0,a.Wm)(C,{to:{name:"SocialPage",hash:"#friends"},class:"dropdown-item"},{default:(0,a.w5)((()=>[(0,a.Uk)("Friends")])),_:1}),(0,a.Wm)(C,{to:{name:"SocialPage",hash:"#followers"},class:"dropdown-item"},{default:(0,a.w5)((()=>[(0,a.Uk)("Followers")])),_:1}),(0,a.Wm)(C,{to:{name:"SocialPage",hash:"#followees"},class:"dropdown-item"},{default:(0,a.w5)((()=>[(0,a.Uk)("Followees")])),_:1})])]),(0,a._)("li",b,[(0,a.Wm)(C,{to:"/Settings",class:"nav-link"},{default:(0,a.w5)((()=>[(0,a.Uk)(" Settings ")])),_:1}),(0,a._)("ul",w,[(0,a.Wm)(C,{to:"/settings#profile",class:"dropdown-item"},{default:(0,a.w5)((()=>[(0,a.Uk)("Profile")])),_:1}),(0,a.Wm)(C,{to:"/settings#preferences",class:"dropdown-item"},{default:(0,a.w5)((()=>[(0,a.Uk)("Preferences")])),_:1})])])]),(0,a._)("span",_,[(0,a._)("button",{class:"btn btn-primary",onClick:e[0]||(e[0]=(...t)=>l.logout&&l.logout(...t))},"Log out")])]),l.alreadyLoggedIn?((0,a.wg)(),(0,a.iD)("div",y,[(0,a._)("div",v,[(0,a._)("div",k,[(0,a.Uk)("You are already logged in. To switch accounts, please "),(0,a._)("a",{onClick:e[1]||(e[1]=(...t)=>l.logout&&l.logout(...t)),href:"#",class:"alert-link"},"logÂ out"),(0,a.Uk)(".")]),j])])):(0,a.kq)("",!0)],64)}o(7658);var P=o(2578);const x=(0,P.Q_)("token",{state:()=>({token:"",isAuthenticated:!1}),actions:{initializeStore(){localStorage.getItem("token")?(this.token=localStorage.getItem("token"),this.isAuthenticated=!0):(this.token="",this.isAuthenticated=!1)},setToken(t){this.token=t,this.isAuthenticated=!0},removeToken(){this.token="",this.isAuthenticated=!1}}}),U=(0,P.Q_)("user",{state:()=>({user:{}}),actions:{initializeStore(){localStorage.getItem("user")?this.user=JSON.parse(localStorage.getItem("user")):this.user={}},setUser(t){console.assert("object"===typeof t,"user must be an object"),this.user=t,localStorage.setItem("user",JSON.stringify(t))},removeUser(){this.user={},localStorage.removeItem("user")},getUser(){return this.initializeStore(),this.user}}});var D=o(4161),S={name:"NavBar",beforeMount(){this.userStore.initializeStore()},methods:{logout(){const t=this.tokenStore;D.Z.post("token/logout").then((t=>{console.log(t)})).catch((t=>{console.log("'Server logout failed"),console.log(t)})).finally((()=>{t.removeToken(),localStorage.removeItem("token"),localStorage.removeItem("user"),U().removeUser(),this.$router.push("/login"),D.Z.defaults.headers.common.Authorization=""}))},getAuthorPropertyIfDefined(t){return this.userStore.user.author?this.userStore.user.author[t]:""}},computed:{...(0,P.Kc)(x,U),...(0,P.rn)(U,["user"]),alreadyLoggedIn(){const t="undefined"!==typeof this.$route&&null!==this.$route;return!(!t||!("hash"in this.$route))&&"#loggedin"===this.$route.hash}}},F=o(89);const M=(0,F.Z)(S,[["render",C],["__scopeId","data-v-42fe91d2"]]);var I=M,N={name:"App",beforeCreate(){const t=x();t.initializeStore();const e=t.token;this.$localNode.defaults.headers.common.Authorization=e?`Token ${e}`:""},components:{NavBar:I},computed:{loggedIn(){return"login"!==this.$route.name&&"signup"!==this.$route.name}}};const T=(0,F.Z)(N,[["render",n]]);var $=T,z=o(2483);const q=t=>((0,a.dD)("data-v-504742a4"),t=t(),(0,a.Cn)(),t),A={class:"manage-posts"},L=q((()=>(0,a._)("h1",null,[(0,a.Uk)("Manage "),(0,a._)("strong",null,"Posts")],-1))),R={class:"list-wrapper"},Z={class:"card-list"},E=q((()=>(0,a._)("span",{class:"footer-totality"},[(0,a._)("button",{type:"button",class:"edit-button btn","data-bs-toggle":"modal","data-bs-target":"#managePost"},[(0,a._)("i",{class:"bi bi-pencil-square"})]),(0,a._)("span",{class:"divider"}),(0,a._)("button",{type:"button",class:"delete-button btn","data-bs-toggle":"modal","data-bs-target":"#deletePrompt"},[(0,a._)("i",{class:"bi bi-trash3-fill"})])],-1))),B={key:0},Y=q((()=>(0,a._)("br",{class:"d-none"},null,-1)));function W(t,e,o,s,n,l){const r=(0,a.up)("Card"),c=(0,a.up)("ManagePostModal"),d=(0,a.up)("SlotModal");return(0,a.wg)(),(0,a.iD)("div",A,[L,(0,a._)("button",{type:"button",class:"add-button btn btn-primary float-start","data-bs-toggle":"modal","data-bs-target":"#managePost",onMouseenter:e[0]||(e[0]=t=>n.selected={post:null,index:-1})}," Make A New Post ",32),(0,a._)("div",R,[(0,a._)("div",Z,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.posts,((t,e)=>((0,a.wg)(),(0,a.j4)(r,{key:t.id,post:t,author:n.author,onMousedown:o=>n.selected={post:t,index:e}},{footer:(0,a.w5)((()=>[E])),_:2},1032,["post","author","onMousedown"])))),128)),0===n.posts.length?((0,a.wg)(),(0,a.iD)("div",B,"You haven't made any posts yet!")):(0,a.kq)("",!0)])]),(0,a.Wm)(c,{existingPost:n.selected.post,onEditPost:e[1]||(e[1]=t=>l.editPost(t)),onCreatePost:e[2]||(e[2]=t=>l.createPost(t))},null,8,["existingPost"]),n.selected.post?((0,a.wg)(),(0,a.j4)(d,{key:0,"modal-name":"deletePrompt"},{titleText:(0,a.w5)((()=>[(0,a.Uk)("Delete "),(0,a._)("strong",null,(0,i.zw)(n.selected.post.title),1)])),body:(0,a.w5)((()=>[(0,a.Uk)("Are you sure you want to delete this post?")])),closeButtonText:(0,a.w5)((()=>[(0,a.Uk)(" No! Take me back! ")])),submitButton:(0,a.w5)((()=>[(0,a._)("button",{type:"submit",class:"btn btn-danger","data-bs-dismiss":"modal",onClick:e[3]||(e[3]=t=>l.delPost())},"Yes, I'm sure")])),openModalButton:(0,a.w5)((()=>[Y])),_:1})):(0,a.kq)("",!0)])}o(541);const H=["src","alt"],O=["src","alt"],K={key:0,id:"username"};function V(t,e,o,s,n,l){const r=(0,a.up)("vue-markdown"),c=(0,a.up)("GenericCard");return(0,a.wg)(),(0,a.j4)(c,{onHovered:e[0]||(e[0]=t=>n.hovered=!0),onUnhover:e[1]||(e[1]=t=>n.hovered=!1),title:o.post.title,anchor:{name:"postpage",params:{aid:this.author._id,pid:this.post._id},query:{hostURL:this.post.id}}},{"card-content":(0,a.w5)((()=>[l.markdownEnabled?((0,a.wg)(),(0,a.j4)(r,{key:0,class:(0,i.C_)(["text-content",{singleton:l.isSingleton}]),source:o.post.content},null,8,["class","source"])):o.post.content?((0,a.wg)(),(0,a.iD)("p",{key:1,class:(0,i.C_)(["text-content",{singleton:l.isSingleton}])},(0,i.zw)(o.post.content),3)):(0,a.kq)("",!0),o.post.image?((0,a.wg)(),(0,a.iD)("img",{key:2,class:(0,i.C_)(["image-content",{singleton:l.isSingleton}]),src:l.imageURL,alt:o.post.description},null,10,H)):(0,a.kq)("",!0)])),footer:(0,a.w5)((()=>[(0,a.WI)(t.$slots,"footer",{},(()=>[(0,a._)("img",{class:(0,i.C_)(["profile-image",{open:n.hovered}]),src:o.author.profileImage,alt:o.author.profileName},null,10,O),n.hovered?((0,a.wg)(),(0,a.iD)("h6",K," @"+(0,i.zw)(o.author.displayName),1)):(0,a.kq)("",!0)]),!0)])),_:3},8,["title","anchor"])}var G=o(4893);const J={id:"card-totality"},Q={key:0,class:"post-title"},X={class:"title-text"},tt={key:0,class:"decoration-accent"};function et(t,e,o,s,n,l){return(0,a.wg)(),(0,a.iD)("div",J,[o.title?((0,a.wg)(),(0,a.iD)("div",Q,[(0,a._)("h3",X,(0,i.zw)(o.title),1)])):(0,a.kq)("",!0),(0,a._)("div",{class:"card-body card",onMouseover:e[1]||(e[1]=(...t)=>l.enableHover&&l.enableHover(...t)),onMouseleave:e[2]||(e[2]=(...t)=>l.disableHover&&l.disableHover(...t))},[(0,a._)("div",{class:"content-container",onClick:e[0]||(e[0]=t=>l.goTo(o.anchor))},[o.title?((0,a.wg)(),(0,a.iD)("div",tt)):(0,a.kq)("",!0),(0,a._)("div",{class:(0,i.C_)(["scrim",{open:n.hovered}])},null,2),(0,a.WI)(t.$slots,"card-content",{},(()=>[(0,a.Uk)(" Placeholder Content :3 ")]),!0)]),(0,a._)("div",{class:(0,i.C_)([{open:n.hovered},"footer card-footer text-muted"])},[(0,a.WI)(t.$slots,"footer",{class:(0,i.C_)({open:n.hovered})},void 0,!0)],2)],32)])}var ot={emits:["hovered","unhover"],props:["title","anchor"],methods:{enableHover(){this.hovered=!0,this.$emit("hovered")},disableHover(){this.hovered=!1,this.$emit("unhover")},goTo(t){t?this.$router.push(t):console.log("No anchor to go to!")}},data(){return{hovered:!1}}};const st=(0,F.Z)(ot,[["render",et],["__scopeId","data-v-f99c4800"]]);var at=st,nt={components:{VueMarkdown:G.Z,GenericCard:at},props:["author","post"],data(){return{hovered:!1}},computed:{markdownEnabled(){return this.post.contentType.includes("text/markdown")},imageURL(){return`${this.post.id}/image`},isSingleton(){return!!this.post.image&&!this.post.content||!this.post.image&&!!this.post.content}}};const it=(0,F.Z)(nt,[["render",V],["__scopeId","data-v-49d73ada"]]);var lt=it;const rt=["id","aria-labelledby"],ct={class:"modal-content"},dt={class:"modal-header"},ut=["id"],mt={class:"modal-body text-start"},pt={class:"modal-footer"},ht=["data-bs-target"];function gt(t,e,o,n,l,r){return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("div",{class:(0,i.C_)(["modal fade",o.sizing]),tabindex:"-1",id:this.modalName,ref:this.modalName,"aria-labelledby":this.modalName+"Label","aria-hidden":"true"},[(0,a._)("div",{class:(0,i.C_)(["modal-dialog",o.justification])},[(0,a._)("div",ct,[(0,a._)("div",dt,[(0,a._)("h5",{class:"modal-title",id:this.modalName+"Label"},[(0,a.WI)(t.$slots,"titleText",{},(()=>[(0,a.Uk)("Modal title")]))],8,ut),(0,a._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:e[0]||(e[0]=(...t)=>r.clearFields&&r.clearFields(...t)),ref:"closeModalButton"},null,512)]),(0,a._)("div",mt,[(0,a.wy)((0,a._)("div",{class:"alert alert-danger"},(0,i.zw)(l.errorMsg),513),[[s.F8,l.errorMsg]]),(0,a.WI)(t.$slots,"body",{submitMethod:r.submitForm})]),(0,a._)("div",pt,[(0,a._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal",onClick:e[1]||(e[1]=(...t)=>r.clearFields&&r.clearFields(...t))},[(0,a.WI)(t.$slots,"closeButtonText",{},(()=>[(0,a.Uk)("Close")]))]),(0,a.WI)(t.$slots,"submitButton")])])],2)],10,rt),(0,a.WI)(t.$slots,"openModalButton",{},(()=>[(0,a._)("button",{type:"button",class:"btn btn-primary","data-bs-toggle":"modal","data-bs-target":"#"+this.modalName}," Open modal ",8,ht)]))],64)}var ft={name:"SlotModal",emits:["alert","submitMyForm","clearFields"],props:{modalName:String,sizing:{default:null,type:String},justification:{default:null,type:String}},data(){return{errorMsg:""}},methods:{submitForm(t){console.log("submitting form"),this.$emit("submitMyForm",{done:()=>{this.clearFields(),this.errorMsg="",this.closeModal()},e:t=>{this.errorMsg=t}})},clearFields(){this.$emit("clearFields")},closeModal(){this.$refs.closeModalButton.click()}}};const bt=(0,F.Z)(ft,[["render",gt]]);var wt=bt;const _t={class:"modal fade bd-example-modal-lg",ref:"managePost",id:"managePost",tabindex:"-1",role:"dialog","aria-labelledby":":3","aria-hidden":"true"},yt={class:"modal-dialog modal-xl modal-dialog-centered"},vt={class:"modal-content"},kt={class:"modal-header"},jt={class:"modal-title"},Ct=(0,a._)("span",{"aria-hidden":"true"},null,-1),Pt=[Ct],xt={class:"modal-body"},Ut={class:"form-group"},Dt=(0,a._)("label",{for:"post-title",class:"d-flex justify-content-left","aria-autocomplete":"off"},"Post Title",-1),St={class:"d-flex justify-content-center form-text text-muted"},Ft={class:"row"},Mt={class:"col"},It={class:"form-check form-check-inline"},Nt=(0,a._)("label",{for:"privacy-private",class:"form-check-label"},"Private",-1),Tt={class:"form-check form-check-inline"},$t=(0,a._)("label",{for:"privacy-friends",class:"form-check-label"},"Friends",-1),zt={class:"form-check form-check-inline"},qt=(0,a._)("label",{for:"privacy-public",class:"form-check-label"},"Public",-1),At={class:"col"},Lt={class:"form-check form-switch d-flex justify-content-center gap-3 mb-2"},Rt=(0,a._)("label",{class:"form-check-label",for:"markdown-toggle"},[(0,a._)("i",{class:"bi-markdown-fill"}),(0,a.Uk)(" Use Markdown ")],-1),Zt={class:"modal-footer"},Et={key:0,class:"error-container"},Bt=(0,a._)("i",{class:"bi bi-send-fill"},null,-1);function Yt(t,e,o,n,l,r){const c=(0,a.up)("ImagePostBody");return(0,a.wg)(),(0,a.iD)("div",_t,[(0,a._)("div",yt,[(0,a._)("div",vt,[(0,a._)("div",kt,[(0,a._)("h5",jt,[(0,a.Uk)((0,i.zw)(r.modalTitleMode)+" ",1),(0,a._)("strong",null,(0,i.zw)(r.modalTitlePostName),1)]),(0,a._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal",ref:"Close","aria-label":"Close",onMousedown:e[0]||(e[0]=e=>t.$emit("dismiss"))},Pt,544)]),(0,a._)("div",xt,[(0,a._)("form",null,[(0,a._)("div",Ut,[Dt,(0,a.wy)((0,a._)("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>l.post.title=t),type:"text",class:"form-control",id:"post-title","aria-describedby":"postTitle",placeholder:"Write a title for your post"},null,512),[[s.nr,l.post.title]]),(0,a._)("small",St,(0,i.zw)(l.post.title.length)+"/"+(0,i.zw)(r.titleMaxLength),1)]),(0,a._)("div",Ft,[(0,a._)("div",Mt,[(0,a._)("div",It,[(0,a.wy)((0,a._)("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>l.post.visibility=t),id:"privacy-private",class:"form-check-input",type:"radio",value:"PRIVATE"},null,512),[[s.G2,l.post.visibility]]),Nt]),(0,a._)("div",Tt,[(0,a.wy)((0,a._)("input",{"onUpdate:modelValue":e[3]||(e[3]=t=>l.post.visibility=t),id:"privacy-friends",class:"form-check-input",type:"radio",value:"FRIENDS"},null,512),[[s.G2,l.post.visibility]]),$t]),(0,a._)("div",zt,[(0,a.wy)((0,a._)("input",{"onUpdate:modelValue":e[4]||(e[4]=t=>l.post.visibility=t),id:"privacy-public",class:"form-check-input",type:"radio",value:"PUBLIC"},null,512),[[s.G2,l.post.visibility]]),qt])]),(0,a._)("div",At,[(0,a._)("div",Lt,[(0,a.wy)((0,a._)("input",{"onUpdate:modelValue":e[5]||(e[5]=t=>l.markDownEnabled=t),onChange:e[6]||(e[6]=(...t)=>r.setText&&r.setText(...t)),id:"markdown-toggle",class:"form-check-input pr-2",type:"checkbox"},null,544),[[s.e8,l.markDownEnabled]]),Rt])])]),(0,a.wy)((0,a._)("textarea",{"onUpdate:modelValue":e[7]||(e[7]=t=>l.post.content=t),onInput:e[8]||(e[8]=(...t)=>r.setText&&r.setText(...t)),class:"text-input form-control",placeholder:"Give your post some body text"},null,544),[[s.nr,l.post.content]]),(0,a.Wm)(c,{class:"image-upload",image:r.imageDataURL,onImageUploaded:e[9]||(e[9]=t=>r.setImage(t)),onImageClear:e[10]||(e[10]=t=>r.setImage(null))},null,8,["image"]),(0,a.wy)((0,a._)("input",{"onUpdate:modelValue":e[11]||(e[11]=t=>l.post.description=t),class:"text-input form-control mb-3",placeholder:"Write an (optional) description here"},null,512),[[s.nr,l.post.description]]),(0,a._)("div",Zt,[l.invalidSubmit?((0,a.wg)(),(0,a.iD)("div",Et,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(r.errors,(t=>((0,a.wg)(),(0,a.iD)("small",{key:t,class:(0,i.C_)(["error-message text-danger",{visible:l.invalidSubmit}])},(0,i.zw)(t+" "),3)))),128))])):(0,a.kq)("",!0),(0,a._)("button",{type:"button",class:"btn btn-outline-primary",onMousedown:e[12]||(e[12]=(...t)=>r.submitPost&&r.submitPost(...t))},[(0,a.Uk)("Post "),Bt],32)])])])])])],512)}o(2801),o(1295);const Wt=t=>((0,a.dD)("data-v-348076fb"),t=t(),(0,a.Cn)(),t),Ht={id:"makeImagePostBody"},Ot={key:0,class:"image-upload-wrapper image-container"},Kt=Wt((()=>(0,a._)("i",{class:"bi bi-upload"},null,-1))),Vt=Wt((()=>(0,a._)("small",null,"Upload an image",-1))),Gt=[Kt,Vt],Jt={key:1,class:"image-container"},Qt=["src"],Xt=Wt((()=>(0,a._)("i",{class:"bi bi-x"},null,-1))),te=[Xt];function ee(t,e,o,s,n,l){return(0,a.wg)(),(0,a.iD)("div",Ht,[l.imageUploaded?((0,a.wg)(),(0,a.iD)("div",Jt,[(0,a._)("img",{class:"image-upload img-fluid",src:n.imageSrc},null,8,Qt),(0,a._)("button",{type:"button",class:"btn image-cancel",onClick:e[3]||(e[3]=(...t)=>l.clearImage&&l.clearImage(...t))},te)])):((0,a.wg)(),(0,a.iD)("div",Ot,[(0,a._)("div",{class:(0,i.C_)(["wrapper-text",{hovered:n.hovered}])},Gt,2),(0,a._)("input",{type:"file",accept:"image/jpeg,image/png",class:"image-container form-control",onMouseenter:e[0]||(e[0]=t=>n.hovered=!0),onMouseleave:e[1]||(e[1]=t=>n.hovered=!1),onChange:e[2]||(e[2]=t=>l.encodeFileBase64(t.target.files[0]))},null,32)]))])}var oe={props:["image"],emits:["image-uploaded","image-clear"],data(){return{imageSrc:null,hovered:!1}},computed:{imageUploaded(){return null!==this.imageSrc},imageEncoded(){return this.imageUploaded?this.imageSrc.replace("data:","").replace(/^.+,/,""):null},imageMime(){return this.imageUploaded?this.imageSrc.replace("data:","").match(/^.+,/)[0].replace(",",""):null}},watch:{image:{immediate:!0,handler(t){this.imageSrc=t}}},methods:{encodeFileBase64(t){console.log(t),this.blobToBase64(t)},encodeURLBase64(t){D.Z.get(t,{responseType:"blob"}).then((t=>{console.log("Got blob!"),this.blobToBase64(t.data)})).catch((t=>{this.imageSrc=null,console.log("The image provided from server couldn't be loaded"),console.log(t)}))},blobToBase64(t){const e=new FileReader;e.onloadend=()=>{this.imageSrc=e.result,this.emitImageStatus()},e.readAsDataURL(t)},clearImage(){this.$emit("imageClear"),this.imageSrc=null},emitImageStatus(){this.$emit("imageUploaded",{source:this.imageSrc,mime:this.imageMime,raw64:this.imageEncoded})}}};const se=(0,F.Z)(oe,[["render",ee],["__scopeId","data-v-348076fb"]]);var ae=se,ne={components:{ImagePostBody:ae},props:["existingPost"],emits:["createPost","editPost","dismiss"],data(){return{post:null,markDownEnabled:!1,invalidSubmit:!1}},computed:{modalTitleMode(){return this.existingPost?"Edit":"Make a"},modalTitlePostName(){return this.existingPost?this.existingPost.title:"New Post"},titleMaxLength(){return 30},errors(){const t=[];return(this.post.title.length>this.titleMaxLength||0===this.post.title.length)&&t.push("Your post needs a title between 1 and 30 characters!"),this.post.image||this.post.content||t.push("You need text and/or image content!"),t},imageDataURL(){if(this.existingPost&&this.post.image){const t=this.post.contentType.find((t=>t.includes("image")));return String.raw`data:${t},${this.post.image}`}return null}},created(){this.post=this.getTemplate()},mounted(){const t=this.$refs.managePost;t.addEventListener("show.bs.modal",(()=>{this.existingPost?(this.post=structuredClone(this.existingPost),this.post.contentType=this.post.contentType.split(","),this.post.contentType.includes("text/markdown")&&(this.markDownEnabled=!0)):this.post=this.getTemplate()})),t.addEventListener("hidden.bs.modal",(()=>{this.post=this.getTemplate()}))},methods:{setText(){this.sanitizeContentTypes("text"),this.appendMime(this.markDownEnabled?"text/markdown":"text/plain")},setImage(t){this.sanitizeContentTypes("image"),t?(this.post.image=t.raw64,this.appendMime(t.mime)):this.post.image=null},getTemplate(){return{type:"post",title:"",source:"http://placeholderurlfornow.yummy/",origin:"http://anotherplaceholderurlfornow.yucky/",description:"",contentType:[],content:"",image:null,count:0,unlisted:!1,visibility:"PUBLIC",author:this.author,comments:null,id:null,_id:null,published:"2023-03-01T21:18:38.908794Z"}},appendMime(t){this.sanitizeContentTypes(t),t&&this.post.contentType.push(t)},sanitizeContentTypes(t){this.post.contentType=this.post.contentType.filter((e=>!e.includes(t)))},submitPost(){console.log("emittting!"),0===this.errors.length?(this.post.contentType=this.post.contentType.toString(),console.table(this.post),this.$refs.Close.click(),this.existingPost?(this.$emit("editPost",this.post),this.$emit("dismiss")):(this.$emit("createPost",this.post),this.$emit("dismiss"))):this.invalidSubmit=!0}}};const ie=(0,F.Z)(ne,[["render",Yt]]);var le=ie,re=o(536),ce={components:{ManagePostModal:le,Card:lt,SlotModal:wt},data(){return{posts:[],selected:{post:null,index:-1},showPrompt:!1,author:null}},computed:{...(0,P.Kc)(U),udEndPoint(){if(this.selected.post){const t=`${this.post.id}/`;return t}return null},crEndPoint(){const t=`${this.author.id}/posts/`;return t}},methods:{getAuthorFromStore(){const t=this.userStore;t.initializeStore(),this.author=t.user.author},createPost(t){t.author=this.author,t._id=(0,re.Z)(),t.id=this.author.id+"/posts/"+t._id,t.comments=t.id+"/comments",console.log(t),this.$localNode.post(this.crEndPoint,t).then((()=>{this.posts.unshift(t)})).catch((()=>{alert("Couldn't add the post!")})),this.showManage=!1},getPosts(){this.$localNode.get(this.crEndPoint).then((t=>{this.posts=t.data})).catch((()=>{alert("Couldn't get any posts!")}))},editPost(t){this.$localNode.post(this.udEndPoint,t).then((()=>{this.posts[this.selected.index]=t})).catch((()=>{alert("Couldn't edit the post!")})),this.showManage=!1},delPost(){D.Z["delete"](this.udEndPoint).then((()=>{this.posts.splice(this.selected.index,1)})).catch((()=>{alert("Couldn't delete the post!")}))}},mounted(){this.getAuthorFromStore(),this.getPosts()}};const de=(0,F.Z)(ce,[["render",W],["__scopeId","data-v-504742a4"]]);var ue=de;const me=t=>((0,a.dD)("data-v-9179931c"),t=t(),(0,a.Cn)(),t),pe={class:"browse-posts"},he=me((()=>(0,a._)("h1",{class:"text-left"},[(0,a.Uk)("Browse "),(0,a._)("strong",null,"Posts")],-1))),ge={class:"filetypes d-flex justify-content-center"},fe=me((()=>(0,a._)("i",{class:"bi bi-blockquote-left d-block"},null,-1))),be=me((()=>(0,a._)("i",{class:"bi bi-markdown-fill d-block"},null,-1))),we=me((()=>(0,a._)("i",{class:"bi bi-image-fill d-block"},null,-1))),_e={class:"reverse d-flex justify-content-center mt-3"},ye=me((()=>(0,a._)("i",{class:"bi bi-calendar"},null,-1))),ve=me((()=>(0,a._)("button",{type:"button",class:"btn btn-outline-primary open-filter-modal d-flex justify-self-start","data-bs-toggle":"modal","data-bs-target":"#filterModal"},[(0,a._)("i",{class:"bi bi-funnel-fill"}),(0,a.Uk)(" Filter Posts")],-1))),ke={key:1,class:"all-posts"},je={class:"text-primary mx-5 px-2"},Ce=me((()=>(0,a._)("hr",{class:"date-header bg-secondary"},null,-1))),Pe={class:"card-list pb-5"};function xe(t,e,o,s,n,l){const r=(0,a.up)("SlotModal"),c=(0,a.up)("Card");return(0,a.wg)(),(0,a.iD)("div",pe,[he,n.loading?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(r,{key:0,"modal-name":"filterModal"},{titleText:(0,a.w5)((()=>[(0,a.Uk)("Filter Posts")])),body:(0,a.w5)((()=>[(0,a._)("div",ge,[(0,a._)("button",{onClick:e[0]||(e[0]=t=>l.toggle("plain")),class:(0,i.C_)(["btn mx-2 filter-button",n.active.plain?"btn-primary":"btn-outline-secondary"])},[fe,(0,a.Uk)(" Plaintext ")],2),(0,a._)("button",{onClick:e[1]||(e[1]=t=>l.toggle("markdown")),class:(0,i.C_)(["btn mx-2 filter-button",n.active.markdown?"btn-primary":"btn-outline-secondary"])},[be,(0,a.Uk)(" Markdown ")],2),(0,a._)("button",{onClick:e[2]||(e[2]=t=>l.toggle("image")),class:(0,i.C_)(["btn mx-2 filter-button",n.active.image?"btn-primary":"btn-outline-secondary"])},[we,(0,a.Uk)(" Image ")],2)]),(0,a._)("div",_e,[(0,a._)("button",{onClick:e[3]||(e[3]=(...t)=>l.reversePosts&&l.reversePosts(...t)),class:"btn btrn primary"},[ye,(0,a._)("i",{class:(0,i.C_)(["bi",n.reverse?"bi-arrow-up":"bi-arrow-down"])},null,2)])])])),closeButtonText:(0,a.w5)((()=>[(0,a.Uk)("Done")])),openModalButton:(0,a.w5)((()=>[ve])),_:1})),n.loading?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",ke,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(Object.entries(l.postSections),(([t,e])=>((0,a.wg)(),(0,a.iD)("div",{key:t},[(0,a._)("h3",je,(0,i.zw)(t===l.today?"Today":t),1),Ce,(0,a._)("div",Pe,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e,(t=>((0,a.wg)(),(0,a.j4)(c,{key:t.id,author:t.author,post:t},null,8,["author","post"])))),128))])])))),128))]))])}var Ue=o(6797),De=o.n(Ue);const Se="YYYY-MM-DD";var Fe={name:"BrowsePage",components:{Card:lt,SlotModal:wt},data(){return{allPosts:[],author:null,loading:!0,active:{plain:!0,markdown:!0,image:!0},reverse:!1}},computed:{...(0,P.Kc)(U),postSections(){const t=this.groupPostsByDate(this.filteredPosts);return t},today(){return De()().format(Se)},filteredPosts(){return this.allPosts.filter((t=>this.matchesActive(t)))}},methods:{toggle(t){this.active[t]=!this.active[t]},reversePosts(){this.reverse=!this.reverse,this.allPosts=this.allPosts.reverse()},matchesActive(t){for(const[e,o]of Object.entries(this.active))if(!o&&t.contentType.includes(e))return!1;return!0},getPosts(){this.$localNode.get("/posts/").then((t=>{this.allPosts=t.data,this.loading=!1})).catch((t=>{console.log(t)}))},getAuthorFromStore(){const t=this.userStore;t.initializeStore(),this.author=t.user.author},groupPostsByDate(t){return t.reduce(((t,e)=>{const o=De()(e.published).format(Se),s=t[o]??[];return{...t,[o]:[...s,e]}}),{})}},mounted(){this.getAuthorFromStore(),this.getPosts()}};const Me=(0,F.Z)(Fe,[["render",xe],["__scopeId","data-v-9179931c"]]);var Ie=Me;const Ne={class:"d-flex min-vh-100"},Te={class:"form-group authForm"},$e=(0,a._)("h1",null,"Login",-1),ze={key:0,class:"alert alert-danger",role:"alert"},qe={class:"input-group mb-3"},Ae=(0,a._)("div",{class:"input-group-prepend"},[(0,a._)("span",{class:"input-group-text",id:"username-icon"},"ðŸ‘¤")],-1),Le={class:"input-group mb-3"},Re=(0,a._)("div",{class:"input-group-prepend"},[(0,a._)("span",{class:"input-group-text",id:"password-icon"},"ðŸ”’")],-1),Ze=(0,a._)("button",{class:"btn btn-primary",type:"submit"},"Login",-1),Ee=(0,a._)("br",null,null,-1);function Be(t,e,o,n,l,r){const c=(0,a.up)("router-link");return(0,a.wg)(),(0,a.iD)("div",Ne,[(0,a._)("div",Te,[$e,(0,a._)("form",{onSubmit:e[2]||(e[2]=(0,s.iM)(((...t)=>r.submitForm&&r.submitForm(...t)),["prevent"]))},[l.authError?((0,a.wg)(),(0,a.iD)("div",ze,(0,i.zw)(l.authError),1)):(0,a.kq)("",!0),(0,a._)("div",qe,[Ae,(0,a.wy)((0,a._)("input",{class:"form-control",type:"text",name:"username","onUpdate:modelValue":e[0]||(e[0]=t=>l.username=t),placeholder:"Username"},null,512),[[s.nr,l.username]])]),(0,a._)("div",Le,[Re,(0,a.wy)((0,a._)("input",{class:"form-control",type:"password",name:"password","onUpdate:modelValue":e[1]||(e[1]=t=>l.password=t),placeholder:"Password"},null,512),[[s.nr,l.password]])]),Ze],32),Ee,(0,a.Uk)("Don't have an account? "),(0,a.Wm)(c,{to:"/signup"},{default:(0,a.w5)((()=>[(0,a.Uk)("Sign up")])),_:1})])])}function Ye(t,e){if("response"in t){const o=t.response;if(400===o.status){const t=o.data,s=Object.keys(t).reduce(((o,s)=>o.concat(e[s]+": "+t[s].join("\n"))),[]);return s.join("\n\n")}return o.statusText}return t.message}var We={name:"LogIn",data(){return{username:"",password:"",authError:""}},methods:{submitForm(t){const e={username:this.username,password:this.password};null!==localStorage.getItem("token")&&(localStorage.removeItem("token"),console.log("Removed existing token")),this.$localNode.post("token/login",e).then((t=>{console.log(t);const e=t.data.auth_token,o=x();o.setToken(e),this.$localNode.defaults.headers.common.Authorization=`Token ${e}`,localStorage.setItem("token",e),this.$localNode.get("users/me").then((t=>{this.authError="";const e=t.data,o=this.userStore;o.setUser(e),this.$router.push("/home")})).catch((t=>{console.log(t)}))})).catch((t=>{console.log(t);const e={username:"Username",password:"Password",non_field_errors:"Error"},o=Ye(t,e);this.authError=o}))}},computed:{...(0,P.Kc)(x,U)}};const He=(0,F.Z)(We,[["render",Be]]);var Oe=He;const Ke={class:"d-flex min-vh-100"},Ve={class:"form-group authForm"},Ge=(0,a._)("h1",null,"Sign Up",-1),Je={key:0,class:"alert alert-danger",role:"alert"},Qe={class:"input-group mb-3"},Xe=(0,a._)("div",{class:"input-group-prepend"},[(0,a._)("span",{class:"input-group-text",id:"username-icon"},"ðŸ‘¤")],-1),to={class:"input-group mb-3"},eo=(0,a._)("div",{class:"input-group-prepend"},[(0,a._)("span",{class:"input-group-text",id:"password-icon"},"ðŸ”’")],-1),oo={class:"input-group mb-3"},so=(0,a._)("div",{class:"input-group-prepend"},[(0,a._)("span",{class:"input-group-text",id:"password-icon"},"ðŸ”")],-1),ao=(0,a._)("button",{class:"btn btn-primary",type:"submit"},"Sign Up",-1),no=(0,a._)("br",null,null,-1);function io(t,e,o,n,l,r){const c=(0,a.up)("router-link");return(0,a.wg)(),(0,a.iD)("div",Ke,[(0,a._)("div",Ve,[Ge,(0,a._)("form",{onSubmit:e[3]||(e[3]=(0,s.iM)(((...t)=>r.submitForm&&r.submitForm(...t)),["prevent"]))},[l.authError?((0,a.wg)(),(0,a.iD)("div",Je,(0,i.zw)(l.authError),1)):(0,a.kq)("",!0),(0,a._)("div",Qe,[Xe,(0,a.wy)((0,a._)("input",{class:"form-control",type:"text",name:"username","onUpdate:modelValue":e[0]||(e[0]=t=>l.username=t),placeholder:"Username"},null,512),[[s.nr,l.username]])]),(0,a._)("div",to,[eo,(0,a.wy)((0,a._)("input",{class:"form-control",type:"password",name:"password","onUpdate:modelValue":e[1]||(e[1]=t=>l.password=t),placeholder:"Password"},null,512),[[s.nr,l.password]])]),(0,a._)("div",oo,[so,(0,a.wy)((0,a._)("input",{class:"form-control",type:"password",name:"password","onUpdate:modelValue":e[2]||(e[2]=t=>l.confirmPassword=t),placeholder:"Confirm password"},null,512),[[s.nr,l.confirmPassword]])]),ao],32),no,(0,a.Uk)("Already have an account? "),(0,a.Wm)(c,{to:"/login"},{default:(0,a.w5)((()=>[(0,a.Uk)("Log in")])),_:1})])])}var lo={name:"sign-up",data(){return{username:"",password:"",confirmPassword:"",authError:""}},methods:{submitForm(t){const e={username:this.username,password:this.password};this.password!==this.confirmPassword?(this.authError="Passwords do not match.",this.password="",this.confirmPassword=""):(null!==localStorage.getItem("token")&&(localStorage.removeItem("token"),console.log("Removed existing token")),this.$localNode.post("/users/",e).then((t=>{this.$router.push("/login"),console.log(t)})).catch((t=>{console.log(t);const e={username:"Username",password:"Password",non_field_errors:"Error"},o=Ye(t,e);this.authError=o})))}}};const ro=(0,F.Z)(lo,[["render",io]]);var co=ro;const uo=t=>((0,a.dD)("data-v-a455a2a6"),t=t(),(0,a.Cn)(),t),mo={class:"social"},po=uo((()=>(0,a._)("br",null,null,-1))),ho=uo((()=>(0,a._)("br",null,null,-1))),go=uo((()=>(0,a._)("h3",{style:{"text-align":"left","margin-left":"12%"}},"My node's authors",-1))),fo={class:"authors"},bo=uo((()=>(0,a._)("br",null,null,-1))),wo=uo((()=>(0,a._)("br",null,null,-1))),_o=uo((()=>(0,a._)("h3",{style:{"text-align":"left","margin-left":"12%"}},"Other node's authors (Team 7)",-1))),yo={class:"authors"},vo=uo((()=>(0,a._)("br",null,null,-1))),ko=uo((()=>(0,a._)("br",null,null,-1))),jo=uo((()=>(0,a._)("h3",{style:{"text-align":"left","margin-left":"12%"}},"Other node's authors (Team 10)",-1))),Co={class:"authors"};function Po(t,e,o,s,n,i){const l=(0,a.up)("MyRequests"),r=(0,a.up)("MyFriends"),c=(0,a.up)("MyFollowers"),d=(0,a.up)("MyFollowees"),u=(0,a.up)("author_card");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("div",mo,[(0,a.Wm)(l,{onUpdateFollowers:i.updateFollowers},{default:(0,a.w5)((()=>[(0,a.Uk)("Test Requests")])),_:1},8,["onUpdateFollowers"]),(0,a.Wm)(r,{ref:"friends"},{default:(0,a.w5)((()=>[(0,a.Uk)("Test Friends")])),_:1},512),(0,a.Wm)(c,{ref:"followers"},{default:(0,a.w5)((()=>[(0,a.Uk)("Test Followers")])),_:1},512),(0,a.Wm)(d,null,{default:(0,a.w5)((()=>[(0,a.Uk)("Test Followees")])),_:1})]),po,ho,go,(0,a._)("div",fo,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.authors.items,(t=>((0,a.wg)(),(0,a.iD)("div",{key:t.id},[(0,a.Wm)(u,{author:t},null,8,["author"])])))),128))]),bo,wo,_o,(0,a._)("div",yo,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.authors_remote2.items,(t=>((0,a.wg)(),(0,a.iD)("div",{key:t.id},[(0,a.Wm)(u,{author:t},null,8,["author"])])))),128))]),vo,ko,jo,(0,a._)("div",Co,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.authors_remote.items,(t=>((0,a.wg)(),(0,a.iD)("div",{key:t.id},[(0,a.Wm)(u,{author:t},null,8,["author"])])))),128))])],64)}const xo={class:"list-of-profiles",id:"friends"},Uo=(0,a._)("h1",null,[(0,a.Uk)(" Your "),(0,a._)("br"),(0,a.Uk)(" Friends")],-1),Do=["src"];function So(t,e,o,s,n,l){return(0,a.wg)(),(0,a.iD)("div",xo,[Uo,(0,a._)("ul",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.friends.items,(t=>((0,a.wg)(),(0,a.iD)("li",{key:t.url},[t?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[(0,a._)("img",{src:t.profileImage},null,8,Do),(0,a._)("p",null,(0,i.zw)(l.displayUsername(t.displayName)),1)],64)):(0,a.kq)("",!0)])))),128))])])}var Fo={data(){return{friends:[""],author:null}},computed:{...(0,P.Kc)(U)},methods:{displayUsername(t){return"@"+t},getAuthorFromStore(){const t=this.userStore;t.initializeStore(),this.author=t.user.author},getFriends(){D.Z.get(`/authors/${this.author._id}/friends/`).then((t=>{this.friends=t.data,console.log(this.friends)})).catch((t=>{console.log("Couldn't get friends!"),console.log(t)}))}},mounted(){this.getAuthorFromStore(),this.getFriends()}};const Mo=(0,F.Z)(Fo,[["render",So]]);var Io=Mo;const No={class:"list-of-profiles",id:"requests"},To=(0,a._)("h1",null,[(0,a.Uk)(" Your "),(0,a._)("br"),(0,a.Uk)(" Requests")],-1),$o=["src"],zo=["onClick"],qo=["onClick"];function Ao(t,e,o,s,n,l){return(0,a.wg)(),(0,a.iD)("div",No,[To,(0,a._)("ul",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.requests,(t=>((0,a.wg)(),(0,a.iD)("li",{key:t.url},[t?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[(0,a._)("img",{src:t.actor.profileImage},null,8,$o),(0,a._)("p",null,(0,i.zw)(l.displayUsername(t.actor.displayName)),1),(0,a._)("span",null,[(0,a._)("button",{onClick:e=>l.handleRequest("Accepted",t.actor),id:"accept-button",class:"btn btn-success"},"Accept",8,zo),(0,a._)("button",{onClick:e=>l.handleRequest("Declined",t.actor),id:"decline-button",class:"btn btn-danger"},"Decline",8,qo)])],64)):(0,a.kq)("",!0)])))),128))])])}var Lo={emits:["updateFollowers"],data(){return{inbox:[""],requests:[""],actor:null,object:null,pendingRequests:[""],updatedRequests:[""],followFormat:{type:"Follow",actor:this.actor,object:this.object}}},computed:{...(0,P.Kc)(U)},methods:{getTestFollowerAuthor(){D.Z.get("/authors/38f57b34-f1ff-4f3b-9e81-2be731a14a0e/").then((t=>{this.actor=t.data,this.testSendingRequest()})).catch((t=>{console.log(t)}))},testSendingRequest(){this.followFormat.actor=this.actor,this.followFormat.object=this.object,D.Z.post("/authors/07e7050f-4bf6-4249-8cde-6d254bddce9e/inbox/",this.followFormat).catch((t=>{console.log("Couldn't send test request"),console.log(t)}))},testExampleRequest(){D.Z.get("/authors/07e7050f-4bf6-4249-8cde-6d254bddce9e/").then((t=>{this.object=t.data,this.getTestFollowerAuthor()})).then(console.log(this.actor)).catch((t=>{console.log(t)}))},displayUsername(t){return"@"+t},getIdFromUrl(t){return t.split("/")[5]},handleRequest(t,e){this.actor=e,this.updateRequestInformation(t)},updateRequestInformation(t){this.followFormat.state=t,this.followFormat.actor=this.actor,this.followFormat.object=this.object,D.Z.post(`/authors/${this.object._id}/inbox/`,this.followFormat).then((()=>{this.requests=this.requests.filter((t=>t.actor.url!==this.actor.url)),console.table(this.requests),this.$emit("updateFollowers")})).catch((t=>{console.log("Couldn't update your request!"),console.log(t)}))},getAuthorFromStore(){const t=this.userStore;t.initializeStore(),this.object=t.user.author},getRequests(){D.Z.get(`/authors/${this.object._id}/inbox/`).then((t=>{this.inbox=t.data,this.pendingRequests=this.inbox.items.filter((t=>"Follow"===t.type)).filter((t=>void 0===t.state)),this.updatedRequests=this.inbox.items.filter((t=>"Follow"===t.type)).filter((t=>void 0!==t.state)),this.requests=this.pendingRequests.filter((t=>!this.updatedRequests.some((e=>t.actor.url===e.actor.url))))})).catch((t=>{console.log("Couldn't get inbox or requests!"),console.log(t)}))}},mounted(){this.getAuthorFromStore(),this.getRequests()}};const Ro=(0,F.Z)(Lo,[["render",Ao]]);var Zo=Ro;const Eo={class:"list-of-profiles",id:"followers"},Bo=(0,a._)("h1",{id:"followers"},[(0,a.Uk)(" Your "),(0,a._)("br"),(0,a.Uk)(" Followers")],-1),Yo=["src"];function Wo(t,e,o,s,n,l){return(0,a.wg)(),(0,a.iD)("div",Eo,[Bo,(0,a._)("ul",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.followers.items,(t=>((0,a.wg)(),(0,a.iD)("li",{key:t.url},[t?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[(0,a._)("img",{src:t.profileImage},null,8,Yo),(0,a._)("p",null,(0,i.zw)(l.displayUsername(t.displayName)),1)],64)):(0,a.kq)("",!0)])))),128))])])}var Ho={data(){return{followers:[""],author:null}},computed:{...(0,P.Kc)(U)},methods:{displayUsername(t){return"@"+t},getAuthorFromStore(){const t=this.userStore;t.initializeStore(),this.author=t.user.author},getFollowers(){D.Z.get(`/authors/${this.author._id}/followers/`).then((t=>{this.followers=t.data,console.log(this.followers)})).catch((t=>{console.log("Couldn't get followers!"),console.log(t)}))}},mounted(){this.getAuthorFromStore(),this.getFollowers()}};const Oo=(0,F.Z)(Ho,[["render",Wo]]);var Ko=Oo;const Vo={class:"list-of-profiles",id:"followees"},Go=(0,a._)("h1",null,[(0,a.Uk)(" Your "),(0,a._)("br"),(0,a.Uk)(" Followees")],-1),Jo=["src"];function Qo(t,e,o,s,n,l){return(0,a.wg)(),(0,a.iD)("div",Vo,[Go,(0,a._)("ul",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.followees.items,(t=>((0,a.wg)(),(0,a.iD)("li",{key:t.url},[t?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[(0,a._)("img",{src:t.profileImage},null,8,Jo),(0,a._)("p",null,(0,i.zw)(l.displayUsername(t.displayName)),1)],64)):(0,a.kq)("",!0)])))),128))])])}var Xo={data(){return{followees:[""],author:null}},computed:{...(0,P.Kc)(U)},methods:{displayUsername(t){return"@"+t},getAuthorFromStore(){const t=this.userStore;t.initializeStore(),this.author=t.user.author},getFollowees(){D.Z.get(`/authors/${this.author._id}/following/`).then((t=>{this.followees=t.data,console.log(this.followees)})).catch((t=>{console.log("Couldn't get followees!"),console.log(t)}))}},mounted(){this.getAuthorFromStore(),this.getFollowees()}};const ts=(0,F.Z)(Xo,[["render",Qo]]);var es=ts;const os={class:"card-text"};function ss(t,e,o,s,n,l){const r=(0,a.up)("GenericCard");return(0,a.wg)(),(0,a.j4)(r,{title:o.author.displayName},{"card-content":(0,a.w5)((()=>[(0,a._)("p",os,"Host: "+(0,i.zw)(o.author.host),1)])),footer:(0,a.w5)((()=>[(0,a._)("button",{onClick:e[0]||(e[0]=t=>l.followAuthor(o.author)),class:"btn d-flex justify-content-center text-light"},"Send Request")])),_:1},8,["title"])}var as={components:{GenericCard:at},props:["author"],data(){return{curr_author:[],follow_confirm:null}},methods:{getAuthorFromStore(){const t=this.userStore;t.initializeStore(),this.curr_author=t.user.author},followAuthor(t){const e=t.host,o=e.slice(8,18);if("social-t30"===o)t.id===this.curr_author.id?alert("Can't follow yourself"):D.Z.post(`/authors/${t._id}/inbox/`,{type:"Follow",actor:this.curr_author,object:t}).then((e=>{console.log(e),alert(`Request sent to ${t.displayName}`),this.follow_confirm=e.data})).catch((function(t){console.log(t)}));else if("sd-7-433-a"===o)D.Z.request({method:"POST",baseURL:`${t.id}/inbox/`,headers:{"Content-Type":"Application/JSON",Authorization:"Basic "+btoa("node01:P*ssw0rd!")},data:{context:"https://www.w3.org/ns/activitystreams",summary:"string",type:"Follow",author:{url:`${this.curr_author.id}`},object:{url:`${this.curr_author.id}`}}}).then((e=>{this.follow_confirm=e.data,alert(`Request sent to ${t.displayName}`),console.log(e)})).catch((function(t){console.log(t)})),D.Z.put(`/authors/${this.curr_author._id}/remote-requests/`,{type:"Follow",actor:this.curr_author,object:t}).then((t=>{console.log(t)})).catch((function(t){console.log(t)}));else{const e=t.id.split("/"),o=e[e.length-1];D.Z.request({method:"POST",baseURL:`${t.host}api/authors/${o}/inbox/`,headers:{"Content-Type":"Application/JSON",Authorization:"Token d960c3dee9855f5f5df8207ce1cba7fc1876fedf"},data:{type:"Follow",summary:`${this.curr_author.displayName} wants to follow ${t.displayName}`,actor:this.curr_author,object:t}}).then((e=>{this.follow_confirm=e.data,alert(`Request sent to ${t.displayName}`),console.log(e)})).catch((function(t){console.log(t)})),D.Z.put(`/authors/${this.curr_author._id}/remote-requests/`,{type:"Follow",actor:this.curr_author,object:t}).then((t=>{console.log(t)})).catch((function(t){console.log(t)}))}}},computed:{...(0,P.Kc)(U)},mounted(){this.getAuthorFromStore()}};const ns=(0,F.Z)(as,[["render",ss]]);var is=ns,ls={name:"SocialPage",data(){return{authors:[],authors_remote:[],authors_remote2:[]}},components:{MyRequests:Zo,MyFriends:Io,MyFollowers:Ko,MyFollowees:es,author_card:is},methods:{getAuthors(){this.$localNode.get("authors/").then((t=>{this.authors=t.data})).catch((t=>{console.log("Our Teams Error is:"+t),console.log(this.$localNode.defaults)}))},getRemoteAuthors2(){this.$node7.get("authors/").then((t=>{this.authors_remote2=t.data,console.log(t.data)})).catch((t=>{console.log("T7 Error is: "+t),console.log(this.$node7.defaults)}))},getRemoteAuthors(){this.$node10.get("authors/").then((t=>{this.authors_remote=t.data,console.log(t.data)})).catch((function(t){console.log("T10 error is: "+t),console.log(this.$node7.defaults)}))},updateFollowers(){this.$refs.followers.getFollowers(),this.$refs.friends.getFriends()}},mounted(){this.getAuthors(),this.getRemoteAuthors(),this.getRemoteAuthors2()}};const rs=(0,F.Z)(ls,[["render",Po],["__scopeId","data-v-a455a2a6"]]);var cs=rs;const ds={class:"d-flex flex-column align-items-center my-root"};function us(t,e,o,s,n,i){const l=(0,a.up)("SettingsProfile");return(0,a.wg)(),(0,a.iD)("div",ds,[(0,a.Wm)(l)])}const ms=t=>((0,a.dD)("data-v-6c6af5c8"),t=t(),(0,a.Cn)(),t),ps={class:"child-root"},hs=ms((()=>(0,a._)("h1",null,"Profile",-1))),gs=ms((()=>(0,a._)("h2",null,"Settings",-1))),fs={class:"d-flex mt-4",id:"profile-container"},bs={class:"d-flex"},ws={class:"image-container me-4"},_s=["src"],ys=["onSubmit"],vs={class:"mb-3"},ks=ms((()=>(0,a._)("label",{for:"newProfileImage",class:"form-label"},"New profile image URL",-1))),js=ms((()=>(0,a._)("button",{type:"submit",class:"btn btn-primary",form:"profileImageForm"},"Change profile picture",-1))),Cs=ms((()=>(0,a._)("i",{class:"bi bi-pencil-fill overlay-icon",id:"edit-image-icon"},null,-1))),Ps=[Cs],xs={class:"d-flex flex-column gap-3 text-start"},Us={class:"display-name"},Ds=ms((()=>(0,a._)("span",{class:"field-name"},"Display Name:",-1))),Ss=["onSubmit"],Fs=ms((()=>(0,a._)("label",{for:"newDisplayName",class:"form-label"},"New display name",-1))),Ms={class:"input-group mb-3"},Is=ms((()=>(0,a._)("span",{class:"input-group-text",id:"basic-addon1"},"@",-1))),Ns=ms((()=>(0,a._)("button",{type:"submit",class:"btn btn-primary",form:"displaynameForm"},"Change display name",-1))),Ts={class:"username"},$s=ms((()=>(0,a._)("span",{class:"field-name"},"Username:",-1))),zs=["onSubmit"],qs={class:"mb-3"},As=ms((()=>(0,a._)("label",{for:"currentPassword",class:"form-label"},"Password",-1))),Ls={class:"mb-3"},Rs=ms((()=>(0,a._)("label",{for:"newUsername",class:"form-label"},"New username",-1))),Zs=ms((()=>(0,a._)("button",{type:"submit",class:"btn btn-primary",form:"usernameForm"},"Change username",-1))),Es=ms((()=>(0,a._)("i",{class:"bi bi-pencil-fill",title:"Edit",role:"button","data-bs-toggle":"modal","data-bs-target":"#usernameModal"},null,-1))),Bs=ms((()=>(0,a._)("span",{class:"field-name"},"User ID:",-1))),Ys=["onSubmit"],Ws={class:"mb-3"},Hs=ms((()=>(0,a._)("label",{for:"currentPassword",class:"form-label"},"Current password",-1))),Os={class:"mb-3"},Ks=ms((()=>(0,a._)("label",{for:"newPassword",class:"form-label"},"New password",-1))),Vs={class:"mb-3"},Gs=ms((()=>(0,a._)("label",{for:"confirmNewPassword",class:"form-label"},"Confirm new password",-1))),Js=ms((()=>(0,a._)("button",{type:"submit",class:"btn btn-primary",form:"passwordForm"},"Change password",-1))),Qs=ms((()=>(0,a._)("button",{type:"button",class:"btn btn-primary","data-bs-toggle":"modal","data-bs-target":"#passwordModal"},[(0,a._)("i",{class:"bi bi-lock-fill"}),(0,a.Uk)(" Change password ")],-1)));function Xs(t,e,o,n,l,r){const c=(0,a.up)("SlotModal");return(0,a.wg)(),(0,a.iD)("div",ps,[l.alert.msg?((0,a.wg)(),(0,a.iD)("div",{key:0,class:(0,i.C_)(["alert fade show alert-dismissible",[l.alert.type]]),role:"alert"},[(0,a.Uk)((0,i.zw)(l.alert.msg)+" ",1),(0,a._)("button",{type:"button",class:"btn-close",onClick:e[0]||(e[0]=t=>l.alert.msg=""),"aria-label":"Close"})],2)):(0,a.kq)("",!0),hs,gs,(0,a._)("div",fs,[(0,a._)("div",bs,[(0,a._)("div",ws,[(0,a._)("img",{class:"settings-profile-image rounded-circle",src:r.getAuthorPropertyIfDefined("profileImage"),alt:"User profile picture"},null,8,_s),(0,a.Wm)(c,{"modal-name":"profileImageModal",onSubmitMyForm:r.submitProfileImageForm,onClearFields:r.prefillProfileImageURL},{titleText:(0,a.w5)((()=>[(0,a.Uk)("Edit profile picture")])),body:(0,a.w5)((t=>[(0,a._)("form",{onSubmit:(0,s.iM)(t.submitMethod,["prevent"]),id:"profileImageForm"},[(0,a._)("div",vs,[ks,(0,a.wy)((0,a._)("input",{class:"form-control",id:"newProfileImage","onUpdate:modelValue":e[1]||(e[1]=t=>l.fields.newProfileImageURL=t),type:"url",required:""},null,512),[[s.nr,l.fields.newProfileImageURL]])])],40,ys)])),submitButton:(0,a.w5)((()=>[js])),openModalButton:(0,a.w5)((()=>[(0,a._)("div",{class:"edit-overlay rounded-circle",role:"button","data-bs-toggle":"modal",title:"Edit profile picture","data-bs-target":"#profileImageModal",onClick:e[2]||(e[2]=(...t)=>r.prefillProfileImageURL&&r.prefillProfileImageURL(...t))},Ps)])),_:1},8,["onSubmitMyForm","onClearFields"])]),(0,a._)("div",xs,[(0,a._)("div",null,[(0,a._)("span",Us,[Ds,(0,a.Uk)(" @"+(0,i.zw)(r.getAuthorPropertyIfDefined("displayName")),1)]),(0,a.Uk)("Â "),(0,a.Wm)(c,{"modal-name":"displaynameModal",onSubmitMyForm:r.submitDisplaynameForm,onClearFields:r.prefillDisplayName},{openModalButton:(0,a.w5)((()=>[(0,a._)("i",{class:"bi bi-pencil-fill",title:"Edit",role:"button","data-bs-toggle":"modal","data-bs-target":"#displaynameModal",onClick:e[3]||(e[3]=(...t)=>r.prefillDisplayName&&r.prefillDisplayName(...t))})])),titleText:(0,a.w5)((()=>[(0,a.Uk)("Edit display name")])),body:(0,a.w5)((t=>[(0,a._)("form",{onSubmit:(0,s.iM)(t.submitMethod,["prevent"]),id:"displaynameForm"},[Fs,(0,a._)("div",Ms,[Is,(0,a.wy)((0,a._)("input",{class:"form-control",type:"text",id:"newDisplayName","onUpdate:modelValue":e[4]||(e[4]=t=>l.fields.newDisplayName=t),"aria-label":"Display name","aria-describedby":"basic-addon1",required:""},null,512),[[s.nr,l.fields.newDisplayName]])])],40,Ss)])),submitButton:(0,a.w5)((()=>[Ns])),default:(0,a.w5)((()=>[(0,a.Uk)(" >")])),_:1},8,["onSubmitMyForm","onClearFields"])]),(0,a._)("div",null,[(0,a._)("span",Ts,[$s,(0,a.Uk)(" "+(0,i.zw)(this.userStore.user.username),1)]),(0,a.Uk)("Â "),(0,a.Wm)(c,{"modal-name":"usernameModal",onSubmitMyForm:r.submitUsernameForm,onClearFields:r.clearFields},{titleText:(0,a.w5)((()=>[(0,a.Uk)("Edit username")])),body:(0,a.w5)((t=>[(0,a._)("form",{onSubmit:(0,s.iM)(t.submitMethod,["prevent"]),id:"usernameForm"},[(0,a._)("div",qs,[As,(0,a.wy)((0,a._)("input",{class:"form-control",type:"password",id:"currentPassword","onUpdate:modelValue":e[5]||(e[5]=t=>l.fields.currentPassword=t),required:""},null,512),[[s.nr,l.fields.currentPassword]])]),(0,a._)("div",Ls,[Rs,(0,a.wy)((0,a._)("input",{class:"form-control",type:"text",id:"newUsername","onUpdate:modelValue":e[6]||(e[6]=t=>l.fields.newUsername=t),required:""},null,512),[[s.nr,l.fields.newUsername]])])],40,zs)])),submitButton:(0,a.w5)((()=>[Zs])),openModalButton:(0,a.w5)((()=>[Es])),_:1},8,["onSubmitMyForm","onClearFields"])]),(0,a._)("div",null,[Bs,(0,a.Uk)(" "+(0,i.zw)(this.userStore.user.author._id)+"Â ",1),(0,a._)("i",{class:"bi bi-clipboard2-fill",role:"button",title:"Copy to clipboard",onClick:e[7]||(e[7]=(...t)=>r.copyUUIDToClipboard&&r.copyUUIDToClipboard(...t))})]),(0,a.Wm)(c,{"modal-name":"passwordModal",onSubmitMyForm:r.submitPasswordForm,onClearFields:r.clearFields},{titleText:(0,a.w5)((()=>[(0,a.Uk)("Change password")])),body:(0,a.w5)((t=>[(0,a._)("form",{onSubmit:(0,s.iM)(t.submitMethod,["prevent"]),id:"passwordForm"},[(0,a._)("div",Ws,[Hs,(0,a.wy)((0,a._)("input",{class:"form-control",type:"password",id:"currentPassword","onUpdate:modelValue":e[8]||(e[8]=t=>l.fields.currentPassword=t),required:""},null,512),[[s.nr,l.fields.currentPassword]])]),(0,a._)("div",Os,[Ks,(0,a.wy)((0,a._)("input",{class:"form-control",type:"password",id:"newPassword","onUpdate:modelValue":e[9]||(e[9]=t=>l.fields.newPassword=t),required:""},null,512),[[s.nr,l.fields.newPassword]])]),(0,a._)("div",Vs,[Gs,(0,a.wy)((0,a._)("input",{class:"form-control",type:"password",id:"confirmNewPassword","onUpdate:modelValue":e[10]||(e[10]=t=>l.fields.confirmNewPassword=t),required:""},null,512),[[s.nr,l.fields.confirmNewPassword]])])],40,Ys)])),submitButton:(0,a.w5)((()=>[Js])),openModalButton:(0,a.w5)((()=>[Qs])),_:1},8,["onSubmitMyForm","onClearFields"])])])])])}var ta={name:"SettingsProfile",components:{SlotModal:wt},data(){return{alert:{msg:"",type:""},errorMsg:"",fields:{currentPassword:"",newUsername:"",newPassword:"",confirmNewPassword:"",newDisplayName:"",newProfileImageURL:""}}},methods:{showAlert(t,e){this.alert.msg=t,this.alert.type="alert-"+e,console.log(this.alert)},promptImageURL(){const t=prompt("Enter a new image URL");t&&this.updateAuthorField("profileImage",t)},updateAuthorField(t,e,{done:o,e:s}){const a={displayName:"Display name",profileImage:"Profile image"};this.userStore.initializeStore();const n=this.userStore.user,i=n.author;i[t]=e,this.$localNode.post("/authors/"+i._id+"/",i).then((e=>{console.log(e),this.showAlert(a[t]+" sucessfully updated!","success"),this.userStore.setUser(n),o()})).catch((e=>{console.log(e),this.showAlert(a[t]+" update failed!","danger"),s(Ye(e))}))},getAuthorPropertyIfDefined(t){return this.userStore.user.author?this.userStore.user.author[t]:""},clearFields(){for(const t in this.fields)this.fields[t]=""},copyUUIDToClipboard(){const t=this.userStore.user.author._id;navigator.clipboard.writeText(t),this.showAlert("User ID copied to clipboard!","success")},submitUsernameForm({done:t,e:e}){const o={current_password:this.fields.currentPassword,new_username:this.fields.newUsername};this.$localNode.post("/users/set_username/",o).then((e=>{console.log(e);const o=this.fields.newUsername;this.showAlert('Username changed successfully. Your username is now "'+o+'".',"success"),this.updateLocalUsername(o),t()})).catch((t=>{console.log(t);const o={current_password:"Password",new_username:"New username"},s=Ye(t,o);e(s)}))},updateLocalUsername(t){const e=this.userStore;e.initializeStore();const o=e.user;o.username=t,localStorage.setItem("user",JSON.stringify(e.user))},submitPasswordForm({done:t,e:e}){const o={current_password:this.fields.currentPassword,new_password:this.fields.newPassword,re_new_password:this.fields.confirmNewPassword};this.fields.newPassword!==this.fields.confirmNewPassword?e("New passwords do not match."):this.$localNode.post("/users/set_password/",o).then((e=>{console.log(e),this.showAlert("Password changed successfully.","success"),t()})).catch((t=>{console.log(t);const o={current_password:"Current password",new_password:"New password",re_new_password:"Confirm new password",non_field_errors:"Error"},s=Ye(t,o);e(s)}))},submitDisplaynameForm({done:t,e:e}){this.updateAuthorField("displayName",this.fields.newDisplayName,{done:t,e:e})},prefillDisplayName(){this.fields.newDisplayName=this.getAuthorPropertyIfDefined("displayName")},submitProfileImageForm({done:t,e:e}){this.updateAuthorField("profileImage",this.fields.newProfileImageURL,{done:t,e:e})},prefillProfileImageURL(){this.fields.newProfileImageURL=this.getAuthorPropertyIfDefined("profileImage"),console.log(this.fields.newProfileImageURL)}},computed:{...(0,P.Kc)(U)}};const ea=(0,F.Z)(ta,[["render",Xs],["__scopeId","data-v-6c6af5c8"]]);var oa=ea,sa={name:"SettingsPage",components:{SettingsProfile:oa}};const aa=(0,F.Z)(sa,[["render",us],["__scopeId","data-v-01097e81"]]);var na=aa;const ia=t=>((0,a.dD)("data-v-552dfc29"),t=t(),(0,a.Cn)(),t),la={class:"inbox-view"},ra=ia((()=>(0,a._)("h1",{class:"mt-5 text-left"},[(0,a.Uk)(" Your "),(0,a._)("strong",null,"Feed")],-1))),ca=ia((()=>(0,a._)("h2",null,"Inbox",-1))),da=ia((()=>(0,a._)("button",{type:"button",class:"btn btn-outline-primary d-flex justify-self-start","data-bs-toggle":"modal","data-bs-target":"#inboxModal"}," Inbox ",-1)));function ua(t,e,o,s,n,i){const l=(0,a.up)("InboxModalBody"),r=(0,a.up)("SlotModal"),c=(0,a.up)("NotificationList");return(0,a.wg)(),(0,a.iD)("div",la,[ra,n.loading?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(r,{key:0,modalName:"inboxModal",sizing:"modal-xl",justification:"modal-dialog-centered"},{titleText:(0,a.w5)((()=>[ca])),body:(0,a.w5)((()=>[(0,a.Wm)(l,{allNotifications:n.stream},null,8,["allNotifications"])])),closeButtonText:(0,a.w5)((()=>[(0,a.Uk)("Done")])),openModalButton:(0,a.w5)((()=>[da])),_:1})),n.loading?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(c,{key:1,selectedNotifications:n.stream,class:"list"},null,8,["selectedNotifications"]))])}const ma={class:"notification-list d-flex flex-wrap"},pa={key:0,class:"post-notif-content notification"},ha={key:1,class:"comment-notif-content notification"},ga={class:"actual-comment"},fa={key:2,class:"like-notif-content notification"},ba={key:3,class:"request-notif-content notification"},wa={key:4,class:"request-notif-content notification"},_a={class:"request-notif-message"},ya={class:"notification-type"};function va(t,e,o,s,n,l){const r=(0,a.up)("GenericCard");return(0,a.wg)(),(0,a.iD)("div",ma,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.feed,(t=>((0,a.wg)(),(0,a.j4)(r,{key:t.id,anchor:l.getAnchor(t),class:"m-2"},{"card-content":(0,a.w5)((()=>["post"===t.type?((0,a.wg)(),(0,a.iD)("div",pa,[(0,a._)("p",null,[(0,a.Uk)((0,i.zw)(t.author.displayName)+" posted ",1),(0,a._)("strong",null,(0,i.zw)(t.title),1)])])):"comment"===t.type?((0,a.wg)(),(0,a.iD)("div",ha,[(0,a._)("p",null,(0,i.zw)(t.author.displayName)+" commented ",1),(0,a._)("p",ga,(0,i.zw)(t.comment),1)])):"Like"===t.type?((0,a.wg)(),(0,a.iD)("div",fa,[(0,a._)("p",null,(0,i.zw)(t.summary),1)])):"Follow"===t.type?((0,a.wg)(),(0,a.iD)("div",ba,[(0,a._)("p",null,(0,i.zw)(l.getActor(t.actor))+" sent a follow request to "+(0,i.zw)(l.getActor(t.object)),1)])):"Follow"===t.type?((0,a.wg)(),(0,a.iD)("div",wa,[(0,a._)("p",_a,(0,i.zw)(l.getActor(t.actor))+" "+(0,i.zw)(t.state)+" "+(0,i.zw)(l.getActor(t.object))+"'s follow request ",1)])):(0,a.kq)("",!0)])),footer:(0,a.w5)((()=>[(0,a._)("h6",ya,(0,i.zw)(t.type),1)])),_:2},1032,["anchor"])))),128))])}var ka={emits:["redirect"],components:{GenericCard:at},props:{selectedNotifications:{type:Array}},watch:{selectedNotifications(){this.updateList()}},computed:{...(0,P.Kc)(U)},async created(){this.getAuthorFromStore(),this.updateList()},data(){return{feed:[],author:null}},methods:{getPostFromComment(t){D.Z.get(t.id.split("/comments")[0]).then((t=>(console.log(t.data),t.data.title))).catch((()=>"one of your posts"))},getPostComment(t){D.Z.get(t.object).then((t=>{const e=t.data;return"post"===e.type?e.title:`your comment: ${e.comment}`})).catch((()=>"one of your posts"))},getActor(t){return this.author.id===t.id?"you":t.displayName},updateList(){this.feed=this.selectedNotifications},getAuthorFromStore(){const t=this.userStore;t.initializeStore(),this.author=t.user.author},getAnchor(t){if("Follow"===t.type)return{name:"SocialPage"};if("comment"===t.type||"post"===t.type){const e=t.id.split("/");return{name:"postpage",params:{aid:e[5],pid:e[7]},query:{hostURL:t.id}}}if("Like"===t.type){const e=t.object.split("/");return{name:"postpage",params:{aid:e[5],pid:e[7]},query:{hostURL:t.object}}}}}};const ja=(0,F.Z)(ka,[["render",va],["__scopeId","data-v-57518a5c"]]);var Ca=ja;const Pa={class:"btn-group-vertical d-flex flex-column justify-content-space-around border-primary",role:"group"},xa=(0,a._)("i",{class:"bi bi-archive-fill",title:"Inbox"},null,-1),Ua=[xa],Da=(0,a._)("i",{class:"bi bi-file-earmark-post",title:"Posts"},null,-1),Sa=[Da],Fa=(0,a._)("i",{class:"bi bi-heart-fill",title:"Likes"},null,-1),Ma=[Fa],Ia=(0,a._)("i",{class:"bi bi-chat-left-fill",title:"Comments"},null,-1),Na=[Ia],Ta=(0,a._)("i",{class:"bi bi-person-plus-fill",title:"Follows"},null,-1),$a=[Ta];function za(t,e,o,s,n,l){const r=(0,a.up)("NotificationList");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("div",Pa,[(0,a._)("button",{class:(0,i.C_)(["btn",{"btn-primary":"all"===n.active}]),onClick:e[0]||(e[0]=t=>l.setActive("all"))},Ua,2),(0,a._)("button",{class:(0,i.C_)(["btn",{"btn-primary":"post"===n.active}]),onClick:e[1]||(e[1]=t=>l.setActive("post"))},Sa,2),(0,a._)("button",{class:(0,i.C_)(["btn",{"btn-primary":"Like"===n.active}]),onClick:e[2]||(e[2]=t=>l.setActive("Like"))},Ma,2),(0,a._)("button",{class:(0,i.C_)(["btn",{"btn-primary":"comment"===n.active}]),onClick:e[3]||(e[3]=t=>l.setActive("comment"))},Na,2),(0,a._)("button",{class:(0,i.C_)(["btn",{"btn-primary":"Follow"===n.active}]),onClick:e[4]||(e[4]=t=>l.setActive("Follow"))},$a,2)]),(0,a.Wm)(r,{selectedNotifications:l.selectedNotifications},null,8,["selectedNotifications"])],64)}var qa={components:{NotificationList:Ca},props:["allNotifications"],computed:{...(0,P.Kc)(U),selectedNotifications(){return"all"===this.active?this.allNotifications:this.allNotifications.filter((t=>t.type===this.active))}},data(){return{active:"all",author:null}},methods:{setActive(t){this.active=t},getAuthorFromStore(){const t=this.userStore;t.initializeStore(),this.author=t.user.author}}};const Aa=(0,F.Z)(qa,[["render",za]]);var La=Aa,Ra={components:{SlotModal:wt,NotificationList:Ca,InboxModalBody:La},computed:{...(0,P.Kc)(U)},created(){this.getAuthorFromStore(),this.$localNode.get(this.author.id+"/inbox/").then((t=>{this.stream=t.data.items.reverse(),this.loading=!1})).catch((t=>{console.log(t)}))},data(){return{stream:[],author:null,loading:!0}},methods:{getAuthorFromStore(){const t=this.userStore;t.initializeStore(),this.author=t.user.author}}};const Za=(0,F.Z)(Ra,[["render",ua],["__scopeId","data-v-552dfc29"]]);var Ea=Za;const Ba=t=>((0,a.dD)("data-v-061c0b02"),t=t(),(0,a.Cn)(),t),Ya={class:"d-flex flex-shrink-0",id:"single-post-container"},Wa={key:0,class:"post-left-bar"},Ha={class:"author-info"},Oa=["src"],Ka={class:"name"},Va={class:"follow-status"},Ga={class:"btn-list"},Ja={class:"btn-with-label"},Qa={class:"btn-with-label"},Xa={id:"comment-button",type:"button",ref:"commentButton","data-bs-toggle":"modal","data-bs-target":"#makeCommentModal",class:"btn btn-light action-button"},tn=Ba((()=>(0,a._)("i",{class:"bi bi-chat-left-text-fill"},null,-1))),en=[tn],on={for:"comment-button"},sn=Ba((()=>(0,a._)("li",null,[(0,a._)("button",{type:"button",class:"btn btn-light action-button","data-bs-toggle":"modal","data-bs-target":"#sharePostModal"},[(0,a._)("i",{class:"bi bi-share-fill"})])],-1))),an={key:0,class:"right-aside-tab-icon bi bi-caret-left-fill"},nn={key:1,class:"right-aside-tab-icon bi bi-caret-right-fill"},ln={class:"scrollable"},rn={class:"move-page-wrapper"},cn={key:0,class:"move-page"},dn={class:"pages-count"},un=Ba((()=>(0,a._)("strong",null,"Comment",-1))),mn={class:"form-check form-switch d-flex justify-content-center gap-3 mb-2"},pn=Ba((()=>(0,a._)("label",{class:"form-check-label",for:"markdown-toggle"},[(0,a._)("i",{class:"bi-markdown-fill"}),(0,a.Uk)(" Use Markdown ")],-1))),hn=Ba((()=>(0,a._)("br",null,null,-1))),gn=Ba((()=>(0,a._)("strong",null,"Post",-1))),fn=Ba((()=>(0,a._)("h4",null,[(0,a.Uk)("Your "),(0,a._)("strong",null,"Friends")],-1))),bn=Ba((()=>(0,a._)("hr",null,null,-1))),wn=["onClick"],_n={key:0},yn=Ba((()=>(0,a._)("br",null,null,-1)));function vn(t,e,o,n,l,r){const c=(0,a.up)("PostProper"),d=(0,a.up)("CommentList"),u=(0,a.up)("SlotModal");return(0,a.wg)(),(0,a.iD)("div",Ya,[r.loading?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("aside",Wa,[(0,a._)("section",Ha,[(0,a._)("img",{src:l.authorData.profileImage,class:"author-picture"},null,8,Oa),(0,a._)("div",Ka,"@"+(0,i.zw)(l.authorData.displayName),1),(0,a._)("span",Va,[(0,a._)("small",{class:(0,i.C_)({activated:l.isFollowing})},(0,i.zw)(l.isFollowing?"Following":"Not Following"),3),(0,a._)("small",{class:(0,i.C_)({activated:!l.isFollowing}),onClick:e[0]||(e[0]=(...t)=>r.toggleFollow&&r.toggleFollow(...t))},(0,i.zw)(l.isFollowing?"Unfollow":"Follow"),3)])]),(0,a._)("ul",Ga,[(0,a._)("li",Ja,[(0,a._)("button",{id:"like-post-button",type:"button",class:"btn btn-light action-button",onClick:e[1]||(e[1]=(...t)=>r.addLike&&r.addLike(...t))},[(0,a._)("i",{class:(0,i.C_)(["bi bi-heart-fill",{liked:l.isLiked}])},null,2)])]),(0,a._)("li",Qa,[(0,a._)("button",Xa,en,512),(0,a._)("label",on,(0,i.zw)(l.postData.count),1)]),sn])])),r.loading?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(c,{key:1,post:l.postData,author:l.authorData,class:"col-9"},null,8,["post","author"])),r.loading?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("aside",{key:2,class:(0,i.C_)(["post-right-bar",{expanded:l.expandComments}])},[(0,a._)("div",{class:"right-aside-tab",onClick:e[2]||(e[2]=(...t)=>r.toggleComments&&r.toggleComments(...t))},[l.expandComments?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("i",an)),l.expandComments?((0,a.wg)(),(0,a.iD)("i",nn)):(0,a.kq)("",!0)]),(0,a._)("div",ln,[(0,a.Wm)(d,{post:l.postData,axiosTarget:l.postHost,page:l.currentCommentPage,pageTotal:r.pageTotal,pagination:l.paginationSetting,onAddComment:e[3]||(e[3]=e=>t.$refs.commentButton.click())},null,8,["post","axiosTarget","page","pageTotal","pagination"]),(0,a._)("div",rn,[r.pageTotal>1?((0,a.wg)(),(0,a.iD)("div",cn,[(0,a._)("i",{class:(0,i.C_)(["bi bi-caret-left-fill",{activated:l.currentCommentPage>1}]),onClick:e[4]||(e[4]=t=>r.changeCommentPage(-1))},null,2),(0,a._)("span",dn,(0,i.zw)(l.currentCommentPage)+"/"+(0,i.zw)(r.pageTotal),1),(0,a._)("i",{class:(0,i.C_)(["bi bi-caret-right-fill",{activated:l.currentCommentPage!==r.pageTotal}]),onClick:e[5]||(e[5]=t=>r.changeCommentPage(1))},null,2)])):(0,a.kq)("",!0)])])],2)),(0,a.Wm)(u,{modalName:"makeCommentModal",sizing:"modal-lg",justification:"modal-dialog-centered"},{titleText:(0,a.w5)((()=>[(0,a.Uk)("Add a "),un])),body:(0,a.w5)((()=>[(0,a._)("div",mn,[(0,a.wy)((0,a._)("input",{"onUpdate:modelValue":e[6]||(e[6]=t=>l.markDownEnabled=t),onChange:e[7]||(e[7]=(...e)=>t.setText&&t.setText(...e)),id:"markdown-toggle",class:"form-check-input pr-2",type:"checkbox"},null,544),[[s.e8,l.markDownEnabled]]),pn]),(0,a.wy)((0,a._)("textarea",{class:"form-control","onUpdate:modelValue":e[8]||(e[8]=t=>l.newComment=t),placeholder:"Write a comment"},null,512),[[s.nr,l.newComment]])])),submitButton:(0,a.w5)((()=>[(0,a._)("button",{type:"submit",class:"btn btn-primary","data-bs-dismiss":"modal",onClick:e[9]||(e[9]=(...t)=>r.submitComment&&r.submitComment(...t))},"Submit")])),openModalButton:(0,a.w5)((()=>[hn])),_:1}),(0,a.Wm)(u,{modalName:"sharePostModal",sizing:"modal-lg",justification:"modal-dialog-centered"},{titleText:(0,a.w5)((()=>[(0,a.Uk)("Share the "),gn])),body:(0,a.w5)((()=>[fn,bn,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.friends,(t=>((0,a.wg)(),(0,a.iD)("p",{key:t.id,onClick:e=>r.sharePost(t)},(0,i.zw)(t.displayName),9,wn)))),128)),0===l.friends.length?((0,a.wg)(),(0,a.iD)("p",_n,"You have no friends :C")):(0,a.kq)("",!0)])),openModalButton:(0,a.w5)((()=>[yn])),_:1})])}const kn=t=>((0,a.dD)("data-v-5eacc4e8"),t=t(),(0,a.Cn)(),t),jn={class:"post-template"},Cn={class:"post-title"},Pn={class:"post-title"},xn={class:"supplementary-info"},Un=["open"],Dn=["title"],Sn=kn((()=>(0,a._)("i",{class:"bi bi-info-circle"},null,-1))),Fn=[Sn],Mn={class:"post-icons"},In={key:0,class:"image-content"},Nn=["src"],Tn={key:1,class:"text-content"},$n={key:0,id:"post-content-plain",class:"text"};function zn(t,e,o,n,l,r){const c=(0,a.up)("VueMarkdown");return(0,a.wg)(),(0,a.iD)("div",jn,[(0,a._)("section",Cn,[(0,a._)("h1",Pn,(0,i.zw)(o.post.title),1)]),(0,a._)("div",xn,[o.post.description?((0,a.wg)(),(0,a.iD)("details",{key:0,class:"post-description",open:l.descIsHovered},[(0,a._)("summary",{"data-toggle":"tooltip","data-placement":"left",title:o.post.description,onClick:e[0]||(e[0]=(0,s.iM)((()=>{}),["prevent"]))},Fn,8,Dn),(0,a._)("small",null,(0,i.zw)(o.post.description),1)],8,Un)):(0,a.kq)("",!0),(0,a._)("span",Mn,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.post.contentType.split(","),(t=>((0,a.wg)(),(0,a.iD)("i",{key:t,class:(0,i.C_)(["bi",r.getIcon(t)])},null,2)))),128))])]),o.post.image?((0,a.wg)(),(0,a.iD)("section",In,[(0,a._)("img",{class:"img-fluid",src:r.imageSrc},null,8,Nn)])):(0,a.kq)("",!0),o.post.content?((0,a.wg)(),(0,a.iD)("section",Tn,[o.post.content&&!r.markdown?((0,a.wg)(),(0,a.iD)("p",$n,(0,i.zw)(o.post.content),1)):o.post.content&&r.markdown?((0,a.wg)(),(0,a.j4)(c,{key:1,id:"post-content-markdown",source:o.post.content,class:"text"},null,8,["source"])):(0,a.kq)("",!0)])):(0,a.kq)("",!0)])}var qn={components:{VueMarkdown:G.Z},props:{post:Object,author:Object},computed:{markdown(){return this.post.contentType.split(",").includes("text/markdown")},imageSrc(){return this.post.id+"/image"}},data(){return{descIsHovered:!1}},methods:{getIcon(t){switch(!0){case/^text\/markdown$/.test(t):return"bi-markdown-fill";case/^text\/plain$/.test(t):return"bi-blockquote-left";case/^image/.test(t):return"bi-image-fill"}}}};const An=(0,F.Z)(qn,[["render",zn],["__scopeId","data-v-5eacc4e8"]]);var Ln=An;const Rn=t=>((0,a.dD)("data-v-08faabe2"),t=t(),(0,a.Cn)(),t),Zn={key:0},En=Rn((()=>(0,a._)("i",{class:"bi bi-person-check-fill"},null,-1))),Bn={key:1},Yn=Rn((()=>(0,a._)("i",{class:"bi bi-rocket-takeoff-fill"},null,-1))),Wn={key:0,class:"spinner-grow text-light",role:"status"},Hn={key:1,id:"end-of-comments",class:"text-primary"},On={key:2,class:"text-light mt-3"};function Kn(t,e,o,s,n,i){const l=(0,a.up)("UserComment");return(0,a.wg)(),(0,a.iD)(a.HY,null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.comments,(t=>((0,a.wg)(),(0,a.j4)(l,{ref_for:!0,ref:"infScrollCommentList",key:t.id,comment:t},{flair:(0,a.w5)((()=>[i.matchPost(t)?((0,a.wg)(),(0,a.iD)("span",Zn,[(0,a.Uk)("OP"),En])):i.matchSession(t)?((0,a.wg)(),(0,a.iD)("span",Bn,[(0,a.Uk)("Me"),Yn])):(0,a.kq)("",!0)])),_:2},1032,["comment"])))),128)),n.loading?((0,a.wg)(),(0,a.iD)("div",Wn)):(0,a.kq)("",!0),i.exhausted&&n.comments.length>0?((0,a.wg)(),(0,a.iD)("hr",Hn)):(0,a.kq)("",!0),i.exhausted?((0,a.wg)(),(0,a.iD)("small",On,[(0,a.Uk)("There are no more comments. "),(0,a._)("a",{class:"text-primary",onClick:e[0]||(e[0]=e=>t.$emit("addComment"))},"But you can add one")])):(0,a.kq)("",!0)],64)}const Vn={class:"comment-body"},Gn={class:"commenter"},Jn={class:"display-name"},Qn={class:"date"};function Xn(t,e,o,s,n,l){const r=(0,a.up)("VueMarkdown");return(0,a.wg)(),(0,a.iD)("div",Vn,[l.markdown?((0,a.wg)(),(0,a.j4)(r,{key:1,source:o.comment.comment,class:(0,i.C_)({decoration:l.flairDecorate})},null,8,["source","class"])):((0,a.wg)(),(0,a.iD)("p",{key:0,class:(0,i.C_)({decoration:l.flairDecorate})},(0,i.zw)(o.comment.comment),3)),(0,a._)("div",Gn,[(0,a._)("span",Jn,(0,i.zw)(l.displayName),1),(0,a.WI)(t.$slots,"flair",{},void 0,!0)]),(0,a._)("div",Qn,(0,i.zw)(l.dateFormatted),1)])}var ti={props:{comment:Object},components:{VueMarkdown:G.Z},computed:{dateFormatted(){const t=De()(this.comment.published).format("YYYY/MM/DD"),e=De()().format("YYYY/MM/DD");return t===e?"Today":t},displayName(){return`@${this.comment.author.displayName}`},flairDecorate(){return!!this.$slots.flair},markdown(){return/markdown$/.test(this.comment.contentType)}}};const ei=(0,F.Z)(ti,[["render",Xn],["__scopeId","data-v-51af6d88"]]);var oi=ei,si={emits:["addComment"],props:{post:Object,page:Number,pageTotal:Number,pagination:Number,axiosTarget:Function},components:{UserComment:oi},mounted(){const t=U();t.initializeStore(),this.currentUser=t.user.author,this.getComments()},watch:{page(t){this.getComments()}},computed:{exhausted(){return this.comments.length<this.pagination&&this.page===this.pageTotal}},data(){return{comments:[],loading:!0,currentUser:null}},methods:{matchPost(t){return this.post.author.id===t.author.id||!1},matchSession(t){return this.currentUser.id===t.author.id||!1},getComments(){this.axiosTarget.get(this.post.comments,{params:{page:this.page,size:this.pagination}}).then((t=>{0===t.data.length&&(this.exhausted=!0),this.comments=t.data.comments,this.loading=!1})).catch((t=>{console.log(t)})),this.loading=!0}}};const ai=(0,F.Z)(si,[["render",Kn],["__scopeId","data-v-08faabe2"]]);var ni=ai;const ii=D.Z.create({name:"localNode",baseURL:"https://social-t30.herokuapp.com/api/",headers:{},defaults:{}}),li=D.Z.create({name:"node7",baseURL:"https://sd-7-433-api.herokuapp.com/api/",headers:{Authorization:`Basic ${btoa("node01:P*ssw0rd!")}`},defaults:{}}),ri=D.Z.create({name:"node9",baseURL:"http://ultimate-teapot.herokuapp.com/main/api/",headers:{Authorization:`Basic ${btoa("team5:jN2!42GUtCgB")}`},defaults:{}}),ci=D.Z.create({name:"node10",baseURL:"https://socialdistcmput404.herokuapp.com/api/",headers:{Authorization:"Token d960c3dee9855f5f5df8207ce1cba7fc1876fedf"},defaults:{}}),di=[ii,li,ri,ci];for(const Fi of di)Fi.interceptors.request.use((t=>(t.url.startsWith("/api/")&&(t.url=t.url.replace("/api/")),t)));function ui(t){console.log("Endpoint format is: "+t);const e=new URL(t).host;return e.includes("social-t30")?ii:e.includes("sd-7-433-api")?li:e.includes("ultimate-teapot")?ri:e.includes("socialdistcmput404")?ci:void 0}var mi={install(t){t.config.globalProperties.$localNode=ii,t.config.globalProperties.$node7=li,t.config.globalProperties.$node9=ri,t.config.globalProperties.$node10=ci}};const pi={type:"comment",id:null,author:null,comment:"",contentType:"text/plain",published:"2023-03-01T21:18:38.908794Z"};var hi={components:{PostProper:Ln,CommentList:ni,SlotModal:wt},mounted(){const t=this.$route.params.pid,e=this.$route.params.aid;this.getAuthorFromStore(),this.getData(t,e)},computed:{...(0,P.Kc)(U),loading(){return!this.authorData||!this.postData},pageTotal(){return Math.ceil(this.postData.count/this.paginationSetting)||1}},data(){return{postData:null,authorData:null,currentAuthor:null,isLiked:!1,isFollowing:!1,friends:[],friendsLoading:!0,expandComments:!1,currentCommentPage:1,paginationSetting:5,newComment:"",markDownEnabled:!1,postHost:ui(this.$route.query.hostURL)}},methods:{async getData(t,e){this.postHost.get(`/authors/${e}/posts/${t}/`).then((t=>{this.postData=t.data,this.postHost.get(`${this.currentAuthor.id}/liked/`).then((t=>{const e=t.data.items;for(const o of e)if(o.object===this.postData.id){this.isLiked=!0;break}})).catch((t=>{console.log(t)}))})).catch((t=>{console.log(t)})),this.postHost.get(`/authors/${e}/`).then((t=>{this.authorData=t.data})).catch((t=>{console.log(t)}))},toggleFollow(){this.isFollowing=!this.isFollowing,alert("Sorry! You can't follow people yet")},addLike(){if(!this.isLiked){this.isLiked=!0;const t={type:"Like",context:"https://www.w3.org/ns/activitystreams",author:this.currentAuthor,summary:`${this.currentAuthor.displayName} likes your post`,object:this.postData.id};this.postHost.post(`${this.postData.author.id}/inbox/`,t).then((t=>{console.log("Like sent")})).catch((t=>{console.log(t)}))}},toggleComments(){this.expandComments=!this.expandComments},changeCommentPage(t){(t<0&&this.currentCommentPage+t>0||t>0&&this.currentCommentPage+t<=this.pageTotal)&&(this.currentCommentPage+=t)},submitComment(){const t=pi,e=(0,re.Z)();t.author=this.currentAuthor,t.id=`${this.postData.id}/comments/${e}`,t.comment=this.newComment,t.contentType=this.markDownEnabled?"text-markdown":"text-plain",console.table(t),this.postaHost.post(`${this.postData.id}/comments`,t).then((()=>{this.postData.count++,this.currentCommentPage=this.pageTotal,this.expandComments=!0,this.newComment=""})).catch((t=>{console.log(t),alert("Couldn't make comment!")}))},sharePost(t){this.postHost.post(`${t.id}/inbox/`,this.postData).then((()=>{alert(`You shared the post with ${t.displayName}`)})).catch((()=>{alert(`Couldn't share the post with ${t.displayName}`)}))},getAuthorFromStore(){const t=this.userStore;t.initializeStore(),this.currentAuthor=t.user.author}}};const gi=(0,F.Z)(hi,[["render",vn],["__scopeId","data-v-061c0b02"]]);var fi=gi;const bi=t=>((0,a.dD)("data-v-6db00f74"),t=t(),(0,a.Cn)(),t),wi={class:"about pt-5 pb-5 d-flex justify-content-center"},_i={class:"d-flex flex-column justify-content-center gap-4"},yi=bi((()=>(0,a._)("div",{class:"d-flex rounded-circle justify-content-center align-items-center",id:"circle-404"},[(0,a._)("h1",{id:"text-404"},"404")],-1))),vi=bi((()=>(0,a._)("span",{id:"message"},[(0,a._)("h1",null,"Whoops!"),(0,a._)("h2",null,"We couldn't find this page.")],-1)));function ki(t,e){return(0,a.wg)(),(0,a.iD)("div",wi,[(0,a._)("div",_i,[yi,vi,(0,a._)("a",{href:"#",onClick:e[0]||(e[0]=t=>this.$router.push("/home"))},"Take me home!")])])}const ji={},Ci=(0,F.Z)(ji,[["render",ki],["__scopeId","data-v-6db00f74"]]);var Pi=Ci,xi=[{path:"/",redirect:"/home"},{path:"/home",name:"homepage",component:Ea},{path:"/browse",name:"browsepage",component:Ie},{path:"/login",name:"login",component:Oe},{path:"/signup",name:"signup",component:co},{path:"/home/manage-posts",name:"manageposts",component:ue},{path:"/social",name:"SocialPage",component:cs},{path:"/settings",name:"SettingsPage",component:na},{path:"/authors/:aid/posts/:pid",name:"postpage",component:fi},{path:"/:pathMatch(.*)*",beforeEnter:()=>{window.location.assign("/404")},name:"NotFound",component:Pi},{path:"/404",name:"404",component:Pi}];const Ui=(0,z.p7)({history:(0,z.PO)("/"),linkActiveClass:"active",routes:xi,scrollBehavior(t,e,o){if(t.hash)return{el:t.hash,behavior:"smooth"}}});Ui.beforeEach(((t,e)=>{const o=x();o.initializeStore();const s=["login","signup"];return o.isAuthenticated||s.includes(t.name)?o.isAuthenticated&&s.includes(t.name)?"/home#loggedin":void 0:"/login"})),Ui.afterEach(((t,e)=>{if("homepage"===e.name){const t=document.querySelector(".modal-backdrop");t&&t.remove()}}));var Di=Ui;o(2166);const Si=(0,s.ri)($);Si.use(mi),Si.use(Di,D.Z).use((0,P.WB)()).mount("#app"),Si.config.globalProperties.$http=D.Z}},e={};function o(s){var a=e[s];if(void 0!==a)return a.exports;var n=e[s]={id:s,loaded:!1,exports:{}};return t[s].call(n.exports,n,n.exports,o),n.loaded=!0,n.exports}o.m=t,function(){var t=[];o.O=function(e,s,a,n){if(!s){var i=1/0;for(d=0;d<t.length;d++){s=t[d][0],a=t[d][1],n=t[d][2];for(var l=!0,r=0;r<s.length;r++)(!1&n||i>=n)&&Object.keys(o.O).every((function(t){return o.O[t](s[r])}))?s.splice(r--,1):(l=!1,n<i&&(i=n));if(l){t.splice(d--,1);var c=a();void 0!==c&&(e=c)}}return e}n=n||0;for(var d=t.length;d>0&&t[d-1][2]>n;d--)t[d]=t[d-1];t[d]=[s,a,n]}}(),function(){o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,{a:e}),e}}(),function(){o.d=function(t,e){for(var s in e)o.o(e,s)&&!o.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){o.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t}}(),function(){var t={143:0};o.O.j=function(e){return 0===t[e]};var e=function(e,s){var a,n,i=s[0],l=s[1],r=s[2],c=0;if(i.some((function(e){return 0!==t[e]}))){for(a in l)o.o(l,a)&&(o.m[a]=l[a]);if(r)var d=r(o)}for(e&&e(s);c<i.length;c++)n=i[c],o.o(t,n)&&t[n]&&t[n][0](),t[n]=0;return o.O(d)},s=self["webpackChunksocial_distribution_front_end"]=self["webpackChunksocial_distribution_front_end"]||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))}();var s=o.O(void 0,[998],(function(){return o(4626)}));s=o.O(s)})();
//# sourceMappingURL=app.87ab8826.js.map