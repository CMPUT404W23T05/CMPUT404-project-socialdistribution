(function(){var t={6700:function(t,e,s){var o={"./af":3906,"./af.js":3906,"./ar":902,"./ar-dz":3853,"./ar-dz.js":3853,"./ar-kw":299,"./ar-kw.js":299,"./ar-ly":6825,"./ar-ly.js":6825,"./ar-ma":6379,"./ar-ma.js":6379,"./ar-sa":7700,"./ar-sa.js":7700,"./ar-tn":2059,"./ar-tn.js":2059,"./ar.js":902,"./az":6043,"./az.js":6043,"./be":7936,"./be.js":7936,"./bg":4078,"./bg.js":4078,"./bm":4014,"./bm.js":4014,"./bn":9554,"./bn-bd":7114,"./bn-bd.js":7114,"./bn.js":9554,"./bo":6529,"./bo.js":6529,"./br":5437,"./br.js":5437,"./bs":9647,"./bs.js":9647,"./ca":9951,"./ca.js":9951,"./cs":6113,"./cs.js":6113,"./cv":7965,"./cv.js":7965,"./cy":5858,"./cy.js":5858,"./da":3515,"./da.js":3515,"./de":2831,"./de-at":6263,"./de-at.js":6263,"./de-ch":1127,"./de-ch.js":1127,"./de.js":2831,"./dv":4510,"./dv.js":4510,"./el":8616,"./el.js":8616,"./en-au":4595,"./en-au.js":4595,"./en-ca":3545,"./en-ca.js":3545,"./en-gb":9609,"./en-gb.js":9609,"./en-ie":3727,"./en-ie.js":3727,"./en-il":3302,"./en-il.js":3302,"./en-in":6305,"./en-in.js":6305,"./en-nz":9128,"./en-nz.js":9128,"./en-sg":4569,"./en-sg.js":4569,"./eo":650,"./eo.js":650,"./es":6358,"./es-do":4214,"./es-do.js":4214,"./es-mx":8639,"./es-mx.js":8639,"./es-us":232,"./es-us.js":232,"./es.js":6358,"./et":7279,"./et.js":7279,"./eu":5515,"./eu.js":5515,"./fa":7981,"./fa.js":7981,"./fi":7090,"./fi.js":7090,"./fil":9208,"./fil.js":9208,"./fo":2799,"./fo.js":2799,"./fr":3463,"./fr-ca":2213,"./fr-ca.js":2213,"./fr-ch":2848,"./fr-ch.js":2848,"./fr.js":3463,"./fy":1468,"./fy.js":1468,"./ga":8163,"./ga.js":8163,"./gd":2898,"./gd.js":2898,"./gl":6312,"./gl.js":6312,"./gom-deva":682,"./gom-deva.js":682,"./gom-latn":9178,"./gom-latn.js":9178,"./gu":5009,"./gu.js":5009,"./he":2795,"./he.js":2795,"./hi":7009,"./hi.js":7009,"./hr":6506,"./hr.js":6506,"./hu":9565,"./hu.js":9565,"./hy-am":3864,"./hy-am.js":3864,"./id":5626,"./id.js":5626,"./is":6649,"./is.js":6649,"./it":151,"./it-ch":5348,"./it-ch.js":5348,"./it.js":151,"./ja":9830,"./ja.js":9830,"./jv":3751,"./jv.js":3751,"./ka":3365,"./ka.js":3365,"./kk":5980,"./kk.js":5980,"./km":9571,"./km.js":9571,"./kn":5880,"./kn.js":5880,"./ko":6809,"./ko.js":6809,"./ku":6773,"./ku.js":6773,"./ky":5505,"./ky.js":5505,"./lb":553,"./lb.js":553,"./lo":1237,"./lo.js":1237,"./lt":1563,"./lt.js":1563,"./lv":1057,"./lv.js":1057,"./me":6495,"./me.js":6495,"./mi":3096,"./mi.js":3096,"./mk":3874,"./mk.js":3874,"./ml":6055,"./ml.js":6055,"./mn":7747,"./mn.js":7747,"./mr":7113,"./mr.js":7113,"./ms":8687,"./ms-my":7948,"./ms-my.js":7948,"./ms.js":8687,"./mt":4532,"./mt.js":4532,"./my":4655,"./my.js":4655,"./nb":6961,"./nb.js":6961,"./ne":2512,"./ne.js":2512,"./nl":8448,"./nl-be":2936,"./nl-be.js":2936,"./nl.js":8448,"./nn":9031,"./nn.js":9031,"./oc-lnc":5174,"./oc-lnc.js":5174,"./pa-in":118,"./pa-in.js":118,"./pl":3448,"./pl.js":3448,"./pt":3518,"./pt-br":2447,"./pt-br.js":2447,"./pt.js":3518,"./ro":817,"./ro.js":817,"./ru":262,"./ru.js":262,"./sd":8990,"./sd.js":8990,"./se":3842,"./se.js":3842,"./si":7711,"./si.js":7711,"./sk":756,"./sk.js":756,"./sl":3772,"./sl.js":3772,"./sq":6187,"./sq.js":6187,"./sr":732,"./sr-cyrl":5713,"./sr-cyrl.js":5713,"./sr.js":732,"./ss":9455,"./ss.js":9455,"./sv":9770,"./sv.js":9770,"./sw":959,"./sw.js":959,"./ta":6459,"./ta.js":6459,"./te":5302,"./te.js":5302,"./tet":7975,"./tet.js":7975,"./tg":1294,"./tg.js":1294,"./th":2385,"./th.js":2385,"./tk":4613,"./tk.js":4613,"./tl-ph":8668,"./tl-ph.js":8668,"./tlh":8190,"./tlh.js":8190,"./tr":4506,"./tr.js":4506,"./tzl":3440,"./tzl.js":3440,"./tzm":9852,"./tzm-latn":2350,"./tzm-latn.js":2350,"./tzm.js":9852,"./ug-cn":730,"./ug-cn.js":730,"./uk":99,"./uk.js":99,"./ur":2100,"./ur.js":2100,"./uz":6002,"./uz-latn":6322,"./uz-latn.js":6322,"./uz.js":6002,"./vi":4207,"./vi.js":4207,"./x-pseudo":4674,"./x-pseudo.js":4674,"./yo":570,"./yo.js":570,"./zh-cn":3644,"./zh-cn.js":3644,"./zh-hk":2591,"./zh-hk.js":2591,"./zh-mo":9503,"./zh-mo.js":9503,"./zh-tw":8080,"./zh-tw.js":8080};function a(t){var e=i(t);return s(e)}function i(t){if(!s.o(o,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return o[t]}a.keys=function(){return Object.keys(o)},a.resolve=i,t.exports=a,a.id=6700},5183:function(t,e,s){"use strict";var o=s(9242),a=s(3396);function i(t,e,s,o,i,n){const l=(0,a.up)("NavBar"),r=(0,a.up)("router-view");return(0,a.wg)(),(0,a.iD)(a.HY,null,[n.loggedIn?((0,a.wg)(),(0,a.j4)(l,{key:0})):(0,a.kq)("",!0),(0,a.Wm)(r)],64)}var n=s(7139);const l=t=>((0,a.dD)("data-v-2b3ac615"),t=t(),(0,a.Cn)(),t),r={class:"navbar navbar-expand-md navbar-dark bg-dark sticky_navbar px-5"},c={class:"d-flex align-items-center gap-2"},d=["src"],u={key:1,id:"display-name",class:"fw-bold"},m={class:"navbar-nav"},p={class:"nav-item dropdown"},h={class:"dropdown-menu"},g={class:"nav-item"},b={class:"nav-item dropdown"},f={class:"dropdown-menu"},w={class:"nav-item dropdown"},y={id:"logout"},_=l((()=>(0,a._)("i",{class:"bi bi-door-closed"},null,-1))),k={key:0,class:"justify-content-center d-flex"},v={class:"alert alert-primary fade show w-50 p-2 m-0 mt-3 d-flex justify-content-center login-alert position-absolute",role:"alert"},x={class:"flex-grow-1"},P=l((()=>(0,a._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"alert","aria-label":"Close"},null,-1)));function j(t,e,s,o,i,l){const j=(0,a.up)("router-link");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("nav",r,[(0,a._)("div",c,[t.user?((0,a.wg)(),(0,a.iD)("img",{key:0,id:"profile-picture",class:"circle",src:l.getAuthorPropertyIfDefined("profileImage"),alt:"User profile picture"},null,8,d)):(0,a.kq)("",!0),t.user?((0,a.wg)(),(0,a.iD)("span",u,"@"+(0,n.zw)(l.getAuthorPropertyIfDefined("displayName")),1)):(0,a.kq)("",!0)]),(0,a._)("ul",m,[(0,a._)("li",p,[(0,a.Wm)(j,{to:{name:"homepage"},class:"nav-link"},{default:(0,a.w5)((()=>[(0,a.Uk)("Home")])),_:1}),(0,a._)("ul",h,[(0,a.Wm)(j,{to:{name:"manageposts"},class:"dropdown-item"},{default:(0,a.w5)((()=>[(0,a.Uk)(" Manage Posts ")])),_:1})])]),(0,a._)("li",g,[(0,a.Wm)(j,{to:{name:"browsepage"},class:"nav-link"},{default:(0,a.w5)((()=>[(0,a.Uk)(" Browse ")])),_:1})]),(0,a._)("li",b,[(0,a.Wm)(j,{to:"/social",class:"nav-link",exact:""},{default:(0,a.w5)((()=>[(0,a.Uk)(" Social ")])),_:1}),(0,a._)("ul",f,[(0,a.Wm)(j,{to:{name:"SocialPage",hash:"#follows"},class:"dropdown-item"},{default:(0,a.w5)((()=>[(0,a.Uk)("Your Social")])),_:1}),(0,a.Wm)(j,{to:{name:"SocialPage",hash:"#localNode"},class:"dropdown-item"},{default:(0,a.w5)((()=>[(0,a.Uk)("Local Authors")])),_:1}),(0,a.Wm)(j,{to:{name:"SocialPage",hash:"#node7"},class:"dropdown-item"},{default:(0,a.w5)((()=>[(0,a.Uk)("Node 7 Authors")])),_:1}),(0,a.Wm)(j,{to:{name:"SocialPage",hash:"#node10"},class:"dropdown-item"},{default:(0,a.w5)((()=>[(0,a.Uk)("Node 10 Authors")])),_:1})])]),(0,a._)("li",w,[(0,a.Wm)(j,{to:"/Settings",class:"nav-link"},{default:(0,a.w5)((()=>[(0,a.Uk)(" Settings ")])),_:1})])]),(0,a._)("span",y,[(0,a._)("button",{class:"btn btn-primary",onClick:e[0]||(e[0]=(...t)=>l.logout&&l.logout(...t))},[(0,a.Uk)("Log out "),_])])]),i.alreadyLoggedIn?((0,a.wg)(),(0,a.iD)("div",k,[(0,a._)("div",v,[(0,a._)("div",x,[(0,a.Uk)("You are already logged in. To switch accounts, please "),(0,a._)("a",{onClick:e[1]||(e[1]=(...t)=>l.logout&&l.logout(...t)),href:"#",class:"alert-link"},"logÂ out"),(0,a.Uk)(".")]),P])])):(0,a.kq)("",!0)],64)}s(7658);var C=s(2578);const S=(0,C.Q_)("token",{state:()=>({token:"",isAuthenticated:!1}),actions:{initializeStore(){localStorage.getItem("token")?(this.token=localStorage.getItem("token"),this.isAuthenticated=!0):(this.token="",this.isAuthenticated=!1)},setToken(t){this.token=t,this.isAuthenticated=!0},removeToken(){this.token="",this.isAuthenticated=!1}}}),D=(0,C.Q_)("user",{state:()=>({user:{}}),actions:{initializeStore(){localStorage.getItem("user")?this.user=JSON.parse(localStorage.getItem("user")):this.user={}},setUser(t){console.assert("object"===typeof t,"user must be an object"),this.user=t,localStorage.setItem("user",JSON.stringify(t))},removeUser(){this.user={},localStorage.removeItem("user")},getUser(){return this.initializeStore(),this.user}}});var U=s(4161),M={name:"NavBar",data(){return{alreadyLoggedIn:!1}},beforeMount(){this.userStore.initializeStore()},updated(){this.alreadyLoggedIn=this.alreadyLoggedInQuery()},methods:{logout(){const t=this.tokenStore;U.Z.post("token/logout").then((t=>{console.log(t)})).catch((t=>{console.log("'Server logout failed"),console.log(t)})).finally((()=>{t.removeToken(),localStorage.removeItem("token"),localStorage.removeItem("user"),D().removeUser(),this.$router.push("/login"),U.Z.defaults.headers.common.Authorization=""}))},getAuthorPropertyIfDefined(t){return this.userStore.user.author?this.userStore.user.author[t]:""},alreadyLoggedInQuery(){return!!this.$route.query.loggedin}},computed:{...(0,C.Kc)(S,D),...(0,C.rn)(D,["user"])}},I=s(89);const N=(0,I.Z)(M,[["render",j],["__scopeId","data-v-2b3ac615"]]);var F=N,z={name:"App",beforeCreate(){const t=S();t.initializeStore();const e=t.token;this.$localNode.defaults.headers.common.Authorization=e?`Token ${e}`:""},components:{NavBar:F},computed:{loggedIn(){return"login"!==this.$route.name&&"signup"!==this.$route.name}}};const $=(0,I.Z)(z,[["render",i]]);var L=$,T=s(2483);const A=t=>((0,a.dD)("data-v-32c8196b"),t=t(),(0,a.Cn)(),t),q={class:"manage-posts"},E=A((()=>(0,a._)("h1",null,[(0,a.Uk)("Manage "),(0,a._)("strong",null,"Posts")],-1))),H={class:"list-wrapper"},B={class:"card-list"},R=A((()=>(0,a._)("span",{class:"footer-totality"},[(0,a._)("button",{type:"button",class:"edit-button btn","data-bs-toggle":"modal","data-bs-target":"#managePost"},[(0,a._)("i",{class:"bi bi-pencil-square"})]),(0,a._)("span",{class:"divider"}),(0,a._)("button",{type:"button",class:"delete-button btn","data-bs-toggle":"modal","data-bs-target":"#deletePrompt"},[(0,a._)("i",{class:"bi bi-trash3-fill"})])],-1))),Y={key:0},W={key:1,class:"text-center mt-5"},Z=A((()=>(0,a._)("br",{class:"d-none"},null,-1)));function O(t,e,s,o,i,l){const r=(0,a.up)("Card"),c=(0,a.up)("ShowMoreButton"),d=(0,a.up)("ManagePostModal"),u=(0,a.up)("SlotModal");return(0,a.wg)(),(0,a.iD)("div",q,[E,(0,a._)("button",{type:"button",class:"add-button btn btn-primary float-start","data-bs-toggle":"modal","data-bs-target":"#managePost",onMouseenter:e[0]||(e[0]=t=>i.selected={post:null,index:-1})}," Make A New Post ",32),(0,a._)("div",H,[(0,a._)("div",B,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(i.posts.items,((t,e)=>((0,a.wg)(),(0,a.j4)(r,{key:t.id,post:t,author:i.author,onMousedown:s=>i.selected={post:t,index:e}},{footer:(0,a.w5)((()=>[R])),_:2},1032,["post","author","onMousedown"])))),128)),0===i.posts.items.length?((0,a.wg)(),(0,a.iD)("div",Y,"You haven't made any posts yet!")):(0,a.kq)("",!0)])]),i.posts.noMore?i.posts.noMore?((0,a.wg)(),(0,a.iD)("p",W,"No more posts to show!")):(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(c,{key:0,onShowMore:e[1]||(e[1]=t=>l.getPosts(++i.posts.page))})),(0,a.Wm)(d,{existingPost:i.selected.post,onEditPost:e[2]||(e[2]=t=>l.editPost(t)),onCreatePost:e[3]||(e[3]=t=>l.createPost(t)),onCreatePrivatePost:e[4]||(e[4]=(t,e)=>l.sendPrivatePost(t,e))},null,8,["existingPost"]),i.selected.post?((0,a.wg)(),(0,a.j4)(u,{key:2,"modal-name":"deletePrompt"},{titleText:(0,a.w5)((()=>[(0,a.Uk)("Delete "),(0,a._)("strong",null,(0,n.zw)(i.selected.post.title),1)])),body:(0,a.w5)((()=>[(0,a.Uk)("Are you sure you want to delete this post?")])),closeButtonText:(0,a.w5)((()=>[(0,a.Uk)(" No! Take me back! ")])),submitButton:(0,a.w5)((()=>[(0,a._)("button",{type:"submit",class:"btn btn-danger","data-bs-dismiss":"modal",onClick:e[5]||(e[5]=t=>l.delPost())},"Yes, I'm sure")])),openModalButton:(0,a.w5)((()=>[Z])),_:1})):(0,a.kq)("",!0)])}s(541);const G=["src","alt"],V=["src","alt"],K={key:0,id:"username"};function Q(t,e,s,o,i,l){const r=(0,a.up)("vue-markdown"),c=(0,a.up)("GenericCard");return i.loading?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(c,{key:0,onHovered:e[0]||(e[0]=t=>i.hovered=!0),onUnhover:e[1]||(e[1]=t=>i.hovered=!1),title:s.post.title,anchor:{name:"postpage",params:{aid:this.author._id,pid:this.post._id},query:{hostURL:this.post.id}},role:"button"},{"card-content":(0,a.w5)((()=>[l.markdownEnabled?((0,a.wg)(),(0,a.j4)(r,{key:0,class:(0,n.C_)(["text-content",{singleton:l.isSingleton}]),source:s.post.content},null,8,["class","source"])):s.post.content?((0,a.wg)(),(0,a.iD)("p",{key:1,class:(0,n.C_)(["text-content",{singleton:l.isSingleton}])},(0,n.zw)(s.post.content),3)):(0,a.kq)("",!0),s.post.image?((0,a.wg)(),(0,a.iD)("img",{key:2,class:(0,n.C_)(["image-content",{singleton:l.isSingleton}]),src:i.imageSrc,alt:s.post.description},null,10,G)):(0,a.kq)("",!0)])),footer:(0,a.w5)((()=>[(0,a.WI)(t.$slots,"footer",{},(()=>[(0,a._)("img",{class:(0,n.C_)(["profile-image",{open:i.hovered}]),src:s.author.profileImage,alt:s.author.profileName},null,10,V),i.hovered?((0,a.wg)(),(0,a.iD)("h6",K," @"+(0,n.zw)(s.author.displayName),1)):(0,a.kq)("",!0)]),!0)])),_:3},8,["title","anchor"]))}var J=s(4893);const X={id:"card-totality"},tt={key:0,class:"post-title"},et={class:"title-text"},st={key:0,class:"decoration-accent"};function ot(t,e,s,o,i,l){return(0,a.wg)(),(0,a.iD)("div",X,[s.title?((0,a.wg)(),(0,a.iD)("div",tt,[(0,a._)("h3",et,(0,n.zw)(s.title),1)])):(0,a.kq)("",!0),(0,a._)("div",{class:"card-body card",onMouseover:e[1]||(e[1]=(...t)=>l.enableHover&&l.enableHover(...t)),onMouseleave:e[2]||(e[2]=(...t)=>l.disableHover&&l.disableHover(...t))},[(0,a._)("div",{class:"content-container",onClick:e[0]||(e[0]=t=>l.goTo(s.anchor))},[s.title?((0,a.wg)(),(0,a.iD)("div",st)):(0,a.kq)("",!0),(0,a._)("div",{class:(0,n.C_)(["scrim",{open:i.hovered}])},null,2),(0,a.WI)(t.$slots,"card-content",{},(()=>[(0,a.Uk)(" Placeholder Content :3 ")]),!0)]),(0,a._)("div",{class:(0,n.C_)([{open:i.hovered},"footer card-footer text-muted"])},[(0,a.WI)(t.$slots,"footer",{class:(0,n.C_)({open:i.hovered})},void 0,!0)],2)],32)])}var at={emits:["hovered","unhover"],props:["title","anchor"],methods:{enableHover(){this.hovered=!0,this.$emit("hovered")},disableHover(){this.hovered=!1,this.$emit("unhover")},goTo(t){t?this.$router.push(t):console.log("No anchor to go to!")}},data(){return{hovered:!1}}};const it=(0,I.Z)(at,[["render",ot],["__scopeId","data-v-65a5b30f"]]);var nt=it;s(2801);const lt=U.Z.create({name:"localNode",baseURL:"https://social-t30.herokuapp.com/api/",headers:{},defaults:{}}),rt=U.Z.create({name:"node7",baseURL:"https://sd-7-433-api.herokuapp.com/api/",headers:{Authorization:`Basic ${btoa("node01:P*ssw0rd!")}`},defaults:{}}),ct=U.Z.create({name:"node9",baseURL:"https://ultimate-teapot.herokuapp.com/main/api/",headers:{Authorization:`Basic ${btoa("team5:jN2!42GUtCgB")}`},defaults:{}}),dt=U.Z.create({name:"node10",baseURL:"https://socialdistcmput404.herokuapp.com/api/",headers:{Authorization:"Token d960c3dee9855f5f5df8207ce1cba7fc1876fedf"},defaults:{}}),ut=U.Z.create({name:"GitHub",baseURL:"https://api.github.com/users/",headers:{Accept:"application/vnd.github+json"}}),mt=[lt,rt,ct,dt];for(const Hl of mt)Hl.interceptors.request.use((t=>(t.url.startsWith("/api/")&&(t.url=t.url.replace("/api/","")),t)));function pt(t){console.log("Endpoint format is: "+t);const e=new URL(t).host;return e.includes("social-t30")?lt:e.includes("sd-7-433-api")?rt:e.includes("ultimate-teapot")?ct:e.includes("socialdistcmput404")?dt:void 0}async function ht(t="get",e,s=null,o=null){const a={};for(const n of mt)try{a[n.defaults.name]=await n[t](e,s,o)}catch(i){console.log("Failed on "+n.defaults.baseURL),console.log(i)}return console.log(a),a}function gt(t){const e=new URL(t).pathname.replace("/api/","");return e}dt.interceptors.request.use((t=>(t.url.endsWith("/")||(t.url+="/"),t)));var bt={install(t){t.config.globalProperties.$localNode=lt,t.config.globalProperties.$node7=rt,t.config.globalProperties.$node9=ct,t.config.globalProperties.$node10=dt,t.config.globalProperties.$github=ut}},ft={components:{VueMarkdown:J.Z,GenericCard:nt},props:["author","post"],async created(){await this.getImage(),this.loading=!1},data(){return{hovered:!1,loading:!0,imageSrc:null}},computed:{markdownEnabled(){return this.post.contentType?.includes("text/markdown")},hasImage(){return this.post.contentType?.includes("image")},hasContent(){return this.post.contentType?.includes("text")},imageURL(){return`${gt(this.post.id)}/image`},isSingleton(){return!!this.hasImage&&!this.hasContent||!this.hasImage&&!!this.hasContent}},methods:{async getImage(){if(this.hasImage){const t=pt(this.post.id),e=new URL(this.post.id).pathname.replace(/^\/api\//,"");t.get(`${e}/image`,{responseType:"blob"}).then((t=>{const e=new Blob([t.data],{type:this.imageMime});this.imageSrc=URL.createObjectURL(e)})).catch((t=>{console.log(t),this.imageSrc="https://commons.wikimedia.org/wiki/File:No-Image-Placeholder.svg"}))}}}};const wt=(0,I.Z)(ft,[["render",Q],["__scopeId","data-v-c4d715b2"]]);var yt=wt;const _t=["id","aria-labelledby"],kt={class:"modal-content"},vt={class:"modal-header"},xt=["id"],Pt={class:"modal-body text-start"},jt=["id"],Ct={class:"modal-footer"},St=["data-bs-target"];function Dt(t,e,s,i,l,r){return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("div",{class:(0,n.C_)(["modal fade",s.sizing]),tabindex:"-1",id:this.modalName,ref:this.modalName,"aria-labelledby":this.modalName+"Label","aria-hidden":"true"},[(0,a._)("div",{class:(0,n.C_)(["modal-dialog",s.justification])},[(0,a._)("div",kt,[(0,a._)("div",vt,[(0,a._)("h5",{class:"modal-title",id:this.modalName+"Label"},[(0,a.WI)(t.$slots,"titleText",{},(()=>[(0,a.Uk)("Modal title")]))],8,xt),(0,a._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:e[0]||(e[0]=(...t)=>r.clearFields&&r.clearFields(...t)),ref:"closeModalButton"},null,512)]),(0,a._)("div",Pt,[(0,a.wy)((0,a._)("div",{class:"alert alert-danger",id:this.modalName+"-alert"},(0,n.zw)(l.errorMsg),9,jt),[[o.F8,l.errorMsg]]),(0,a.WI)(t.$slots,"body",{submitMethod:r.submitForm})]),(0,a._)("div",Ct,[(0,a._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal",onClick:e[1]||(e[1]=(...t)=>r.clearFields&&r.clearFields(...t))},[(0,a.WI)(t.$slots,"closeButtonText",{},(()=>[(0,a.Uk)("Close")]))]),(0,a.WI)(t.$slots,"submitButton")])])],2)],10,_t),(0,a.WI)(t.$slots,"openModalButton",{},(()=>[(0,a._)("button",{type:"button",class:"btn btn-primary","data-bs-toggle":"modal","data-bs-target":"#"+this.modalName}," Open modal ",8,St)]))],64)}var Ut={name:"SlotModal",emits:["alert","submitMyForm","clearFields"],props:{modalName:String,sizing:{default:null,type:String},justification:{default:null,type:String}},data(){return{errorMsg:""}},methods:{submitForm(t){console.log("submitting form"),this.$emit("submitMyForm",{done:()=>{this.clearFields(),this.errorMsg="",this.closeModal()},e:t=>{this.errorMsg=t}})},clearFields(){this.$emit("clearFields")},closeModal(){this.$refs.closeModalButton.click()}}};const Mt=(0,I.Z)(Ut,[["render",Dt]]);var It=Mt;const Nt=t=>((0,a.dD)("data-v-6828189a"),t=t(),(0,a.Cn)(),t),Ft={class:"modal fade bd-example-modal-lg",ref:"managePost",id:"managePost",tabindex:"-1",role:"dialog","aria-labelledby":":3","aria-hidden":"true"},zt={class:"modal-dialog modal-xl modal-dialog-centered"},$t={class:"modal-content"},Lt={class:"modal-header"},Tt={class:"modal-title"},At=Nt((()=>(0,a._)("span",{"aria-hidden":"true"},null,-1))),qt=[At],Et={class:"modal-body"},Ht={class:"form-group"},Bt=Nt((()=>(0,a._)("label",{for:"post-title",class:"d-flex justify-content-left","aria-autocomplete":"off"},"Post Title",-1))),Rt={class:"d-flex justify-content-center form-text text-muted"},Yt={class:"row"},Wt={class:"col"},Zt={class:"form-check form-check-inline"},Ot=Nt((()=>(0,a._)("label",{for:"privacy-private",class:"form-check-label"},"Private",-1))),Gt={class:"form-check form-check-inline"},Vt=Nt((()=>(0,a._)("label",{for:"privacy-friends",class:"form-check-label"},"Friends",-1))),Kt={class:"form-check form-check-inline"},Qt=Nt((()=>(0,a._)("label",{for:"privacy-public",class:"form-check-label"},"Public",-1))),Jt={class:"col"},Xt={class:"form-check form-switch d-flex justify-content-center gap-3 mb-2"},te=Nt((()=>(0,a._)("label",{class:"form-check-label",for:"markdown-toggle"},[(0,a._)("i",{class:"bi-markdown-fill"}),(0,a.Uk)(" Use Markdown ")],-1))),ee={key:0,class:"mb-2"},se=Nt((()=>(0,a._)("label",{for:"follower-list",class:"d-flex justify-content-left","aria-autocomplete":"off"},"Share with your Followers",-1))),oe={id:"follower-list",class:"list-group"},ae=["id","onChange"],ie=["for"],ne={class:"tag badge rounded-pill border border-primary text-primary mx-1"},le=["onClick"],re={class:"modal-footer"},ce={key:0,class:"error-container"},de=Nt((()=>(0,a._)("i",{class:"bi bi-send-fill"},null,-1)));function ue(t,e,s,i,l,r){const c=(0,a.up)("ImagePostBody");return(0,a.wg)(),(0,a.iD)("div",Ft,[(0,a._)("div",zt,[(0,a._)("div",$t,[(0,a._)("div",Lt,[(0,a._)("h5",Tt,[(0,a.Uk)((0,n.zw)(r.modalTitleMode)+" ",1),(0,a._)("strong",null,(0,n.zw)(r.modalTitlePostName),1)]),(0,a._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal",ref:"Close","aria-label":"Close",onMousedown:e[0]||(e[0]=e=>t.$emit("dismiss"))},qt,544)]),(0,a._)("div",Et,[(0,a._)("form",null,[(0,a._)("div",Ht,[Bt,(0,a.wy)((0,a._)("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>l.post.title=t),type:"text",class:"form-control",id:"post-title","aria-describedby":"postTitle",placeholder:"Write a title for your post"},null,512),[[o.nr,l.post.title]]),(0,a._)("small",Rt,(0,n.zw)(l.post.title.length)+"/"+(0,n.zw)(r.titleMaxLength),1)]),(0,a._)("div",Yt,[(0,a._)("div",Wt,[(0,a._)("div",Zt,[(0,a.wy)((0,a._)("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>l.post.visibility=t),id:"privacy-private",class:"form-check-input",type:"radio",value:"PRIVATE"},null,512),[[o.G2,l.post.visibility]]),Ot]),(0,a._)("div",Gt,[(0,a.wy)((0,a._)("input",{"onUpdate:modelValue":e[3]||(e[3]=t=>l.post.visibility=t),id:"privacy-friends",class:"form-check-input",type:"radio",value:"FRIENDS"},null,512),[[o.G2,l.post.visibility]]),Vt]),(0,a._)("div",Kt,[(0,a.wy)((0,a._)("input",{"onUpdate:modelValue":e[4]||(e[4]=t=>l.post.visibility=t),id:"privacy-public",class:"form-check-input",type:"radio",value:"PUBLIC"},null,512),[[o.G2,l.post.visibility]]),Qt])]),(0,a._)("div",Jt,[(0,a._)("div",Xt,[(0,a.wy)((0,a._)("input",{"onUpdate:modelValue":e[5]||(e[5]=t=>l.markDownEnabled=t),onChange:e[6]||(e[6]=(...t)=>r.setText&&r.setText(...t)),id:"markdown-toggle",class:"form-check-input pr-2",type:"checkbox"},null,544),[[o.e8,l.markDownEnabled]]),te])])]),"PRIVATE"==l.post.visibility?((0,a.wg)(),(0,a.iD)("div",ee,[se,(0,a._)("ul",oe,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.followers,((t,e)=>((0,a.wg)(),(0,a.iD)("li",{class:"list-group-item d-flex justify-content-start",key:t.id},[(0,a._)("input",{class:"form-check-input me-1",type:"checkbox",value:"","aria-label":"...",id:t.id,onChange:s=>r.updateSelected(t,e)},null,40,ae),(0,a._)("label",{for:t.id,class:"mx-3"},[(0,a._)("strong",null,(0,n.zw)(t.displayName),1),(0,a.Uk)(" ("+(0,n.zw)(t.host)+")",1)],8,ie)])))),128))])])):(0,a.kq)("",!0),(0,a.wy)((0,a._)("textarea",{"onUpdate:modelValue":e[7]||(e[7]=t=>l.post.content=t),onInput:e[8]||(e[8]=(...t)=>r.setText&&r.setText(...t)),class:"text-input form-control",placeholder:"Give your post some body text"},null,544),[[o.nr,l.post.content]]),(0,a.Wm)(c,{class:"image-upload",image:r.imageDataURL,onImageUploaded:e[9]||(e[9]=t=>r.setImage(t)),onImageClear:e[10]||(e[10]=t=>r.setImage(null))},null,8,["image"]),(0,a.wy)((0,a._)("input",{"onUpdate:modelValue":e[11]||(e[11]=t=>l.post.description=t),class:"text-input form-control mb-3",placeholder:"Write an (optional) description here"},null,512),[[o.nr,l.post.description]]),(0,a._)("div",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(this.post?.categories,((t,e)=>((0,a.wg)(),(0,a.iD)("span",{key:e},[(0,a._)("span",ne,[(0,a.Uk)((0,n.zw)(t)+" ",1),(0,a._)("button",{type:"button",class:"btn btn-close clear-tag-button",onClick:t=>r.removeTag(e)},null,8,le)])])))),128))]),(0,a._)("input",{onKeyup:e[12]||(e[12]=(0,o.D2)((t=>r.addTag(t)),["enter"])),placeholder:"Add a tag (ENTER to save)",class:"text-input form-control mt-2"},null,32),(0,a._)("div",re,[l.invalidSubmit?((0,a.wg)(),(0,a.iD)("div",ce,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(r.errors,(t=>((0,a.wg)(),(0,a.iD)("small",{key:t,class:(0,n.C_)(["error-message text-danger",{visible:l.invalidSubmit}])},(0,n.zw)(t+" "),3)))),128))])):(0,a.kq)("",!0),(0,a._)("button",{type:"button",class:"btn btn-outline-primary",onMousedown:e[13]||(e[13]=(...t)=>r.submitPost&&r.submitPost(...t))},[(0,a.Uk)("Post "),de],32)])])])])])],512)}s(1295);const me=t=>((0,a.dD)("data-v-348076fb"),t=t(),(0,a.Cn)(),t),pe={id:"makeImagePostBody"},he={key:0,class:"image-upload-wrapper image-container"},ge=me((()=>(0,a._)("i",{class:"bi bi-upload"},null,-1))),be=me((()=>(0,a._)("small",null,"Upload an image",-1))),fe=[ge,be],we={key:1,class:"image-container"},ye=["src"],_e=me((()=>(0,a._)("i",{class:"bi bi-x"},null,-1))),ke=[_e];function ve(t,e,s,o,i,l){return(0,a.wg)(),(0,a.iD)("div",pe,[l.imageUploaded?((0,a.wg)(),(0,a.iD)("div",we,[(0,a._)("img",{class:"image-upload img-fluid",src:i.imageSrc},null,8,ye),(0,a._)("button",{type:"button",class:"btn image-cancel",onClick:e[3]||(e[3]=(...t)=>l.clearImage&&l.clearImage(...t))},ke)])):((0,a.wg)(),(0,a.iD)("div",he,[(0,a._)("div",{class:(0,n.C_)(["wrapper-text",{hovered:i.hovered}])},fe,2),(0,a._)("input",{type:"file",accept:"image/jpeg,image/png",class:"image-container form-control",onMouseenter:e[0]||(e[0]=t=>i.hovered=!0),onMouseleave:e[1]||(e[1]=t=>i.hovered=!1),onChange:e[2]||(e[2]=t=>l.encodeFileBase64(t.target.files[0]))},null,32)]))])}var xe={props:["image"],emits:["image-uploaded","image-clear"],data(){return{imageSrc:null,hovered:!1}},computed:{imageUploaded(){return null!==this.imageSrc},imageEncoded(){return this.imageUploaded?this.imageSrc.replace("data:","").replace(/^.+,/,""):null},imageMime(){return this.imageUploaded?this.imageSrc.replace("data:","").match(/^.+,/)[0].replace(",",""):null}},watch:{image:{immediate:!0,handler(t){this.imageSrc=t}}},methods:{encodeFileBase64(t){console.log(t),this.blobToBase64(t)},encodeURLBase64(t){U.Z.get(t,{responseType:"blob"}).then((t=>{console.log("Got blob!"),this.blobToBase64(t.data)})).catch((t=>{this.imageSrc=null,console.log("The image provided from server couldn't be loaded"),console.log(t)}))},blobToBase64(t){const e=new FileReader;e.onloadend=()=>{this.imageSrc=e.result,this.emitImageStatus()},e.readAsDataURL(t)},clearImage(){this.$emit("imageClear"),this.imageSrc=null},emitImageStatus(){this.$emit("imageUploaded",{source:this.imageSrc,mime:this.imageMime,raw64:this.imageEncoded})}}};const Pe=(0,I.Z)(xe,[["render",ve],["__scopeId","data-v-348076fb"]]);var je=Pe,Ce={components:{ImagePostBody:je},props:["existingPost"],emits:["createPost","editPost","dismiss","createPrivatePost"],data(){return{post:null,markDownEnabled:!1,invalidSubmit:!1,followers:[],sessionAuthor:[],selectedFollowers:[]}},computed:{...(0,C.Kc)(D),modalTitleMode(){return this.existingPost?"Edit":"Make a"},modalTitlePostName(){return this.existingPost?this.existingPost.title:"New Post"},titleMaxLength(){return 30},errors(){const t=[];return(this.post.title.length>this.titleMaxLength||0===this.post.title.length)&&t.push("Your post needs a title between 1 and 30 characters!"),this.post.image||this.post.content||t.push("You need text and/or image content!"),t},imageDataURL(){if(this.existingPost&&this.post.image){const t=this.post.contentType.find((t=>t.includes("image")));return String.raw`data:${t},${this.post.image}`}return null}},created(){this.post=this.getTemplate()},mounted(){const t=this.$refs.managePost;this.getAuthorFromStore(),this.getFollowers(),t.addEventListener("show.bs.modal",(()=>{this.existingPost?(this.post=structuredClone(this.existingPost),this.post.contentType=this.post.contentType.split(","),this.post.contentType.includes("text/markdown")&&(this.markDownEnabled=!0)):this.post=this.getTemplate()})),t.addEventListener("hidden.bs.modal",(()=>{this.post=this.getTemplate()}))},methods:{getAuthorFromStore(){const t=this.userStore;t.initializeStore(),this.sessionAuthor=t.user.author},updateSelected(t,e){this.selectedFollowers.includes(t)?this.selectedFollowers.splice(e,1):this.selectedFollowers.push(t)},getFollowers(){this.$localNode.get(`/authors/${this.sessionAuthor._id}/followers/`).then((t=>{console.log(t),this.followers=t.data.items})).catch((function(t){console.log(t)}))},addTag(t){this.post.categories.push(t.target.value),t.target.value=""},removeTag(t){this.post.categories.splice(t,1)},setText(){this.sanitizeContentTypes("text"),this.appendMime(this.markDownEnabled?"text/markdown":"text/plain")},setImage(t){this.sanitizeContentTypes("image"),t?(this.post.image=t.raw64,this.appendMime(t.mime)):this.post.image=null},getTemplate(){return{type:"post",title:"",source:"https://social-t30.herokuapp.com",origin:"https://social-t30.herokuapp.com",description:"",contentType:[],content:"",image:null,categories:[],count:0,unlisted:!1,visibility:"PUBLIC",author:this.author,comments:null,id:null,_id:null,published:"2023-03-01T21:18:38.908794Z"}},appendMime(t){this.sanitizeContentTypes(t),t&&this.post.contentType.push(t)},sanitizeContentTypes(t){this.post.contentType=this.post.contentType.filter((e=>!e.includes(t)))},submitPost(){0===this.errors.length?(this.post.contentType=this.post.contentType.toString(),this.$refs.Close.click(),this.existingPost?(this.$emit("editPost",this.post),this.$emit("dismiss")):(this.$emit("createPost",this.post),this.$emit("dismiss")),"PRIVATE"===this.post.visibility&&(console.log("private post made"),this.$emit("createPrivatePost",{post:this.post,authors:this.selectedFollowers}))):this.invalidSubmit=!0}}};const Se=(0,I.Z)(Ce,[["render",ue],["__scopeId","data-v-6828189a"]]);var De=Se;function Ue(t,e,s,o,i,n){return(0,a.wg)(),(0,a.iD)("button",{type:"button",class:"btn btn-outline-primary btn-lg btn-block mt-5",id:"show-more",onClick:e[0]||(e[0]=(...t)=>n.myOnClick&&n.myOnClick(...t))},[(0,a.WI)(t.$slots,"default",{},(()=>[(0,a.Uk)("Show more")]),!0)])}var Me={emits:["showMore"],methods:{myOnClick(){this.$emit("showMore")}}};const Ie=(0,I.Z)(Me,[["render",Ue],["__scopeId","data-v-385a637b"]]);var Ne=Ie,Fe=s(536),ze={components:{ManagePostModal:De,Card:yt,SlotModal:It,ShowMoreButton:Ne},data(){return{posts:{items:[],size:12,page:1,noMore:!1},selected:{post:null,index:-1},showPrompt:!1,author:null,test_posts:[]}},computed:{...(0,C.Kc)(D),udEndPoint(){return this.selected.post?`${gt(this.selected.post.id)}/`:""},crEndPoint(){return`${gt(this.author.id)}/posts/`}},methods:{getAuthorFromStore(){const t=this.userStore;t.initializeStore(),this.author=t.user.author},sendPrivatePost(t){const e=t.post;let s;for(const o of t.authors){const t=pt(o.id);console.log("Going to "+t.defaults.name),t===this.$node10&&(s=e,s.description=""===s.description?"something":s.description,s.visibility="VISIBLE",e.categories.length>0?s.categories=e.categories.toString():delete s.categories),t.post(`${gt(o.id)}/inbox/`,t===this.$node10?s:e).then((t=>{console.log(t)})).catch((t=>{console.table(s),409===t.response.status?alert(`You already shared with ${o.displayName}`):alert("Couldn't send the post")}))}},createPost(t){t.author=this.author,t._id=(0,Fe.Z)(),t.id=this.author.id+"/posts/"+t._id,t.comments=t.id+"/comments",console.log(t),this.$localNode.post(this.crEndPoint,t).then((()=>{this.posts.items.unshift(t)})).catch((()=>{alert("Couldn't add the post!")})),this.showManage=!1},getPosts(t){this.$localNode.get(this.crEndPoint,{params:{size:this.posts.size,page:t}}).then((t=>{this.posts.items=this.posts.items.concat(t.data),t.data.length<this.posts.size&&(this.posts.noMore=!0)})).catch((t=>{console.log(t),this.posts.noMore=!0}))},editPost(t){this.$localNode.post(this.udEndPoint,t).then((()=>{this.posts.items[this.selected.index]=t})).catch((()=>{alert("Couldn't edit the post!")})),this.showManage=!1},delPost(){this.$localNode.delete(this.udEndPoint).then((()=>{this.posts.items.splice(this.selected.index,1)})).catch((()=>{alert("Couldn't delete the post!")}))}},mounted(){this.getAuthorFromStore(),this.getPosts(this.posts.page)}};const $e=(0,I.Z)(ze,[["render",O],["__scopeId","data-v-32c8196b"]]);var Le=$e;const Te=t=>((0,a.dD)("data-v-7a267c38"),t=t(),(0,a.Cn)(),t),Ae={key:0,class:"load-spinner spinner-border text-info text-center",role:"loading"},qe={class:"browse-posts pb-5"},Ee=Te((()=>(0,a._)("h1",{class:"text-left"},[(0,a.Uk)("Browse "),(0,a._)("strong",null,"Posts")],-1))),He={class:"filetypes d-flex justify-content-center"},Be=Te((()=>(0,a._)("i",{class:"bi bi-blockquote-left d-block"},null,-1))),Re=Te((()=>(0,a._)("i",{class:"bi bi-markdown-fill d-block"},null,-1))),Ye=Te((()=>(0,a._)("i",{class:"bi bi-image-fill d-block"},null,-1))),We={class:"reverse d-flex justify-content-center mt-3"},Ze=Te((()=>(0,a._)("i",{class:"bi bi-calendar"},null,-1))),Oe=Te((()=>(0,a._)("button",{type:"button",class:"btn btn-outline-primary open-filter-modal d-flex justify-self-start","data-bs-toggle":"modal","data-bs-target":"#filterModal"},[(0,a._)("i",{class:"bi bi-funnel-fill"}),(0,a.Uk)(" Filter Posts")],-1))),Ge={key:1,class:"all-posts"},Ve={class:"text-primary mx-5 px-2"},Ke=Te((()=>(0,a._)("hr",{class:"date-header bg-secondary"},null,-1))),Qe={class:"card-list pb-5"},Je={key:1,class:"text-center"};function Xe(t,e,s,o,i,l){const r=(0,a.up)("SlotModal"),c=(0,a.up)("Card"),d=(0,a.up)("ShowMoreButton");return(0,a.wg)(),(0,a.iD)(a.HY,null,[i.loading?((0,a.wg)(),(0,a.iD)("div",Ae)):(0,a.kq)("",!0),(0,a._)("div",qe,[Ee,i.loading?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(r,{key:0,"modal-name":"filterModal"},{titleText:(0,a.w5)((()=>[(0,a.Uk)("Filter Posts")])),body:(0,a.w5)((()=>[(0,a._)("div",He,[(0,a._)("button",{onClick:e[0]||(e[0]=t=>l.toggle("plain")),class:(0,n.C_)(["btn mx-2 filter-button",i.active.plain?"btn-primary":"btn-outline-secondary"])},[Be,(0,a.Uk)(" Plaintext ")],2),(0,a._)("button",{onClick:e[1]||(e[1]=t=>l.toggle("markdown")),class:(0,n.C_)(["btn mx-2 filter-button",i.active.markdown?"btn-primary":"btn-outline-secondary"])},[Re,(0,a.Uk)(" Markdown ")],2),(0,a._)("button",{onClick:e[2]||(e[2]=t=>l.toggle("image")),class:(0,n.C_)(["btn mx-2 filter-button",i.active.image?"btn-primary":"btn-outline-secondary"])},[Ye,(0,a.Uk)(" Image ")],2)]),(0,a._)("div",We,[(0,a._)("button",{onClick:e[3]||(e[3]=(...t)=>l.reversePosts&&l.reversePosts(...t)),class:"btn btrn primary"},[Ze,(0,a._)("i",{class:(0,n.C_)(["bi",i.reverse?"bi-arrow-up":"bi-arrow-down"])},null,2)])])])),closeButtonText:(0,a.w5)((()=>[(0,a.Uk)("Done")])),openModalButton:(0,a.w5)((()=>[Oe])),_:1})),i.loading?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",Ge,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(Object.entries(l.postSections),(([t,e])=>((0,a.wg)(),(0,a.iD)("div",{key:t},[(0,a._)("h3",Ve,(0,n.zw)(t===l.today?"Today":t),1),Ke,(0,a._)("div",Qe,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e,(t=>((0,a.wg)(),(0,a.j4)(c,{key:t.id,author:t.author,post:t},null,8,["author","post"])))),128))])])))),128)),i.allPosts.noMore?i.allPosts.noMore?((0,a.wg)(),(0,a.iD)("p",Je,"No more posts to show!")):(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(d,{key:0,onShowMore:e[4]||(e[4]=t=>l.getPosts(++i.allPosts.page))}))]))])],64)}var ts=s(6797),es=s.n(ts);const ss="YYYY-MM-DD";var os={name:"BrowsePage",components:{Card:yt,SlotModal:It,ShowMoreButton:Ne},data(){return{allPosts:{items:[],size:10,page:1,noMore:!1},author:null,loading:!0,active:{plain:!0,markdown:!0,image:!0},reverse:!1}},computed:{...(0,C.Kc)(D),postSections(){const t=this.groupPostsByDate(this.filteredPosts);return t},today(){return es()().format(ss)},filteredPosts(){return this.allPosts.items?.length>0?this.allPosts.items.filter((t=>this.matchesActive(t))):[]}},methods:{toggle(t){this.active[t]=!this.active[t]},reversePosts(){this.reverse=!this.reverse,this.allPosts.items=this.allPosts.items.reverse()},matchesActive(t){for(const[e,s]of Object.entries(this.active))if(!s&&t.contentType.includes(e))return!1;return!0},getAuthorFromStore(){const t=this.userStore;t.initializeStore(),this.author=t.user.author},groupPostsByDate(t){return t.reduce(((t,e)=>{const s=es()(e.published).format(ss),o=t[s]??[];return{...t,[s]:[...o,e]}}),{})},async getPosts(t){this.$localNode.get("posts",{params:{size:this.allPosts.size,page:t}}).then((t=>{this.allPosts.items=this.allPosts.items.concat(t.data.items),t.data.items.length<this.allPosts.size&&(this.allPosts.noMore=!0),this.loading=!1})).catch((t=>{console.log(t),this.allPosts.noMore=!0}))}},async mounted(){this.getAuthorFromStore(),await this.getPosts(this.allPosts.page)}};const as=(0,I.Z)(os,[["render",Xe],["__scopeId","data-v-7a267c38"]]);var is=as;const ns=t=>((0,a.dD)("data-v-78686ab9"),t=t(),(0,a.Cn)(),t),ls={class:"d-flex min-vh-100"},rs={class:"form-group authForm"},cs={key:0,class:"alert alert-success alert-dismissible fade show",role:"alert"},ds=ns((()=>(0,a._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"alert","aria-label":"Close"},null,-1))),us=ns((()=>(0,a._)("h1",null,[(0,a._)("i",{class:"bi bi-people-fill"})],-1))),ms=ns((()=>(0,a._)("h2",null,"Social Distribution",-1))),ps=ns((()=>(0,a._)("h3",null,"Login",-1))),hs={key:0,class:"alert alert-danger",role:"alert"},gs={class:"input-group mb-3"},bs=ns((()=>(0,a._)("div",{class:"input-group-text"},[(0,a._)("span",{class:"field-icon",id:"username-icon"},[(0,a._)("i",{class:"bi bi-person-fill"})])],-1))),fs={class:"input-group mb-3"},ws=ns((()=>(0,a._)("div",{class:"input-group-text"},[(0,a._)("span",{class:"field-icon",id:"password-icon"},[(0,a._)("i",{class:"bi bi-lock-fill"})])],-1))),ys=ns((()=>(0,a._)("button",{class:"btn btn-primary",type:"submit"},"Login",-1))),_s=ns((()=>(0,a._)("br",null,null,-1)));function ks(t,e,s,i,l,r){const c=(0,a.up)("router-link");return(0,a.wg)(),(0,a.iD)("div",ls,[(0,a._)("div",rs,[r.justSignedUp?((0,a.wg)(),(0,a.iD)("div",cs,[(0,a.Uk)(" Signup successful! Please login. "),ds])):(0,a.kq)("",!0),us,ms,ps,(0,a._)("form",{onSubmit:e[2]||(e[2]=(0,o.iM)(((...t)=>r.submitForm&&r.submitForm(...t)),["prevent"]))},[l.authError?((0,a.wg)(),(0,a.iD)("div",hs,(0,n.zw)(l.authError),1)):(0,a.kq)("",!0),(0,a._)("div",gs,[bs,(0,a.wy)((0,a._)("input",{class:"form-control",type:"text",name:"username","onUpdate:modelValue":e[0]||(e[0]=t=>l.username=t),placeholder:"Username"},null,512),[[o.nr,l.username]])]),(0,a._)("div",fs,[ws,(0,a.wy)((0,a._)("input",{class:"form-control",type:"password",name:"password","onUpdate:modelValue":e[1]||(e[1]=t=>l.password=t),placeholder:"Password"},null,512),[[o.nr,l.password]])]),ys],32),_s,(0,a.Uk)("Don't have an account? "),(0,a.Wm)(c,{to:"/signup"},{default:(0,a.w5)((()=>[(0,a.Uk)("Sign up")])),_:1})])])}function vs(t,e){if("response"in t){const s=t.response;if(400===s.status){const t=s.data,o=Object.keys(t).reduce(((s,o)=>s.concat(e[o]+": "+t[o].join("\n"))),[]);return o.join("\n\n")}return s.statusText}return t.message}var xs={name:"LogIn",data(){return{username:"",password:"",authError:""}},methods:{submitForm(t){const e={username:this.username,password:this.password};null!==localStorage.getItem("token")&&(localStorage.removeItem("token"),console.log("Removed existing token")),this.$localNode.post("token/login",e).then((t=>{console.log(t);const e=t.data.auth_token,s=S();s.setToken(e),this.$localNode.defaults.headers.common.Authorization=`Token ${e}`,localStorage.setItem("token",e),this.$localNode.get("users/me").then((t=>{this.authError="";const e=t.data,s=this.userStore;s.setUser(e),this.$router.push("/home")})).catch((t=>{console.log(t)}))})).catch((t=>{console.log(t);const e={username:"Username",password:"Password",non_field_errors:"Error"},s=vs(t,e);this.authError=s}))}},computed:{...(0,C.Kc)(S,D),justSignedUp(){return this.$route.query.signedup}}};const Ps=(0,I.Z)(xs,[["render",ks],["__scopeId","data-v-78686ab9"]]);var js=Ps;const Cs=t=>((0,a.dD)("data-v-1414901c"),t=t(),(0,a.Cn)(),t),Ss={class:"d-flex min-vh-100"},Ds={class:"form-group authForm"},Us=Cs((()=>(0,a._)("h1",null,[(0,a._)("i",{class:"bi bi-people-fill"})],-1))),Ms=Cs((()=>(0,a._)("h2",null,"Social Distribution",-1))),Is=Cs((()=>(0,a._)("h3",null,"Sign Up",-1))),Ns={key:0,class:"alert alert-danger",role:"alert"},Fs={class:"input-group mb-3"},zs=Cs((()=>(0,a._)("div",{class:"input-group-text"},[(0,a._)("span",{class:"field-icon",id:"username-icon"},[(0,a._)("i",{class:"bi bi-person-fill"})])],-1))),$s={class:"input-group mb-3"},Ls=Cs((()=>(0,a._)("div",{class:"input-group-text"},[(0,a._)("span",{class:"field-icon",id:"password-icon"},[(0,a._)("i",{class:"bi bi-lock-fill"})])],-1))),Ts={class:"input-group mb-3"},As=Cs((()=>(0,a._)("div",{class:"input-group-text"},[(0,a._)("span",{class:"field-icon",id:"password-icon"},[(0,a._)("i",{class:"bi bi-lock-fill"})])],-1))),qs=Cs((()=>(0,a._)("button",{class:"btn btn-primary",type:"submit"},"Sign Up",-1))),Es=Cs((()=>(0,a._)("br",null,null,-1)));function Hs(t,e,s,i,l,r){const c=(0,a.up)("router-link");return(0,a.wg)(),(0,a.iD)("div",Ss,[(0,a._)("div",Ds,[Us,Ms,Is,(0,a._)("form",{onSubmit:e[3]||(e[3]=(0,o.iM)(((...t)=>r.submitForm&&r.submitForm(...t)),["prevent"]))},[l.authError?((0,a.wg)(),(0,a.iD)("div",Ns,(0,n.zw)(l.authError),1)):(0,a.kq)("",!0),(0,a._)("div",Fs,[zs,(0,a.wy)((0,a._)("input",{class:"form-control",type:"text",name:"username","onUpdate:modelValue":e[0]||(e[0]=t=>l.username=t),placeholder:"Username"},null,512),[[o.nr,l.username]])]),(0,a._)("div",$s,[Ls,(0,a.wy)((0,a._)("input",{class:"form-control",type:"password",name:"password","onUpdate:modelValue":e[1]||(e[1]=t=>l.password=t),placeholder:"Password"},null,512),[[o.nr,l.password]])]),(0,a._)("div",Ts,[As,(0,a.wy)((0,a._)("input",{class:"form-control",type:"password",name:"password","onUpdate:modelValue":e[2]||(e[2]=t=>l.confirmPassword=t),placeholder:"Confirm password"},null,512),[[o.nr,l.confirmPassword]])]),qs],32),Es,(0,a.Uk)("Already have an account? "),(0,a.Wm)(c,{to:"/login"},{default:(0,a.w5)((()=>[(0,a.Uk)("Log in")])),_:1})])])}var Bs={name:"sign-up",data(){return{username:"",password:"",confirmPassword:"",authError:""}},methods:{submitForm(t){const e={username:this.username,password:this.password};this.password!==this.confirmPassword?(this.authError="Passwords do not match.",this.password="",this.confirmPassword=""):(null!==localStorage.getItem("token")&&(localStorage.removeItem("token"),console.log("Removed existing token")),this.$localNode.post("/users/",e).then((t=>{this.$router.push({path:"/login",query:{signedup:!0}}),console.log(t)})).catch((t=>{console.log(t);const e={username:"Username",password:"Password",non_field_errors:"Error"},s=vs(t,e);this.authError=s})))}}};const Rs=(0,I.Z)(Bs,[["render",Hs],["__scopeId","data-v-1414901c"]]);var Ys=Rs;const Ws={key:0,class:"load-spinner spinner-border text-info text-center",role:"loading"},Zs={key:1,class:"follow-accounts",id:"follows"},Os=["id"],Gs={class:"section-header"},Vs={key:0,class:"mb-5"},Ks={key:1,class:"d-flex flex-wrap justify-content-center mb-5"},Qs={key:0,class:"wrapper d-flex flex-column justify-content-center text-center"},Js=["src"],Xs={class:"mt-1"},to={key:1,class:"wrapper d-flex flex-column justify-content-center text-center"},eo=["src"],so={class:"mt-1"},oo={key:0,class:"accept-footer d-flex align-items-center justify-content-around"},ao=["onClick"],io=["onClick"],no={key:1,class:"d-flex justify-content-center align-items-center"},lo={key:2,class:"all-authors pb-5"},ro=["id"],co={class:"section-header"},uo={class:"d-flex flex-wrap justify-content-center mb-5"},mo={class:"wrapper d-flex flex-column justify-content-center text-center"},po=["src"],ho={class:"mt-1"},go={class:"request-footer d-flex align-items-center justify-content-around"},bo=["onClick"];function fo(t,e,s,o,i,l){const r=(0,a.up)("GenericCard");return(0,a.wg)(),(0,a.iD)(a.HY,null,[i.loading?((0,a.wg)(),(0,a.iD)("div",Ws)):(0,a.kq)("",!0),i.loading?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",Zs,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.friendlies,(t=>((0,a.wg)(),(0,a.iD)("div",{key:t,id:t},[(0,a._)("h2",Gs,[(0,a.Uk)("My "),(0,a._)("strong",null,(0,n.zw)(l.textTransform(t.type,!1,!0)),1)]),0===t.items?.length?((0,a.wg)(),(0,a.iD)("p",Vs,"You don't have any "+(0,n.zw)(t.type)+" ð",1)):((0,a.wg)(),(0,a.iD)("div",Ks,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(t.items,(e=>((0,a.wg)(),(0,a.j4)(r,{key:e.id,class:"m-2"},{"card-content":(0,a.w5)((()=>["requests"!==t.type?((0,a.wg)(),(0,a.iD)("div",Qs,[(0,a._)("img",{src:""!==e.profileImage?e.profileImage:i.defaultImage,class:"profile-image"},null,8,Js),(0,a._)("h3",Xs,[(0,a._)("strong",null,"@"+(0,n.zw)(e.displayName),1)]),(0,a._)("small",null,(0,n.zw)(e.host),1)])):((0,a.wg)(),(0,a.iD)("div",to,[(0,a._)("img",{src:e.actor.profileImage,class:"profile-image"},null,8,eo),(0,a._)("h3",so,[(0,a._)("strong",null,"@"+(0,n.zw)(e.actor.displayName),1)]),(0,a._)("small",null,(0,n.zw)(e.actor.host),1)]))])),footer:(0,a.w5)((()=>["requests"===t.type?((0,a.wg)(),(0,a.iD)("div",oo,[(0,a._)("button",{class:"btn text-info",onClick:t=>l.handleRequest("Accepted",e)},"Accept",8,ao),(0,a._)("button",{class:"btn text-light",onClick:t=>l.handleRequest("Declined",e)},"Reject",8,io)])):((0,a.wg)(),(0,a.iD)("div",no,[(0,a._)("p",null,(0,n.zw)(l.textTransform(t.type,!0,!0)),1)]))])),_:2},1024)))),128))]))],8,Os)))),128))])),i.loading?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",lo,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(Object.keys(i.authorNodes),(t=>((0,a.wg)(),(0,a.iD)("div",{key:t,id:t},[(0,a._)("h2",co,[(0,a._)("strong",null,(0,n.zw)("localNode"===t?"Local":`${l.textTransform(t,!1,!0)}'s`),1),(0,a.Uk)(" Authors")]),(0,a._)("div",uo,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(i.authorNodes[t].data.items,(t=>((0,a.wg)(),(0,a.j4)(r,{key:t.id,class:"m-2"},{"card-content":(0,a.w5)((()=>[(0,a._)("div",mo,[(0,a._)("img",{src:""!==t.profileImage?t.profileImage:i.defaultImage,class:"profile-image"},null,8,po),(0,a._)("h3",ho,[(0,a._)("strong",null,"@"+(0,n.zw)(t.displayName),1)])])])),footer:(0,a.w5)((()=>[(0,a._)("div",go,[(0,a._)("button",{class:"btn text-info",onClick:e=>l.sendFollow(t)},"Send Follow Request",8,bo)])])),_:2},1024)))),128))])],8,ro)))),128))]))],64)}const wo={type:"Follow",actor:Object,object:Object,state:null};var yo={name:"SocialPage",components:{GenericCard:nt},computed:{...(0,C.Kc)(D),pendingRequests(){if(this.loading)return{type:"requests",items:[]};{const t=this.inbox.filter((t=>"Follow"===t.type)),e=t.filter((t=>!t.state)),s=t.filter((t=>!!t.state)),o=e.filter((t=>!s.some((e=>t.actor.url===e.actor.url))));return{type:"requests",items:o}}},friendlies(){return{requests:this.pendingRequests,friends:this.friendliesProxy.friends,followers:this.friendliesProxy.followers,following:this.friendliesProxy.following}}},async mounted(){this.getAuthorFromStore(),this.basePath=new URL(this.sessionAuthor.id).pathname.replace(/\/api\//,""),await this.getRequests(),await this.getFriendlies(),await this.getAllAuthors(),this.loading=!1},data(){return{defaultImage:"/defaultProfileImage.png",friendliesProxy:{friends:[],followers:[],following:[]},inbox:[],authorNodes:{local:[],node10:[],node7:[]},sessionAuthor:null,basePath:String,loading:!0}},methods:{textTransform(t,e,s){try{return s&&(t=t?.charAt(0).toUpperCase()+t?.slice(1)),e&&(t=t?.replace(/s$/,"")),t}catch{console.log("Failed on: "+t),console.table(t)}},handleRequest(t,e){const s=wo;s.state=t,s.actor=e.actor,s.object=this.sessionAuthor,console.table(s),this.$localNode.post(`${this.basePath}/inbox/`,s).then((()=>{alert(`${t} the Request`),"Accepted"===t&&(this.inbox.push(s),this.moveToFriendsOrFollower(s))})).catch((t=>{console.log(t)}))},moveToFriendsOrFollower(t){const e=this.friendliesProxy.following.items,s=e.filter((e=>e.id===t.actor.id));console.log(s),s?.length>0?this.friendliesProxy.friends.items.push(t.actor):this.friendliesProxy.followers.items.push(t.actor)},sendFollow(t){const e=wo;if(e.actor=this.sessionAuthor,e.object=t,t.id===this.sessionAuthor.id)return void alert("You can't send a follow request to yourself");const s=pt(t.host),o=new URL(t.id).pathname.replace(/^\/api/,"");s.post(`${o}/inbox/`,e).then((()=>{alert(`Succesfully sent follow request to ${t.displayName}`)})).catch((()=>{alert(`Couldn't send the request to ${t.displayName}`)})),s!==this.$localNode&&(console.log(`${this.basePath}/remote-requests`),console.log(e),this.$localNode.put(`${this.basePath}/remote-requests/`,e).then((()=>{console.log("sent to backend")})).catch((()=>{console.log("Couldn't send to backend")})))},async getRequests(){this.$localNode.get(`${this.basePath}/inbox/`).then((t=>{this.inbox=t.data.items})).catch((t=>{409===t.response.status?alert("You've already sent a request"):alert("Couldn'nt get requests"),console.log(t)}))},async getFriendlies(){for(const t in this.friendliesProxy)this.$localNode.get(`${this.basePath}/${t}`).then((e=>{this.friendliesProxy[t]=e.data,console.log(e)})).catch((e=>{this.friendliesProxy[t]={type:t,items:[]},console.log("Couldn't get"+t),console.log(e)}))},async getAllAuthors(){this.authorNodes=await ht("get","/authors")},getAuthorFromStore(){const t=this.userStore;t.initializeStore(),this.sessionAuthor=t.user.author}}};const _o=(0,I.Z)(yo,[["render",fo],["__scopeId","data-v-7c08a344"]]);var ko=_o;const vo={class:"d-flex flex-column align-items-center my-root"};function xo(t,e,s,o,i,n){const l=(0,a.up)("SettingsProfile");return(0,a.wg)(),(0,a.iD)("div",vo,[(0,a.Wm)(l)])}const Po=t=>((0,a.dD)("data-v-89fe5a64"),t=t(),(0,a.Cn)(),t),jo={class:"child-root"},Co=Po((()=>(0,a._)("h1",null,"Profile",-1))),So=Po((()=>(0,a._)("h2",null,"Settings",-1))),Do={class:"d-flex mt-4",id:"profile-container"},Uo={class:"d-flex"},Mo={class:"image-container me-4"},Io=["src"],No=["onSubmit"],Fo={class:"mb-3"},zo=Po((()=>(0,a._)("label",{for:"newProfileImage",class:"form-label"},"New profile image URL",-1))),$o=Po((()=>(0,a._)("button",{type:"submit",class:"btn btn-primary",form:"profileImageForm"},"Change profile picture",-1))),Lo=Po((()=>(0,a._)("i",{class:"bi bi-pencil-fill overlay-icon",id:"edit-image-icon"},null,-1))),To=[Lo],Ao={class:"d-flex flex-column gap-3 text-start"},qo={class:"display-name"},Eo=Po((()=>(0,a._)("span",{class:"field-name"},"Display Name:",-1))),Ho={id:"display-name-text"},Bo=["onSubmit"],Ro=Po((()=>(0,a._)("label",{for:"newDisplayName",class:"form-label"},"New display name",-1))),Yo={class:"input-group mb-3"},Wo=Po((()=>(0,a._)("span",{class:"input-group-text",id:"basic-addon1"},"@",-1))),Zo=Po((()=>(0,a._)("button",{type:"submit",class:"btn btn-primary",form:"displaynameForm"},"Change display name",-1))),Oo={class:"username"},Go=Po((()=>(0,a._)("span",{class:"field-name"},"Username:",-1))),Vo={id:"username-text"},Ko=["onSubmit"],Qo={class:"mb-3"},Jo=Po((()=>(0,a._)("label",{for:"currentPassword",class:"form-label"},"Password",-1))),Xo={class:"mb-3"},ta=Po((()=>(0,a._)("label",{for:"newUsername",class:"form-label"},"New username",-1))),ea=Po((()=>(0,a._)("button",{type:"submit",class:"btn btn-primary",form:"usernameForm"},"Change username",-1))),sa=Po((()=>(0,a._)("i",{class:"bi bi-pencil-fill",title:"Edit",id:"edit-username-button",role:"button","data-bs-toggle":"modal","data-bs-target":"#usernameModal"},null,-1))),oa={class:"github-username"},aa=Po((()=>(0,a._)("span",{class:"field-name"},"GitHub username:",-1))),ia={id:"gh-name-text"},na=["onSubmit"],la={class:"input-group mb-3"},ra=Po((()=>(0,a._)("span",{class:"input-group-text",id:"basic-addon1"},"https://github.com/",-1))),ca=Po((()=>(0,a._)("button",{type:"submit",class:"btn btn-primary",form:"githubForm"},"Submit",-1))),da=Po((()=>(0,a._)("span",{class:"field-name"},"User ID:",-1))),ua={id:"uuid-text"},ma=["onSubmit"],pa={class:"mb-3"},ha=Po((()=>(0,a._)("label",{for:"currentPassword",class:"form-label"},"Current password",-1))),ga={class:"mb-3"},ba=Po((()=>(0,a._)("label",{for:"newPassword",class:"form-label"},"New password",-1))),fa={class:"mb-3"},wa=Po((()=>(0,a._)("label",{for:"confirmNewPassword",class:"form-label"},"Confirm new password",-1))),ya=Po((()=>(0,a._)("button",{type:"submit",id:"submit-password-button",class:"btn btn-primary",form:"passwordForm"},"Change password",-1))),_a=Po((()=>(0,a._)("button",{type:"button",class:"btn btn-primary",id:"edit-password-button","data-bs-toggle":"modal","data-bs-target":"#passwordModal"},[(0,a._)("i",{class:"bi bi-lock-fill"}),(0,a.Uk)(" Change password ")],-1)));function ka(t,e,s,i,l,r){const c=(0,a.up)("SlotModal");return(0,a.wg)(),(0,a.iD)("div",jo,[l.alert.msg?((0,a.wg)(),(0,a.iD)("div",{key:0,class:(0,n.C_)(["alert fade show alert-dismissible",[l.alert.type]]),id:"settings-alert",role:"alert"},[(0,a.Uk)((0,n.zw)(l.alert.msg)+" ",1),(0,a._)("button",{type:"button",class:"btn-close",onClick:e[0]||(e[0]=t=>l.alert.msg=""),"aria-label":"Close"})],2)):(0,a.kq)("",!0),Co,So,(0,a._)("div",Do,[(0,a._)("div",Uo,[(0,a._)("div",Mo,[(0,a._)("img",{class:"settings-profile-image rounded-circle",src:r.getAuthorPropertyIfDefined("profileImage"),alt:"User profile picture"},null,8,Io),(0,a.Wm)(c,{"modal-name":"profileImageModal",onSubmitMyForm:r.submitProfileImageForm,onClearFields:r.prefillProfileImageURL},{titleText:(0,a.w5)((()=>[(0,a.Uk)("Edit profile picture")])),body:(0,a.w5)((t=>[(0,a._)("form",{onSubmit:(0,o.iM)(t.submitMethod,["prevent"]),id:"profileImageForm"},[(0,a._)("div",Fo,[zo,(0,a.wy)((0,a._)("input",{class:"form-control",id:"newProfileImage","onUpdate:modelValue":e[1]||(e[1]=t=>l.fields.newProfileImageURL=t),type:"url",required:""},null,512),[[o.nr,l.fields.newProfileImageURL]])])],40,No)])),submitButton:(0,a.w5)((()=>[$o])),openModalButton:(0,a.w5)((()=>[(0,a._)("div",{class:"edit-overlay rounded-circle",role:"button","data-bs-toggle":"modal",title:"Edit profile picture","data-bs-target":"#profileImageModal",onClick:e[2]||(e[2]=(...t)=>r.prefillProfileImageURL&&r.prefillProfileImageURL(...t))},To)])),_:1},8,["onSubmitMyForm","onClearFields"])]),(0,a._)("div",Ao,[(0,a._)("div",null,[(0,a._)("span",qo,[Eo,(0,a.Uk)(),(0,a._)("span",Ho,"@"+(0,n.zw)(r.getAuthorPropertyIfDefined("displayName")),1)]),(0,a.Uk)("Â "),(0,a.Wm)(c,{"modal-name":"displaynameModal",onSubmitMyForm:r.submitDisplaynameForm,onClearFields:r.prefillDisplayName},{openModalButton:(0,a.w5)((()=>[(0,a._)("i",{class:"bi bi-pencil-fill",id:"edit-display-name-button",title:"Edit",role:"button","data-bs-toggle":"modal","data-bs-target":"#displaynameModal",onClick:e[3]||(e[3]=(...t)=>r.prefillDisplayName&&r.prefillDisplayName(...t))})])),titleText:(0,a.w5)((()=>[(0,a.Uk)("Edit display name")])),body:(0,a.w5)((t=>[(0,a._)("form",{onSubmit:(0,o.iM)(t.submitMethod,["prevent"]),id:"displaynameForm"},[Ro,(0,a._)("div",Yo,[Wo,(0,a.wy)((0,a._)("input",{class:"form-control",type:"text",id:"newDisplayName","onUpdate:modelValue":e[4]||(e[4]=t=>l.fields.newDisplayName=t),"aria-label":"Display name","aria-describedby":"basic-addon1",required:""},null,512),[[o.nr,l.fields.newDisplayName]])])],40,Bo)])),submitButton:(0,a.w5)((()=>[Zo])),default:(0,a.w5)((()=>[(0,a.Uk)(" >")])),_:1},8,["onSubmitMyForm","onClearFields"])]),(0,a._)("div",null,[(0,a._)("span",Oo,[Go,(0,a.Uk)(),(0,a._)("span",Vo,(0,n.zw)(this.userStore.user.username),1)]),(0,a.Uk)("Â "),(0,a.Wm)(c,{"modal-name":"usernameModal",onSubmitMyForm:r.submitUsernameForm,onClearFields:r.clearFields},{titleText:(0,a.w5)((()=>[(0,a.Uk)("Edit username")])),body:(0,a.w5)((t=>[(0,a._)("form",{onSubmit:(0,o.iM)(t.submitMethod,["prevent"]),id:"usernameForm"},[(0,a._)("div",Qo,[Jo,(0,a.wy)((0,a._)("input",{class:"form-control",type:"password",id:"currentPassword","onUpdate:modelValue":e[5]||(e[5]=t=>l.fields.currentPassword=t),required:""},null,512),[[o.nr,l.fields.currentPassword]])]),(0,a._)("div",Xo,[ta,(0,a.wy)((0,a._)("input",{class:"form-control",type:"text",id:"newUsername","onUpdate:modelValue":e[6]||(e[6]=t=>l.fields.newUsername=t),required:""},null,512),[[o.nr,l.fields.newUsername]])])],40,Ko)])),submitButton:(0,a.w5)((()=>[ea])),openModalButton:(0,a.w5)((()=>[sa])),_:1},8,["onSubmitMyForm","onClearFields"])]),(0,a._)("div",null,[(0,a._)("span",oa,[aa,(0,a.Uk)(),(0,a._)("span",ia,(0,n.zw)(this.userStore.user.author.github?this.userStore.user.author.github.split("/").pop():"Not set"),1)]),(0,a.Uk)("Â "),(0,a.Wm)(c,{"modal-name":"githubModal",onSubmitMyForm:r.submitGithubForm,onClearFields:t.prefillGithub},{titleText:(0,a.w5)((()=>[(0,a.Uk)("Edit GitHub username")])),body:(0,a.w5)((t=>[(0,a._)("form",{onSubmit:(0,o.iM)(t.submitMethod,["prevent"]),id:"githubForm"},[(0,a._)("div",la,[ra,(0,a.wy)((0,a._)("input",{class:"form-control",type:"text",id:"newGithub","onUpdate:modelValue":e[7]||(e[7]=t=>l.fields.githubUsername=t)},null,512),[[o.nr,l.fields.githubUsername]])])],40,na)])),submitButton:(0,a.w5)((()=>[ca])),openModalButton:(0,a.w5)((()=>[(0,a._)("i",{class:"bi bi-pencil-fill",id:"edit-github-button",title:"Edit",role:"button","data-bs-toggle":"modal","data-bs-target":"#githubModal",onClick:e[8]||(e[8]=(...e)=>t.prefillGithub&&t.prefillGithub(...e))})])),_:1},8,["onSubmitMyForm","onClearFields"])]),(0,a._)("div",null,[da,(0,a.Uk)(),(0,a._)("span",ua,(0,n.zw)(this.userStore.user.author._id),1),(0,a.Uk)("Â "),(0,a._)("i",{class:"bi bi-clipboard2-fill",role:"button",title:"Copy to clipboard",onClick:e[9]||(e[9]=(...t)=>r.copyUUIDToClipboard&&r.copyUUIDToClipboard(...t))})]),(0,a.Wm)(c,{"modal-name":"passwordModal",onSubmitMyForm:r.submitPasswordForm,onClearFields:r.clearFields},{titleText:(0,a.w5)((()=>[(0,a.Uk)("Change password")])),body:(0,a.w5)((t=>[(0,a._)("form",{onSubmit:(0,o.iM)(t.submitMethod,["prevent"]),id:"passwordForm"},[(0,a._)("div",pa,[ha,(0,a.wy)((0,a._)("input",{class:"form-control",type:"password",id:"currentPassword","onUpdate:modelValue":e[10]||(e[10]=t=>l.fields.currentPassword=t),required:""},null,512),[[o.nr,l.fields.currentPassword]])]),(0,a._)("div",ga,[ba,(0,a.wy)((0,a._)("input",{class:"form-control",type:"password",id:"newPassword","onUpdate:modelValue":e[11]||(e[11]=t=>l.fields.newPassword=t),required:""},null,512),[[o.nr,l.fields.newPassword]])]),(0,a._)("div",fa,[wa,(0,a.wy)((0,a._)("input",{class:"form-control",type:"password",id:"confirmNewPassword","onUpdate:modelValue":e[12]||(e[12]=t=>l.fields.confirmNewPassword=t),required:""},null,512),[[o.nr,l.fields.confirmNewPassword]])])],40,ma)])),submitButton:(0,a.w5)((()=>[ya])),openModalButton:(0,a.w5)((()=>[_a])),_:1},8,["onSubmitMyForm","onClearFields"])])])])])}var va={name:"SettingsProfile",components:{SlotModal:It},data(){return{alert:{msg:"",type:""},errorMsg:"",fields:{currentPassword:"",newUsername:"",newPassword:"",confirmNewPassword:"",newDisplayName:"",newProfileImageURL:"",githubUsername:""}}},mounted(){this.fields.newDisplayName=this.userStore.user.author.displayName,this.fields.githubUsername=this.userStore.user.author.github.split("/").pop()},methods:{showAlert(t,e){this.alert.msg=t,this.alert.type="alert-"+e,console.log(this.alert)},promptImageURL(){const t=prompt("Enter a new image URL");t&&this.updateAuthorField("profileImage",t)},updateAuthorField(t,e,{done:s,e:o}){const a={displayName:"Display name",profileImage:"Profile image",github:"GitHub username"};this.userStore.initializeStore();const i=this.userStore.user,n=i.author;n[t]=e,this.$localNode.post("/authors/"+n._id+"/",n).then((e=>{console.log(e),this.showAlert(a[t]+" sucessfully updated!","success"),this.userStore.setUser(i),s()})).catch((e=>{console.log(e),this.showAlert(a[t]+" update failed!","danger"),o(vs(e))}))},getAuthorPropertyIfDefined(t){return this.userStore.user.author?this.userStore.user.author[t]:""},clearFields(){for(const t in this.fields)this.fields[t]=""},copyUUIDToClipboard(){const t=this.userStore.user.author._id;navigator.clipboard.writeText(t),this.showAlert("User ID copied to clipboard!","success")},submitUsernameForm({done:t,e:e}){const s={current_password:this.fields.currentPassword,new_username:this.fields.newUsername};this.$localNode.post("/users/set_username/",s).then((e=>{console.log(e);const s=this.fields.newUsername;this.showAlert('Username changed successfully. Your username is now "'+s+'".',"success"),this.updateLocalUsername(s),t()})).catch((t=>{console.log(t);const s={current_password:"Password",new_username:"New username"},o=vs(t,s);e(o)}))},updateLocalUsername(t){const e=this.userStore;e.initializeStore();const s=e.user;s.username=t,localStorage.setItem("user",JSON.stringify(e.user))},submitPasswordForm({done:t,e:e}){const s={current_password:this.fields.currentPassword,new_password:this.fields.newPassword,re_new_password:this.fields.confirmNewPassword};this.fields.newPassword!==this.fields.confirmNewPassword?e("New passwords do not match."):this.$localNode.post("/users/set_password/",s).then((e=>{console.log(e),this.showAlert("Password changed successfully.","success"),t()})).catch((t=>{console.log(t);const s={current_password:"Current password",new_password:"New password",re_new_password:"Confirm new password",non_field_errors:"Error"},o=vs(t,s);e(o)}))},submitDisplaynameForm({done:t,e:e}){this.updateAuthorField("displayName",this.fields.newDisplayName,{done:t,e:e})},prefillDisplayName(){this.fields.newDisplayName=this.getAuthorPropertyIfDefined("displayName")},submitProfileImageForm({done:t,e:e}){this.updateAuthorField("profileImage",this.fields.newProfileImageURL,{done:t,e:e})},prefillProfileImageURL(){this.fields.newProfileImageURL=this.getAuthorPropertyIfDefined("profileImage"),console.log(this.fields.newProfileImageURL)},submitGithubForm({done:t,e:e}){const s=this.fields.githubUsername?"https://github.com/"+this.fields.githubUsername:"";this.updateAuthorField("github",s,{done:t,e:e})}},computed:{...(0,C.Kc)(D)}};const xa=(0,I.Z)(va,[["render",ka],["__scopeId","data-v-89fe5a64"]]);var Pa=xa,ja={name:"SettingsPage",components:{SettingsProfile:Pa}};const Ca=(0,I.Z)(ja,[["render",xo],["__scopeId","data-v-01097e81"]]);var Sa=Ca;const Da=t=>((0,a.dD)("data-v-9fa42306"),t=t(),(0,a.Cn)(),t),Ua={class:"inbox-view pb-5 mt-5"},Ma=Da((()=>(0,a._)("h1",{class:"text-left"},[(0,a.Uk)(" Your "),(0,a._)("strong",null,"Feed")],-1))),Ia=Da((()=>(0,a._)("h2",null,"Inbox",-1))),Na=Da((()=>(0,a._)("button",{type:"button",class:"btn btn-outline-primary d-flex justify-self-start","data-bs-toggle":"modal","data-bs-target":"#inboxModal"}," Inbox ",-1))),Fa={key:2},za={key:4},$a={class:"github-container w-100"},La=Da((()=>(0,a._)("h1",{class:"mt-5 text-left"},[(0,a.Uk)(" Your "),(0,a._)("strong",null,"GitHub Events Feed")],-1))),Ta={key:1,class:"alert alert-danger",role:"alert"},Aa={key:0},qa={key:1},Ea={key:3};function Ha(t,e,s,o,i,l){const r=(0,a.up)("InboxModalBody"),c=(0,a.up)("SlotModal"),d=(0,a.up)("NotificationList"),u=(0,a.up)("ShowMoreButton"),m=(0,a.up)("GitHubList"),p=(0,a.up)("RouterLink");return(0,a.wg)(),(0,a.iD)("div",Ua,[Ma,i.loading?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(c,{key:0,modalName:"inboxModal",sizing:"modal-xl",justification:"modal-dialog-centered"},{titleText:(0,a.w5)((()=>[Ia])),body:(0,a.w5)((()=>[(0,a.Wm)(r,{allNotifications:i.stream.items,"no-more":i.stream.noMore,onShowMore:e[0]||(e[0]=t=>l.getInbox(++i.stream.page))},null,8,["allNotifications","no-more"])])),closeButtonText:(0,a.w5)((()=>[(0,a.Uk)("Done")])),openModalButton:(0,a.w5)((()=>[Na])),_:1})),!i.loading&&i.stream.items?.length>0?((0,a.wg)(),(0,a.j4)(d,{key:1,selectedNotifications:i.stream.items,class:"list pb-2"},null,8,["selectedNotifications"])):i.loading||0!==i.stream.items?.length?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("p",Fa,"There's nothing here for you yet")),!i.loading&&i.stream.items?.length>0&&!i.stream.noMore?((0,a.wg)(),(0,a.j4)(u,{key:3,onShowMore:e[1]||(e[1]=t=>l.getInbox(++i.stream.page))},{default:(0,a.w5)((()=>[(0,a.Uk)(" Show more ")])),_:1})):!i.loading&&i.stream.noMore?((0,a.wg)(),(0,a.iD)("p",za,"No more notifications to show!")):(0,a.kq)("",!0),(0,a._)("div",$a,[La,!i.loading&&i.stream_gh.items?.length>0?((0,a.wg)(),(0,a.j4)(m,{key:0,selectedNotifications:i.stream_gh.items,class:"list pb-2"},null,8,["selectedNotifications"])):(0,a.kq)("",!0),i.gh_error?((0,a.wg)(),(0,a.iD)("div",Ta,(0,n.zw)(i.gh_error),1)):(0,a.kq)("",!0),this.author?.github&&!this.stream_gh.noMore?((0,a.wg)(),(0,a.j4)(u,{key:2,onShowMore:e[2]||(e[2]=t=>l.getGitHubEvents(++i.stream_gh.page))},{default:(0,a.w5)((()=>[0==i.stream_gh.items?.length?((0,a.wg)(),(0,a.iD)("span",Aa,"Load feed")):i.stream_gh.items?.length>0?((0,a.wg)(),(0,a.iD)("span",qa,"Show more events")):(0,a.kq)("",!0)])),_:1})):(0,a.kq)("",!0),this.author?.github?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("p",Ea,[(0,a.Uk)("No GitHub username set! Add your GitHub username in "),(0,a.Wm)(p,{to:"/settings"},{default:(0,a.w5)((()=>[(0,a.Uk)("profile settings")])),_:1}),(0,a.Uk)(" to use this feature.")]))])])}const Ba={class:"notification-list d-flex flex-wrap"},Ra={key:0,class:"post-notif-content notification"},Ya={key:1,class:"comment-notif-content notification"},Wa={class:"actual-comment"},Za={key:2,class:"like-notif-content notification"},Oa={key:3,class:"request-notif-content notification"},Ga={key:4,class:"request-notif-content notification"},Va={class:"request-notif-message"},Ka={class:"notification-type"};function Qa(t,e,s,o,i,l){const r=(0,a.up)("GenericCard");return(0,a.wg)(),(0,a.iD)("div",Ba,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(i.feed,(t=>((0,a.wg)(),(0,a.j4)(r,{key:t.id,anchor:l.getAnchor(t),class:"m-2",role:"button"},{"card-content":(0,a.w5)((()=>["post"===t.type?((0,a.wg)(),(0,a.iD)("div",Ra,[(0,a._)("p",null,[(0,a.Uk)((0,n.zw)(l.capitalizeFirstChar(l.getActor(t.author)))+" posted ",1),(0,a._)("strong",null,(0,n.zw)(t.title),1)])])):"comment"===t.type?((0,a.wg)(),(0,a.iD)("div",Ya,[(0,a._)("p",null,(0,n.zw)(l.capitalizeFirstChar(l.getActor(t.author)))+" commented on your post:",1),(0,a._)("blockquote",Wa,(0,n.zw)(t.comment),1)])):"Like"===t.type?((0,a.wg)(),(0,a.iD)("div",Za,[(0,a._)("p",null,(0,n.zw)(t.summary),1)])):"Follow"!==t.type||t.state?"Follow"===t.type&&t.state?((0,a.wg)(),(0,a.iD)("div",Ga,[(0,a._)("p",Va,(0,n.zw)(l.capitalizeFirstChar(l.getActor(t.object)))+" "+(0,n.zw)(t.state.toString().toLowerCase())+" "+(0,n.zw)(l.getActor(t.actor))+"'s follow request ",1)])):(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",Oa,[(0,a._)("p",null,(0,n.zw)(l.getActor(t.actor))+" sent a follow request to "+(0,n.zw)(l.getActor(t.object)),1)]))])),footer:(0,a.w5)((()=>[(0,a._)("h6",Ka,(0,n.zw)(t.type),1)])),_:2},1032,["anchor"])))),128))])}var Ja={emits:["redirect"],components:{GenericCard:nt},props:{selectedNotifications:{type:Array}},watch:{selectedNotifications(){this.updateList()}},computed:{...(0,C.Kc)(D)},async created(){this.getAuthorFromStore(),this.updateList()},data(){return{feed:[],author:null}},methods:{getPostFromComment(t){U.Z.get(t.id.split("/comments")[0]).then((t=>(console.log(t.data),t.data.title))).catch((()=>"one of your posts"))},getPostComment(t){U.Z.get(t.object).then((t=>{const e=t.data;return"post"===e.type?e.title:`your comment: ${e.comment}`})).catch((()=>"one of your posts"))},getActor(t){return this.author.id===t.id?"you":"@"+t.displayName},updateList(){this.feed=this.selectedNotifications},getAuthorFromStore(){const t=this.userStore;t.initializeStore(),this.author=t.user.author},getAnchor(t){return"Follow"===t.type?{name:"SocialPage"}:"comment"===t.type||"post"===t.type?this.anchorHelper(t.id):"Like"===t.type?this.anchorHelper(t.object):void 0},anchorHelper(t){const e=new URL(t).pathname.replace("/api/","").replace(/^\//),s=e.split("/");return{name:"postpage",params:{aid:s[1],pid:s[3]},query:{hostURL:t}}},capitalizeFirstChar(t){return t.charAt(0).toUpperCase()+t.slice(1)}}};const Xa=(0,I.Z)(Ja,[["render",Qa],["__scopeId","data-v-c57e010c"]]);var ti=Xa;const ei={class:"btn-group-vertical d-flex flex-column justify-content-space-around border-primary",role:"group"},si=(0,a._)("i",{class:"bi bi-archive-fill",title:"Inbox"},null,-1),oi=[si],ai=(0,a._)("i",{class:"bi bi-file-earmark-post",title:"Posts"},null,-1),ii=[ai],ni=(0,a._)("i",{class:"bi bi-heart-fill",title:"Likes"},null,-1),li=[ni],ri=(0,a._)("i",{class:"bi bi-chat-left-fill",title:"Comments"},null,-1),ci=[ri],di=(0,a._)("i",{class:"bi bi-person-plus-fill",title:"Follows"},null,-1),ui=[di],mi={class:"d-flex flex-column align-items-center"},pi={key:1};function hi(t,e,s,o,i,l){const r=(0,a.up)("NotificationList"),c=(0,a.up)("ShowMoreButton");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("div",ei,[(0,a._)("button",{class:(0,n.C_)(["btn",{"btn-primary":"all"===i.active}]),onClick:e[0]||(e[0]=t=>l.setActive("all"))},oi,2),(0,a._)("button",{class:(0,n.C_)(["btn",{"btn-primary":"post"===i.active}]),onClick:e[1]||(e[1]=t=>l.setActive("post"))},ii,2),(0,a._)("button",{class:(0,n.C_)(["btn",{"btn-primary":"Like"===i.active}]),onClick:e[2]||(e[2]=t=>l.setActive("Like"))},li,2),(0,a._)("button",{class:(0,n.C_)(["btn",{"btn-primary":"comment"===i.active}]),onClick:e[3]||(e[3]=t=>l.setActive("comment"))},ci,2),(0,a._)("button",{class:(0,n.C_)(["btn",{"btn-primary":"Follow"===i.active}]),onClick:e[4]||(e[4]=t=>l.setActive("Follow"))},ui,2)]),(0,a._)("div",mi,[(0,a.Wm)(r,{selectedNotifications:l.selectedNotifications},null,8,["selectedNotifications"]),s.noMore?((0,a.wg)(),(0,a.iD)("p",pi,"No more notifications to show!")):((0,a.wg)(),(0,a.j4)(c,{key:0,onShowMore:l.showMore},null,8,["onShowMore"]))])],64)}var gi={components:{NotificationList:ti,ShowMoreButton:Ne},props:["allNotifications","noMore"],emits:["showMore"],computed:{...(0,C.Kc)(D),selectedNotifications(){return"all"===this.active?this.allNotifications:this.allNotifications.filter((t=>t.type===this.active))}},data(){return{active:"all",author:null}},methods:{setActive(t){this.active=t},getAuthorFromStore(){const t=this.userStore;t.initializeStore(),this.author=t.user.author},showMore(){this.$emit("showMore"),console.log("show more")}}};const bi=(0,I.Z)(gi,[["render",hi]]);var fi=bi;const wi=t=>((0,a.dD)("data-v-3fc77b39"),t=t(),(0,a.Cn)(),t),yi={class:"notification-list d-flex flex-wrap"},_i={class:"text-center"},ki={class:"gh-event-text"},vi=["href"],xi=["src","title"],Pi={class:"d-flex align-items-center justify-content-between w-100 h-100 px-3 overflow-hidden"},ji=["href"],Ci={class:"d-flex gap-2"},Si=["href"],Di=wi((()=>(0,a._)("i",{class:"bi bi-journal-code gh-card-icon"},null,-1))),Ui=[Di];function Mi(t,e,s,o,i,l){const r=(0,a.up)("GenericCard");return(0,a.wg)(),(0,a.iD)("div",yi,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(i.feed,(s=>((0,a.wg)(),(0,a.j4)(r,{onHovered:e[0]||(e[0]=e=>t.hovered=!0),onUnhover:e[1]||(e[1]=e=>t.hovered=!1),key:s.id,class:"m-2"},{"card-content":(0,a.w5)((()=>[(0,a._)("div",_i,[(0,a._)("p",ki,(0,n.zw)(l.parseEvent(s)),1)])])),footer:(0,a.w5)((()=>[(0,a._)("a",{href:"https://github.com/"+s.actor.display_login,target:"_blank"},[(0,a._)("img",{class:(0,n.C_)(["profile-image ms-2",{open:t.hovered}]),src:s.actor.avatar_url,title:s.actor.display_login+"'s GitHub image"},null,10,xi)],8,vi),(0,a._)("div",Pi,[(0,a._)("div",null,[(0,a._)("a",{href:"https://github.com/"+s.actor.display_login,target:"_blank"},(0,n.zw)(s.actor.display_login),9,ji)]),(0,a._)("div",Ci,[(0,a._)("a",{href:"https://github.com/"+s.repo.name,target:"_blank"},Ui,8,Si)])])])),_:2},1024)))),128))])}var Ii={name:"GitHubList",components:{GenericCard:nt},props:{selectedNotifications:{type:Array}},watch:{selectedNotifications:function(t,e){this.feed=t}},data(){return{feed:[],author:null}},async created(){this.feed=this.selectedNotifications},methods:{parseEvent(t){const e=s(4920),o=e.parse(t);if(o){const t=e.compile(o);return t}const a=t.type.replace("Event","").replace(/([A-Z])/g," $1").toLowerCase();return`${t.actor.display_login} did a ${a} in ${t.repo.name}`}}};const Ni=(0,I.Z)(Ii,[["render",Mi],["__scopeId","data-v-3fc77b39"]]);var Fi=Ni,zi={components:{SlotModal:It,NotificationList:ti,InboxModalBody:fi,GitHubList:Fi,ShowMoreButton:Ne},computed:{...(0,C.Kc)(D)},created(){this.getAuthorFromStore(),this.getInbox(this.stream.page)},data(){return{stream:{items:[],size:12,page:1,noMore:!1},stream_gh:{items:[],size:10,page:0,noMore:!1},author:null,loading:!0,gh_error:""}},methods:{getAuthorFromStore(){const t=this.userStore;t.initializeStore(),this.author=t.user.author},getGitHubEvents(t){const e=this.author.github.split("/").pop();this.$github.get(e+"/received_events/public",{params:{per_page:this.stream_gh.size,page:t}}).then((e=>{console.log(t),console.log(e),this.stream_gh.items=this.stream_gh.items.concat(e.data),e.data.length<this.stream_gh.size&&(this.stream_gh.noMore=!0),0===this.stream_gh.items.length&&(this.gh_error="No GitHub events found for this user.")})).catch((t=>{console.log(t),404===t.response.status&&0===this.stream_gh.items.length?this.gh_error="GitHub user not found, please check your GitHub username and try again.":403===t.response.status&&(this.gh_error="GitHub API rate limit exceeded, please try again later.")}))},getInbox(t){this.$localNode.get(`${gt(this.author.id)}/inbox/`,{params:{size:this.stream.size,page:t}}).then((t=>{console.log(t),this.stream.items=this.stream.items.concat(t.data.items.reverse()),this.loading=!1,t.data.items.length<this.stream.size&&(this.stream.noMore=!0)})).catch((t=>{console.log(t),404===t.response.status&&(this.stream.noMore=!0)}))}}};const $i=(0,I.Z)(zi,[["render",Ha],["__scopeId","data-v-9fa42306"]]);var Li=$i;const Ti=t=>((0,a.dD)("data-v-34d75cd6"),t=t(),(0,a.Cn)(),t),Ai={class:"d-flex flex-shrink-0",id:"single-post-container"},qi={key:0,class:"post-left-bar"},Ei={class:"author-info"},Hi=["src"],Bi={class:"name"},Ri={class:"likers"},Yi=["src","title"],Wi={key:0},Zi={class:"btn-list"},Oi={class:"btn-with-label"},Gi={for:"like-post-button"},Vi={class:"btn-with-label"},Ki={id:"comment-button",type:"button",ref:"commentButton","data-bs-toggle":"modal","data-bs-target":"#makeCommentModal",class:"btn btn-light action-button"},Qi=Ti((()=>(0,a._)("i",{class:"bi bi-chat-left-text-fill"},null,-1))),Ji=[Qi],Xi={for:"comment-button"},tn=Ti((()=>(0,a._)("li",null,[(0,a._)("button",{type:"button",class:"btn btn-light action-button","data-bs-toggle":"modal","data-bs-target":"#sharePostModal"},[(0,a._)("i",{class:"bi bi-share-fill"})])],-1))),en={key:0,class:"right-aside-tab-icon bi bi-caret-left-fill"},sn={key:1,class:"right-aside-tab-icon bi bi-caret-right-fill"},on={class:"scrollable"},an=Ti((()=>(0,a._)("strong",null,"Comment",-1))),nn={class:"form-check form-switch d-flex justify-content-around gap-3 mb-2 align-middle"},ln={class:"md-toggle"},rn=Ti((()=>(0,a._)("label",{class:"form-check-label",for:"markdown-toggle"},[(0,a._)("i",{class:"bi-markdown-fill"}),(0,a.Uk)(" Use Markdown ")],-1))),cn={class:"private-toggle"},dn=Ti((()=>(0,a._)("label",{class:"form-check-label",for:"private-toggle"},[(0,a._)("i",{class:"bi bi-incognito"}),(0,a.Uk)(" Private to Poster ")],-1))),un=Ti((()=>(0,a._)("br",null,null,-1))),mn=Ti((()=>(0,a._)("strong",null,"Post",-1))),pn=Ti((()=>(0,a._)("h4",null,[(0,a.Uk)("Your "),(0,a._)("strong",null,"Followers")],-1))),hn={id:"followers-container"},gn={class:"list-group"},bn={class:"d-flex w-100 h-100 align-items-center justify-content-between"},fn={class:"d-flex"},wn=["src"],yn={class:"mb-1"},_n=["onClick"],kn={key:1,disabled:"",class:"btn btn-outline-primary"},vn={key:0},xn=Ti((()=>(0,a._)("br",null,null,-1)));function Pn(t,e,s,i,l,r){const c=(0,a.up)("PostProper"),d=(0,a.up)("CommentList"),u=(0,a.up)("SlotModal");return(0,a.wg)(),(0,a.iD)("div",Ai,[l.loading?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("aside",qi,[(0,a._)("section",Ei,[(0,a._)("img",{src:l.authorData.profileImage?l.authorData.profileImage:l.defaultImage,class:"author-picture"},null,8,Hi),(0,a._)("div",Bi,"@"+(0,n.zw)(l.authorData.displayName),1),(0,a._)("span",Ri,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.likes,(t=>((0,a.wg)(),(0,a.iD)("img",{key:t,class:"like-profile-picture",src:t.author.profileImage?t.author.profileImage:l.defaultImage,title:"@"+t.author.displayName},null,8,Yi)))),128)),(0,a._)("small",null,[r.overflowLikes>0?((0,a.wg)(),(0,a.iD)("small",Wi,"+ "+(0,n.zw)(r.overflowLikes),1)):(0,a.kq)("",!0),(0,a.Uk)("likes this post")])])]),(0,a._)("ul",Zi,[(0,a._)("li",Oi,[(0,a._)("button",{id:"like-post-button",type:"button",class:"btn btn-light action-button",onClick:e[0]||(e[0]=(...t)=>r.addLike&&r.addLike(...t))},[(0,a._)("i",{class:(0,n.C_)(["bi bi-heart-fill",{liked:r.isLiked}])},null,2)]),(0,a._)("label",Gi,(0,n.zw)(l.likes?.length),1)]),(0,a._)("li",Vi,[(0,a._)("button",Ki,Ji,512),(0,a._)("label",Xi,(0,n.zw)(l.postData.count),1)]),tn])])),l.loading?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(c,{key:1,post:l.postData,author:l.authorData,class:"col-9"},null,8,["post","author"])),l.loading?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("aside",{key:2,class:(0,n.C_)(["post-right-bar",{expanded:l.expandComments}])},[(0,a._)("div",{class:"right-aside-tab",onClick:e[1]||(e[1]=(...t)=>r.toggleComments&&r.toggleComments(...t))},[l.expandComments?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("i",en)),l.expandComments?((0,a.wg)(),(0,a.iD)("i",sn)):(0,a.kq)("",!0)]),(0,a._)("div",on,[(0,a.Wm)(d,{post:l.postData,comments:l.comments,pagination:"5",onAddComment:e[2]||(e[2]=e=>t.$refs.commentButton.click())},null,8,["post","comments"])])],2)),(0,a.Wm)(u,{modalName:"makeCommentModal",sizing:"modal-lg",justification:"modal-dialog-centered"},{titleText:(0,a.w5)((()=>[(0,a.Uk)("Add a "),an])),body:(0,a.w5)((()=>[(0,a._)("div",nn,[(0,a._)("span",ln,[(0,a.wy)((0,a._)("input",{"onUpdate:modelValue":e[3]||(e[3]=t=>l.markDownEnabled=t),onChange:e[4]||(e[4]=(...e)=>t.setText&&t.setText(...e)),id:"markdown-toggle",class:"form-check-input pr-2",type:"checkbox"},null,544),[[o.e8,l.markDownEnabled]]),rn]),(0,a._)("span",cn,[(0,a.wy)((0,a._)("input",{"onUpdate:modelValue":e[5]||(e[5]=t=>l.privateEnabled=t),id:"private-toggle",class:"form-check-input pr-2",type:"checkbox"},null,512),[[o.e8,l.privateEnabled]]),dn])]),(0,a.wy)((0,a._)("textarea",{class:"form-control","onUpdate:modelValue":e[6]||(e[6]=t=>l.newComment=t),placeholder:"Write a comment"},null,512),[[o.nr,l.newComment]])])),submitButton:(0,a.w5)((()=>[(0,a._)("button",{type:"submit",class:"btn btn-primary","data-bs-dismiss":"modal",onClick:e[7]||(e[7]=(...t)=>r.submitComment&&r.submitComment(...t))},"Submit")])),openModalButton:(0,a.w5)((()=>[un])),_:1}),(0,a.Wm)(u,{modalName:"sharePostModal",justification:"modal-dialog-centered"},{titleText:(0,a.w5)((()=>[(0,a.Uk)("Share "),mn])),body:(0,a.w5)((()=>[pn,(0,a._)("div",hn,[(0,a._)("ul",gn,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.friends,(t=>((0,a.wg)(),(0,a.iD)("li",{class:"list-group-item",key:t.id},[(0,a._)("div",bn,[(0,a._)("div",fn,[(0,a._)("img",{src:t.profileImage?t.profileImage:l.defaultImage,class:"rounded-circle follower-pic"},null,8,wn),(0,a._)("div",null,[(0,a._)("h5",yn,"@"+(0,n.zw)(t.displayName),1),(0,a._)("small",null,(0,n.zw)(t.host),1)])]),t.shareStatus?((0,a.wg)(),(0,a.iD)("button",kn,(0,n.zw)(t.shareStatus),1)):((0,a.wg)(),(0,a.iD)("button",{key:0,class:"btn btn-primary",onClick:e=>r.sharePost(t)},"Share",8,_n))])])))),128)),0===l.friends.length?((0,a.wg)(),(0,a.iD)("p",vn,"You have no followers :C")):(0,a.kq)("",!0)])])])),openModalButton:(0,a.w5)((()=>[xn])),_:1})])}const jn=t=>((0,a.dD)("data-v-71fdd698"),t=t(),(0,a.Cn)(),t),Cn={class:"post-template"},Sn={class:"post-title"},Dn={class:"post-title"},Un={class:"supplementary-info"},Mn=["open"],In=["title"],Nn=jn((()=>(0,a._)("i",{class:"bi bi-info-circle"},null,-1))),Fn=[Nn],zn={class:"post-icons"},$n={class:"tags"},Ln={key:0,class:"image-content"},Tn=["src"],An={key:1,class:"spinner-border text-info"},qn={key:1,class:"text-content"},En={key:0,id:"post-content-plain",class:"text"};function Hn(t,e,s,i,l,r){const c=(0,a.up)("VueMarkdown");return(0,a.wg)(),(0,a.iD)("div",Cn,[(0,a._)("section",Sn,[(0,a._)("h1",Dn,(0,n.zw)(s.post.title),1)]),(0,a._)("div",Un,[s.post.description?((0,a.wg)(),(0,a.iD)("details",{key:0,class:"post-description",open:l.descIsHovered},[(0,a._)("summary",{"data-toggle":"tooltip","data-placement":"left",title:s.post.description,onClick:e[0]||(e[0]=(0,o.iM)((()=>{}),["prevent"]))},Fn,8,In),(0,a._)("small",null,(0,n.zw)(s.post.description),1)],8,Mn)):(0,a.kq)("",!0),(0,a._)("span",zn,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s.post.contentType.split(","),(t=>((0,a.wg)(),(0,a.iD)("i",{key:t,class:(0,n.C_)(["bi",r.getIcon(t)])},null,2)))),128))]),(0,a._)("span",$n,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(r.tags,((t,e)=>((0,a.wg)(),(0,a.iD)("span",{key:e,class:"tag badge rounded-pill border border-primary text-primary mx-1"},(0,n.zw)(t),1)))),128))])]),r.hasImage?((0,a.wg)(),(0,a.iD)("section",Ln,[t.loading?((0,a.wg)(),(0,a.iD)("div",An)):((0,a.wg)(),(0,a.iD)("img",{key:0,class:"img-fluid",src:l.imageSrc},null,8,Tn))])):(0,a.kq)("",!0),r.hasContent?((0,a.wg)(),(0,a.iD)("section",qn,[s.post.content&&!r.markdown?((0,a.wg)(),(0,a.iD)("p",En,(0,n.zw)(s.post.content),1)):s.post.content&&r.markdown?((0,a.wg)(),(0,a.j4)(c,{key:1,id:"post-content-markdown",source:s.post.content,class:"text"},null,8,["source"])):(0,a.kq)("",!0)])):(0,a.kq)("",!0)])}var Bn={components:{VueMarkdown:J.Z},props:{post:Object,author:Object},computed:{markdown(){return this.post.contentType.split(",").includes("text/markdown")},hasImage(){return this.post.contentType.includes("image")},hasContent(){return this.post.contentType.includes("text")},imageMime(){return this.post.contentType.match(/^image\/.+?(?=;base64|$)/)},tags(){return"string"===typeof this.post.categories?this.post.categories.split(","):this.post.categories}},async mounted(){await this.getImage(),this.loading=!1},data(){return{descIsHovered:!1,imageSrc:null}},methods:{getIcon(t){switch(!0){case/^text\/markdown$/.test(t):return"bi-markdown-fill";case/^text\/plain$/.test(t):return"bi-blockquote-left";case/^image/.test(t):return"bi-image-fill"}},async getImage(){if(this.hasImage){const t=pt(this.post.id),e=new URL(this.post.id).pathname.replace(/^\/api\//,"");t.get(`${e}/image`,{responseType:"blob"}).then((t=>{const e=new Blob([t.data],{type:this.imageMime});this.imageSrc=URL.createObjectURL(e)})).catch((t=>{console.log(t),this.imageSrc="https://commons.wikimedia.org/wiki/File:No-Image-Placeholder.svg"}))}}}};const Rn=(0,I.Z)(Bn,[["render",Hn],["__scopeId","data-v-71fdd698"]]);var Yn=Rn;const Wn=t=>((0,a.dD)("data-v-2328f6ae"),t=t(),(0,a.Cn)(),t),Zn={class:"comments-section scrollable"},On={key:0},Gn=Wn((()=>(0,a._)("i",{class:"bi bi-person-check-fill"},null,-1))),Vn={key:1},Kn=Wn((()=>(0,a._)("i",{class:"bi bi-rocket-takeoff-fill"},null,-1))),Qn={key:0,class:"text-light mt-3"},Jn=Wn((()=>(0,a._)("hr",{id:"end-of-comments",class:"text-primary"},null,-1))),Xn={class:"move-page-wrapper"},tl={key:0,class:"move-page"},el={class:"pages-count"};function sl(t,e,s,o,i,l){const r=(0,a.up)("UserComment");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("div",Zn,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.commentSection,(t=>((0,a.wg)(),(0,a.j4)(r,{key:t.id,comment:t,sessionUser:this.currentUser},{flair:(0,a.w5)((()=>[l.matchPost(t)?((0,a.wg)(),(0,a.iD)("span",On,[(0,a.Uk)("OP"),Gn])):l.matchSession(t)?((0,a.wg)(),(0,a.iD)("span",Vn,[(0,a.Uk)("Me"),Kn])):(0,a.kq)("",!0)])),_:2},1032,["comment","sessionUser"])))),128)),i.currentCommentPage===l.pageTotal?((0,a.wg)(),(0,a.iD)("small",Qn,[(0,a.Uk)(" There are no more comments. "),(0,a._)("a",{class:"text-primary",onClick:e[0]||(e[0]=e=>t.$emit("addComment"))},"But you can add one")])):(0,a.kq)("",!0)]),Jn,(0,a._)("div",Xn,[l.pageTotal>1?((0,a.wg)(),(0,a.iD)("div",tl,[(0,a._)("i",{class:(0,n.C_)(["bi bi-caret-left-fill",{activated:i.currentCommentPage>1}]),onClick:e[1]||(e[1]=t=>l.changeCommentPage(-1))},null,2),(0,a._)("span",el,(0,n.zw)(i.currentCommentPage)+"/"+(0,n.zw)(l.pageTotal),1),(0,a._)("i",{class:(0,n.C_)(["bi bi-caret-right-fill",{activated:i.currentCommentPage<l.pageTotal}]),onClick:e[2]||(e[2]=t=>l.changeCommentPage(1))},null,2)])):(0,a.kq)("",!0)])],64)}const ol={class:"card text-start my-2"},al={class:"card-body pb-0"},il={class:"content"},nl={class:"commenter"},ll={class:"display-name"},rl={class:"date text-muted"},cl={class:"card-footer py-1"},dl={class:"likers"},ul=["src"],ml={key:0,class:"d-inline pl-2"},pl={key:0};function hl(t,e,s,o,i,l){const r=(0,a.up)("VueMarkdown");return(0,a.wg)(),(0,a.iD)("div",ol,[(0,a._)("div",al,[(0,a._)("div",il,[l.markdown?((0,a.wg)(),(0,a.j4)(r,{key:1,source:s.comment.comment,class:(0,n.C_)({decoration:l.flairDecorate})},null,8,["source","class"])):((0,a.wg)(),(0,a.iD)("p",{key:0,class:(0,n.C_)(["mb-0",{decoration:l.flairDecorate}])},(0,n.zw)(s.comment.comment),3)),(0,a._)("div",nl,[(0,a._)("span",ll,"@"+(0,n.zw)(s.comment.author.displayName),1),(0,a.WI)(t.$slots,"flair",{},void 0,!0)]),(0,a._)("small",rl,(0,n.zw)(l.dateFormatted),1)])]),(0,a._)("div",cl,[(0,a._)("span",dl,[(0,a._)("button",{type:"button",class:"btn btn-sm btn-light action-button text-muted d-inline justify-content-center m-0",onClick:e[0]||(e[0]=(...t)=>l.addLike&&l.addLike(...t))},[(0,a._)("i",{class:(0,n.C_)(["bi bi-heart-fill",{liked:l.isLiked}])},null,2)]),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(i.likes,((e,s)=>((0,a.wg)(),(0,a.iD)("img",{key:s,class:"like-profile-picture d-inline",src:e.author.profileImage?e.author.profileImage:t.defaultImage},null,8,ul)))),128)),i.likes?.length>0?((0,a.wg)(),(0,a.iD)("small",ml,[l.overflowLikes>0?((0,a.wg)(),(0,a.iD)("span",pl,"+ "+(0,n.zw)(l.overflowLikes),1)):(0,a.kq)("",!0),(0,a.Uk)("likes this ")])):(0,a.kq)("",!0)])])])}const gl=3,bl={type:"Like",context:"https://www.w3.org/ns/activitystreams",author:null,summary:null,object:null};var fl={props:{comment:Object,sessionUser:Object},components:{VueMarkdown:J.Z},async mounted(){await this.getLikes(),this.loading=!1},computed:{dateFormatted(){const t=es()(this.comment.published).format("YYYY/MM/DD"),e=es()().format("YYYY/MM/DD");return t===e?"Today":t},flairDecorate(){return!!this.$slots.flair},markdown(){return/markdown$/.test(this.comment.contentType)},isLiked(){for(const t of this.likes)if(console.log(t),t?.author?.id===this.sessionUser.id)return!0;return!1},firstFewLikers(){return this.likes.slice(0,gl-1)},overflowLikes(){return this.likes?.length<=gl?0:this.likes?.length-gl}},data(){return{likes:[],loading:!0,hostNode:pt(this.comment.id),commentPath:new URL(this.comment.id).pathname}},methods:{async getLikes(){this.hostNode.get({url:`${this.commentPath}/likes`,validateStatus:null}).then((t=>{this.likes=t.data.items})).catch((t=>{console.log(t)}))},addLike(){if(!this.isLiked){const t=bl;t.author=this.sessionUser,t.object=this.comment.id,t.summary=`${t.author.displayName} liked your comment`;const e=new URL(this.comment.author.id).pathname;this.hostNode.post(`${e}/inbox/`,t).then((()=>{console.log("Sent like to inbox"),this.likes.push(t)})).catch((t=>{console.log("Couldn't send like to comment"),console.log(t)}))}}}};const wl=(0,I.Z)(fl,[["render",hl],["__scopeId","data-v-91b56aa4"]]);var yl=wl,_l={emits:["addComment"],props:{comments:Array,pagination:Number,post:Object},components:{UserComment:yl},mounted(){const t=D();t.initializeStore(),this.currentUser=t.user.author},computed:{...(0,C.Kc)(D),exhausted(){return this.commentSection?.length<this.pagination&&this.page===this.pageTotal},commentSection(){const t=(this.currentCommentPage-1)*this.pagination,e=this.currentCommentPage*(this.pagination-1);return this.comments?.slice(t,e)},pageTotal(){return Math.ceil(this.comments?.length/this.pagination)||1}},data(){return{currentUser:null,currentCommentPage:1}},methods:{matchPost(t){return this.post.author.id===t?.author?.id},matchSession(t){return this.currentUser?.id===t?.author?.id},changeCommentPage(t){(t<0&&this.currentCommentPage+t>0||t>0&&this.currentCommentPage+t<=this.pageTotal)&&(this.currentCommentPage+=t)}}};const kl=(0,I.Z)(_l,[["render",sl],["__scopeId","data-v-2328f6ae"]]);var vl=kl;const xl={type:"comment",id:null,author:null,comment:"",contentType:"text/plain",published:"2023-03-01T21:18:38.908794Z"},Pl=3;var jl={components:{PostProper:Yn,CommentList:vl,SlotModal:It},async mounted(){const t=this.$route.params.pid,e=this.$route.params.aid;this.getAuthorFromStore(),await this.getData(t,e),await this.getLikes(),await this.getComments(),"FRIENDS"!==this.postData.visibility&&"PRIVATE"!==this.postData.visibility||(this.privateEnabled=!0),this.loading=!1,"FRIENDS"===this.postData?.visibility&&(this.privateEnabled=!0)},computed:{...(0,C.Kc)(D),isLiked(){for(const t of this.likes)if(console.log(t),t?.author?.id===this.currentAuthor.id)return!0;return!1},firstFewLikers(){return this.likes?.slice(0,Pl-1)},overflowLikes(){return this.likes?.length<=Pl?0:this.likes?.length-Pl}},data(){return{loading:!0,postData:null,authorData:null,currentAuthor:null,defaultImage:"/defaultProfileImage.png",likes:[],isFollowing:!1,friends:[],friendsLoading:!0,comments:[],commentsLoading:!0,expandComments:!1,currentCommentPage:1,paginationSetting:5,newComment:"",privateEnabled:!1,markDownEnabled:!1,postHost:pt(this.$route.query.hostURL)}},methods:{async getData(t,e){await this.postHost.get(`/authors/${e}/posts/${t}/`).then((t=>{this.postData=t.data})).catch((t=>{console.log(t),this.$router.push({name:"404"})})),await this.postHost.get(`/authors/${e}/`).then((t=>{this.authorData=t.data})).catch((t=>{console.log(t)})),this.$localNode.get(`${gt(this.currentAuthor.id)}/followers/`).then((t=>{console.log(t.data),this.friends=t.data.items;for(const e of this.friends)e.shareStatus="";this.friendsLoading=!1})).catch((t=>{console.log(t),this.friendsLoading=!1}))},async getLikes(){const t=new URL(this.postData.id).pathname;this.postHost.get(`${t}/likes`).then((t=>{this.likes=t.data.items})).catch((t=>{console.log(t)}))},async getComments(){const t=new URL(this.postData.id).pathname;await this.postHost.get(`${t}/comments`).then((t=>{this.postHost===this.$localNode?(console.log("local"),this.comments=t.data.comments):this.comments=t.data.items})).catch((t=>{console.log("Couldn't get comments."),console.log(t)}))},toggleFollow(){this.isFollowing=!this.isFollowing,alert("Sorry! You can't follow people yet")},addLike(){if(!this.isLiked){const t={type:"Like",context:"https://www.w3.org/ns/activitystreams",author:this.currentAuthor,summary:`@${this.currentAuthor.displayName} liked your post`,object:this.postData.id},e=new URL(this.authorData.id).pathname;console.log(e),this.postHost.post(`${e}/inbox/`,t).then((s=>{console.log(`Like sent to ${e}/inbox/`),this.likes.push(t)})).catch((t=>{console.log(t)}))}},toggleComments(){this.expandComments=!this.expandComments},submitComment(){const t=xl,e=(0,Fe.Z)();this.privateEnabled&&(t.private=!0),t.author=this.currentAuthor,t.id=`${this.postData.id}/comments/${e}`,t.comment=this.newComment,t.contentType=this.markDownEnabled?"text/markdown":"text/plain";const s=gt(this.postData.id);let o;o=this.postHost!==this.$localNode||this.privateEnabled?`${gt(this.authorData.id)}/inbox/`:`${s}/comments`,this.postHost.post(o,t).then((()=>{this.postData.count++,this.currentCommentPage=this.pageTotal,this.expandComments=!0,this.newComment="",this.comments.push(t),console.table(t)})).catch((t=>{console.log(this.postHost.defaults),console.log(t),alert("Couldn't make comment!")}))},sharePost(t){const e=pt(t.id);e.post(`${gt(t.id)}/inbox/`,this.postData).then((()=>{t.shareStatus="Shared"})).catch((e=>{409===e.response.status?t.shareStatus="Already shared":(t.shareStatus="Error",console.log(e))}))},getAuthorFromStore(){const t=this.userStore;t.initializeStore(),this.currentAuthor=t.user.author}}};const Cl=(0,I.Z)(jl,[["render",Pn],["__scopeId","data-v-34d75cd6"]]);var Sl=Cl;const Dl=t=>((0,a.dD)("data-v-2540174b"),t=t(),(0,a.Cn)(),t),Ul={class:"about pt-5 pb-5 d-flex justify-content-center"},Ml={class:"d-flex flex-column gap-4 align-items-center"},Il=Dl((()=>(0,a._)("div",{class:"d-flex rounded-circle justify-content-center align-items-center",id:"circle-404"},[(0,a._)("h1",{id:"text-404"},"404")],-1))),Nl=Dl((()=>(0,a._)("div",{id:"message"},[(0,a._)("h1",null,"Whoops!"),(0,a._)("h2",null,"We couldn't find this page."),(0,a._)("h2",null,"The link you followed may be invalid, or the page may have been moved or deleted.")],-1)));function Fl(t,e){return(0,a.wg)(),(0,a.iD)("div",Ul,[(0,a._)("div",Ml,[Il,Nl,(0,a._)("a",{href:"#",onClick:e[0]||(e[0]=t=>this.$router.push("/home"))},"Take me home!")])])}const zl={},$l=(0,I.Z)(zl,[["render",Fl],["__scopeId","data-v-2540174b"]]);var Ll=$l,Tl=[{path:"/",redirect:"/home"},{path:"/home",name:"homepage",component:Li},{path:"/browse",name:"browsepage",component:is},{path:"/login",name:"login",component:js},{path:"/signup",name:"signup",component:Ys},{path:"/home/manage-posts",name:"manageposts",component:Le},{path:"/social",name:"SocialPage",component:ko},{path:"/settings",name:"SettingsPage",component:Sa},{path:"/authors/:aid/posts/:pid",name:"postpage",component:Sl},{path:"/:pathMatch(.*)*",beforeEnter:()=>{window.location.assign("/404")},name:"NotFound",component:Ll},{path:"/404",name:"404",component:Ll}];const Al=(0,T.p7)({history:(0,T.PO)("/"),linkActiveClass:"active",routes:Tl,scrollBehavior(t,e,s){if(t.hash)return{el:t.hash,behavior:"smooth"}}});Al.beforeEach(((t,e)=>{const s=S();s.initializeStore();const o=["login","signup"];return s.isAuthenticated||o.includes(t.name)?s.isAuthenticated&&o.includes(t.name)?"/home?loggedin=1":void 0:"/login"})),Al.afterEach(((t,e)=>{if("homepage"===e.name){const t=document.querySelector(".modal-backdrop");t&&t.remove()}}));var ql=Al;s(2166);const El=(0,o.ri)(L);El.use(bt),El.use(ql,U.Z).use((0,C.WB)()).mount("#app"),El.config.globalProperties.$http=U.Z}},e={};function s(o){var a=e[o];if(void 0!==a)return a.exports;var i=e[o]={id:o,loaded:!1,exports:{}};return t[o].call(i.exports,i,i.exports,s),i.loaded=!0,i.exports}s.m=t,function(){var t=[];s.O=function(e,o,a,i){if(!o){var n=1/0;for(d=0;d<t.length;d++){o=t[d][0],a=t[d][1],i=t[d][2];for(var l=!0,r=0;r<o.length;r++)(!1&i||n>=i)&&Object.keys(s.O).every((function(t){return s.O[t](o[r])}))?o.splice(r--,1):(l=!1,i<n&&(n=i));if(l){t.splice(d--,1);var c=a();void 0!==c&&(e=c)}}return e}i=i||0;for(var d=t.length;d>0&&t[d-1][2]>i;d--)t[d]=t[d-1];t[d]=[o,a,i]}}(),function(){s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,{a:e}),e}}(),function(){s.d=function(t,e){for(var o in e)s.o(e,o)&&!s.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){s.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t}}(),function(){var t={143:0};s.O.j=function(e){return 0===t[e]};var e=function(e,o){var a,i,n=o[0],l=o[1],r=o[2],c=0;if(n.some((function(e){return 0!==t[e]}))){for(a in l)s.o(l,a)&&(s.m[a]=l[a]);if(r)var d=r(s)}for(e&&e(o);c<n.length;c++)i=n[c],s.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return s.O(d)},o=self["webpackChunksocial_distribution_front_end"]=self["webpackChunksocial_distribution_front_end"]||[];o.forEach(e.bind(null,0)),o.push=e.bind(null,o.push.bind(o))}();var o=s.O(void 0,[998],(function(){return s(5183)}));o=s.O(o)})();
//# sourceMappingURL=app.6b2cb1db.js.map